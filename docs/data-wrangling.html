<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 4 Data Wrangling | STA 444/5 - Introductory Data Science using R</title>
  <meta name="description" content="Chapter 4 Data Wrangling | STA 444/5 - Introductory Data Science using R" />
  <meta name="generator" content="bookdown 0.20.6 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 4 Data Wrangling | STA 444/5 - Introductory Data Science using R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/Cover1.png" />
  
  <meta name="github-repo" content="dereksonderegger/444" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 4 Data Wrangling | STA 444/5 - Introductory Data Science using R" />
  
  
  <meta name="twitter:image" content="images/Cover1.png" />

<meta name="author" content="Derek L. Sonderegger" />


<meta name="date" content="2020-09-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="graphing.html"/>
<link rel="next" href="statistical-models.html"/>
<script src="libs/header-attrs-2.3/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other Resources</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="part"><span><b>Introduction</b></span></li>
<li class="chapter" data-level="1" data-path="familiarization.html"><a href="familiarization.html"><i class="fa fa-check"></i><b>1</b> Familiarization</a>
<ul>
<li class="chapter" data-level="1.1" data-path="familiarization.html"><a href="familiarization.html#working-within-an-rmarkdown-file"><i class="fa fa-check"></i><b>1.1</b> Working within an Rmarkdown File</a></li>
<li class="chapter" data-level="1.2" data-path="familiarization.html"><a href="familiarization.html#r-file-types"><i class="fa fa-check"></i><b>1.2</b> R file Types</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="familiarization.html"><a href="familiarization.html#r-scripts-.r-files"><i class="fa fa-check"></i><b>1.2.1</b> R Scripts (.R files)</a></li>
<li class="chapter" data-level="1.2.2" data-path="familiarization.html"><a href="familiarization.html#r-markdown-.rmd-files"><i class="fa fa-check"></i><b>1.2.2</b> R Markdown (.Rmd files)</a></li>
<li class="chapter" data-level="1.2.3" data-path="familiarization.html"><a href="familiarization.html#r-notebooks-.rmd-files"><i class="fa fa-check"></i><b>1.2.3</b> R Notebooks (.Rmd files)</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="familiarization.html"><a href="familiarization.html#r-as-a-simple-calculator"><i class="fa fa-check"></i><b>1.3</b> R as a simple calculator</a></li>
<li class="chapter" data-level="1.4" data-path="familiarization.html"><a href="familiarization.html#assignment"><i class="fa fa-check"></i><b>1.4</b> Assignment</a></li>
<li class="chapter" data-level="1.5" data-path="familiarization.html"><a href="familiarization.html#vectors"><i class="fa fa-check"></i><b>1.5</b> Vectors</a></li>
<li class="chapter" data-level="1.6" data-path="familiarization.html"><a href="familiarization.html#packages"><i class="fa fa-check"></i><b>1.6</b> Packages</a></li>
<li class="chapter" data-level="1.7" data-path="familiarization.html"><a href="familiarization.html#finding-help"><i class="fa fa-check"></i><b>1.7</b> Finding Help</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="familiarization.html"><a href="familiarization.html#how-does-this-function-work"><i class="fa fa-check"></i><b>1.7.1</b> How does this function work?</a></li>
<li class="chapter" data-level="1.7.2" data-path="familiarization.html"><a href="familiarization.html#how-does-this-package-work"><i class="fa fa-check"></i><b>1.7.2</b> How does this package work?</a></li>
<li class="chapter" data-level="1.7.3" data-path="familiarization.html"><a href="familiarization.html#how-do-i-do-xxx"><i class="fa fa-check"></i><b>1.7.3</b> How do I do XXX?</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="familiarization.html"><a href="familiarization.html#Exercises_Familiarization"><i class="fa fa-check"></i><b>1.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-frames.html"><a href="data-frames.html"><i class="fa fa-check"></i><b>2</b> Data Frames</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-frames.html"><a href="data-frames.html#introduction-to-importing-data"><i class="fa fa-check"></i><b>2.1</b> Introduction to Importing Data</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-frames.html"><a href="data-frames.html#from-a-package"><i class="fa fa-check"></i><b>2.1.1</b> From a Package</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-frames.html"><a href="data-frames.html#import-from-.csv-or-.xls-files"><i class="fa fa-check"></i><b>2.1.2</b> Import from <code>.csv</code> or <code>.xls</code> files</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-frames.html"><a href="data-frames.html#data-types"><i class="fa fa-check"></i><b>2.2</b> Data Types</a></li>
<li class="chapter" data-level="2.3" data-path="data-frames.html"><a href="data-frames.html#basic-manipulation"><i class="fa fa-check"></i><b>2.3</b> Basic Manipulation</a></li>
<li class="chapter" data-level="2.4" data-path="data-frames.html"><a href="data-frames.html#Exercises_IntroDataFrames"><i class="fa fa-check"></i><b>2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="graphing.html"><a href="graphing.html"><i class="fa fa-check"></i><b>3</b> Graphing</a>
<ul>
<li class="chapter" data-level="3.1" data-path="graphing.html"><a href="graphing.html#basic-graphs"><i class="fa fa-check"></i><b>3.1</b> Basic Graphs</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="graphing.html"><a href="graphing.html#scatterplots"><i class="fa fa-check"></i><b>3.1.1</b> Scatterplots</a></li>
<li class="chapter" data-level="3.1.2" data-path="graphing.html"><a href="graphing.html#box-plots"><i class="fa fa-check"></i><b>3.1.2</b> Box Plots</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="graphing.html"><a href="graphing.html#faceting"><i class="fa fa-check"></i><b>3.2</b> Faceting</a></li>
<li class="chapter" data-level="3.3" data-path="graphing.html"><a href="graphing.html#annotation"><i class="fa fa-check"></i><b>3.3</b> Annotation</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="graphing.html"><a href="graphing.html#axis-labels-and-titles"><i class="fa fa-check"></i><b>3.3.1</b> Axis Labels and Titles</a></li>
<li class="chapter" data-level="3.3.2" data-path="graphing.html"><a href="graphing.html#text-labels"><i class="fa fa-check"></i><b>3.3.2</b> Text Labels</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="graphing.html"><a href="graphing.html#Exercises_IntroGraphing"><i class="fa fa-check"></i><b>3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>4</b> Data Wrangling</a>
<ul>
<li class="chapter" data-level="4.1" data-path="data-wrangling.html"><a href="data-wrangling.html#verbs"><i class="fa fa-check"></i><b>4.1</b> Verbs</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="data-wrangling.html"><a href="data-wrangling.html#add_row"><i class="fa fa-check"></i><b>4.1.1</b> <code>add_row</code></a></li>
<li class="chapter" data-level="4.1.2" data-path="data-wrangling.html"><a href="data-wrangling.html#bind_rows"><i class="fa fa-check"></i><b>4.1.2</b> <code>bind_rows</code></a></li>
<li class="chapter" data-level="4.1.3" data-path="data-wrangling.html"><a href="data-wrangling.html#subsetting"><i class="fa fa-check"></i><b>4.1.3</b> Subsetting</a></li>
<li class="chapter" data-level="4.1.4" data-path="data-wrangling.html"><a href="data-wrangling.html#arrange"><i class="fa fa-check"></i><b>4.1.4</b> <code>arrange()</code></a></li>
<li class="chapter" data-level="4.1.5" data-path="data-wrangling.html"><a href="data-wrangling.html#mutate"><i class="fa fa-check"></i><b>4.1.5</b> mutate()</a></li>
<li class="chapter" data-level="4.1.6" data-path="data-wrangling.html"><a href="data-wrangling.html#summarise"><i class="fa fa-check"></i><b>4.1.6</b> summarise()</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="data-wrangling.html"><a href="data-wrangling.html#split-apply-combine"><i class="fa fa-check"></i><b>4.2</b> Split, apply, combine</a></li>
<li class="chapter" data-level="4.3" data-path="data-wrangling.html"><a href="data-wrangling.html#Exercises_IntroDataWrangling"><i class="fa fa-check"></i><b>4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="statistical-models.html"><a href="statistical-models.html"><i class="fa fa-check"></i><b>5</b> Statistical Models</a>
<ul>
<li class="chapter" data-level="5.1" data-path="statistical-models.html"><a href="statistical-models.html#formula-notation"><i class="fa fa-check"></i><b>5.1</b> Formula Notation</a></li>
<li class="chapter" data-level="5.2" data-path="statistical-models.html"><a href="statistical-models.html#basic-models"><i class="fa fa-check"></i><b>5.2</b> Basic Models</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="statistical-models.html"><a href="statistical-models.html#t-tests"><i class="fa fa-check"></i><b>5.2.1</b> t-tests</a></li>
<li class="chapter" data-level="5.2.2" data-path="statistical-models.html"><a href="statistical-models.html#lm-objects"><i class="fa fa-check"></i><b>5.2.2</b> lm objects</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="statistical-models.html"><a href="statistical-models.html#accessor-function"><i class="fa fa-check"></i><b>5.3</b> Accessor function</a></li>
<li class="chapter" data-level="5.4" data-path="statistical-models.html"><a href="statistical-models.html#Exercises_ModelBuilding"><i class="fa fa-check"></i><b>5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="flow-control.html"><a href="flow-control.html"><i class="fa fa-check"></i><b>6</b> Flow Control</a>
<ul>
<li class="chapter" data-level="6.1" data-path="flow-control.html"><a href="flow-control.html#logical-expressions"><i class="fa fa-check"></i><b>6.1</b> Logical Expressions</a></li>
<li class="chapter" data-level="6.2" data-path="flow-control.html"><a href="flow-control.html#decision-statements"><i class="fa fa-check"></i><b>6.2</b> Decision statements</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="flow-control.html"><a href="flow-control.html#in-dplyr-wrangling"><i class="fa fa-check"></i><b>6.2.1</b> In <code>dplyr</code> wrangling</a></li>
<li class="chapter" data-level="6.2.2" data-path="flow-control.html"><a href="flow-control.html#general-if-else"><i class="fa fa-check"></i><b>6.2.2</b> General <code>if else</code></a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="flow-control.html"><a href="flow-control.html#loops"><i class="fa fa-check"></i><b>6.3</b> Loops</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="flow-control.html"><a href="flow-control.html#while-loops"><i class="fa fa-check"></i><b>6.3.1</b> <code>while</code> Loops</a></li>
<li class="chapter" data-level="6.3.2" data-path="flow-control.html"><a href="flow-control.html#for-loops"><i class="fa fa-check"></i><b>6.3.2</b> <code>for</code> Loops</a></li>
<li class="chapter" data-level="6.3.3" data-path="flow-control.html"><a href="flow-control.html#mosaicdo-loops"><i class="fa fa-check"></i><b>6.3.3</b> <code>mosaic::do()</code> loops</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="flow-control.html"><a href="flow-control.html#functions"><i class="fa fa-check"></i><b>6.4</b> Functions</a></li>
<li class="chapter" data-level="6.5" data-path="flow-control.html"><a href="flow-control.html#Exercises_FlowControl"><i class="fa fa-check"></i><b>6.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="factors.html"><a href="factors.html"><i class="fa fa-check"></i><b>7</b> Factors</a>
<ul>
<li class="chapter" data-level="7.1" data-path="factors.html"><a href="factors.html#creation-and-structure"><i class="fa fa-check"></i><b>7.1</b> Creation and Structure</a></li>
<li class="chapter" data-level="7.2" data-path="factors.html"><a href="factors.html#change-labels"><i class="fa fa-check"></i><b>7.2</b> Change Labels</a></li>
<li class="chapter" data-level="7.3" data-path="factors.html"><a href="factors.html#reorder-levels-1"><i class="fa fa-check"></i><b>7.3</b> Reorder Levels</a></li>
<li class="chapter" data-level="7.4" data-path="factors.html"><a href="factors.html#add-or-substract-levels"><i class="fa fa-check"></i><b>7.4</b> Add or substract Levels</a></li>
<li class="chapter" data-level="7.5" data-path="factors.html"><a href="factors.html#Exercises_Factors"><i class="fa fa-check"></i><b>7.5</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>Miscellaneous</b></span></li>
<li class="chapter" data-level="" data-path="statistical-tables.html"><a href="statistical-tables.html"><i class="fa fa-check"></i>Statistical Tables</a>
<ul>
<li class="chapter" data-level="" data-path="statistical-tables.html"><a href="statistical-tables.html#example-distributions"><i class="fa fa-check"></i>Example Distributions</a></li>
<li><a href="statistical-tables.html#mosaicplotdist-function"><code>mosaic::plotDist()</code> function</a></li>
<li class="chapter" data-level="" data-path="statistical-tables.html"><a href="statistical-tables.html#base-r-functions"><i class="fa fa-check"></i>Base R functions</a>
<ul>
<li class="chapter" data-level="" data-path="statistical-tables.html"><a href="statistical-tables.html#d-function"><i class="fa fa-check"></i>d-function</a></li>
<li class="chapter" data-level="" data-path="statistical-tables.html"><a href="statistical-tables.html#p-function"><i class="fa fa-check"></i>p-function</a></li>
<li><a href="statistical-tables.html#q-function"><code>q</code>-function</a></li>
<li class="chapter" data-level="" data-path="statistical-tables.html"><a href="statistical-tables.html#r-function"><i class="fa fa-check"></i>r-function</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="statistical-tables.html"><a href="statistical-tables.html#Exercises_Statistical_Tables"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html"><i class="fa fa-check"></i>Rmarkdown Tricks</a>
<ul>
<li class="chapter" data-level="" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#chunk-options"><i class="fa fa-check"></i>Chunk Options</a></li>
<li class="chapter" data-level="" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#verbatim-list-environments"><i class="fa fa-check"></i>Verbatim &amp; List Environments</a></li>
<li class="chapter" data-level="" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#mathematical-expressions"><i class="fa fa-check"></i>Mathematical expressions</a></li>
<li class="chapter" data-level="" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#tables"><i class="fa fa-check"></i>Tables</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#simple-tables"><i class="fa fa-check"></i><b>7.5.1</b> Simple Tables</a></li>
<li class="chapter" data-level="7.5.2" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#grid-tables"><i class="fa fa-check"></i><b>7.5.2</b> Grid Tables</a></li>
<li class="chapter" data-level="7.5.3" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#pipe-tables"><i class="fa fa-check"></i><b>7.5.3</b> Pipe Tables</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#r-functions-to-produce-table-code."><i class="fa fa-check"></i>R functions to produce table code.</a>
<ul>
<li class="chapter" data-level="7.5.4" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#knitrkable"><i class="fa fa-check"></i><b>7.5.4</b> <code class="unnumbered">knitr::kable</code></a></li>
<li class="chapter" data-level="7.5.5" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#package-pander"><i class="fa fa-check"></i><b>7.5.5</b> Package <code class="unnumbered">pander</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#code-appendix"><i class="fa fa-check"></i>Code Appendix</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-wrangling-process.html"><a href="data-wrangling-process.html"><i class="fa fa-check"></i>Data Wrangling Process</a>
<ul>
<li class="chapter" data-level="7.6" data-path="data-wrangling-process.html"><a href="data-wrangling-process.html#introduction"><i class="fa fa-check"></i><b>7.6</b> Introduction</a></li>
<li class="chapter" data-level="7.7" data-path="data-wrangling-process.html"><a href="data-wrangling-process.html#import"><i class="fa fa-check"></i><b>7.7</b> Import</a></li>
<li class="chapter" data-level="7.8" data-path="data-wrangling-process.html"><a href="data-wrangling-process.html#tidying"><i class="fa fa-check"></i><b>7.8</b> Tidying</a></li>
<li class="chapter" data-level="7.9" data-path="data-wrangling-process.html"><a href="data-wrangling-process.html#cleaning"><i class="fa fa-check"></i><b>7.9</b> Cleaning</a></li>
<li class="chapter" data-level="7.10" data-path="data-wrangling-process.html"><a href="data-wrangling-process.html#use"><i class="fa fa-check"></i><b>7.10</b> Use</a></li>
</ul></li>
<li class="part"><span><b>Deeper Details</b></span></li>
<li class="chapter" data-level="8" data-path="data-structures.html"><a href="data-structures.html"><i class="fa fa-check"></i><b>8</b> Data Structures</a>
<ul>
<li class="chapter" data-level="8.1" data-path="data-structures.html"><a href="data-structures.html#DataStructures_Vectors"><i class="fa fa-check"></i><b>8.1</b> Vectors</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="data-structures.html"><a href="data-structures.html#DataStructures_AccessingVectorElements"><i class="fa fa-check"></i><b>8.1.1</b> Accessing Vector Elements</a></li>
<li class="chapter" data-level="8.1.2" data-path="data-structures.html"><a href="data-structures.html#DataStructures_ScalarFunctions"><i class="fa fa-check"></i><b>8.1.2</b> Scalar Functions Applied to Vectors</a></li>
<li class="chapter" data-level="8.1.3" data-path="data-structures.html"><a href="data-structures.html#DataStructures_VectorAlgebra"><i class="fa fa-check"></i><b>8.1.3</b> Vector Algebra</a></li>
<li class="chapter" data-level="8.1.4" data-path="data-structures.html"><a href="data-structures.html#DataStructures_CommonVectorFunctions"><i class="fa fa-check"></i><b>8.1.4</b> Commonly Used Vector Functions</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="data-structures.html"><a href="data-structures.html#DataStructures_Matrices"><i class="fa fa-check"></i><b>8.2</b> Matrices</a></li>
<li class="chapter" data-level="8.3" data-path="data-structures.html"><a href="data-structures.html#DataStructures_DataFrames"><i class="fa fa-check"></i><b>8.3</b> Data Frames</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="data-structures.html"><a href="data-structures.html#DataStructures_Tibbles"><i class="fa fa-check"></i><b>8.3.1</b> <code>data.frames</code> vs <code>tibbles</code></a></li>
<li class="chapter" data-level="8.3.2" data-path="data-structures.html"><a href="data-structures.html#access-via-vs"><i class="fa fa-check"></i><b>8.3.2</b> Access via <code>[ ]</code> vs <code>[[ ]]</code></a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="data-structures.html"><a href="data-structures.html#DataStructures_Lists"><i class="fa fa-check"></i><b>8.4</b> Lists</a></li>
<li class="chapter" data-level="8.5" data-path="data-structures.html"><a href="data-structures.html#Exercises_DataStructures"><i class="fa fa-check"></i><b>8.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="importing-data.html"><a href="importing-data.html"><i class="fa fa-check"></i><b>9</b> Importing Data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="importing-data.html"><a href="importing-data.html#working-directory"><i class="fa fa-check"></i><b>9.1</b> Working directory</a></li>
<li class="chapter" data-level="9.2" data-path="importing-data.html"><a href="importing-data.html#comma-separated-data"><i class="fa fa-check"></i><b>9.2</b> Comma Separated Data</a></li>
<li class="chapter" data-level="9.3" data-path="importing-data.html"><a href="importing-data.html#ms-excel"><i class="fa fa-check"></i><b>9.3</b> MS Excel</a></li>
<li class="chapter" data-level="9.4" data-path="importing-data.html"><a href="importing-data.html#multiple-files"><i class="fa fa-check"></i><b>9.4</b> Multiple files</a></li>
<li class="chapter" data-level="9.5" data-path="importing-data.html"><a href="importing-data.html#Exercises_DataImport"><i class="fa fa-check"></i><b>9.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="Function-Chapter-Details.html"><a href="Function-Chapter-Details.html"><i class="fa fa-check"></i><b>10</b> Functions</a>
<ul>
<li class="chapter" data-level="10.1" data-path="Function-Chapter-Details.html"><a href="Function-Chapter-Details.html#basic-function-definition"><i class="fa fa-check"></i><b>10.1</b> Basic function definition</a></li>
<li class="chapter" data-level="10.2" data-path="Function-Chapter-Details.html"><a href="Function-Chapter-Details.html#parameter-defaults"><i class="fa fa-check"></i><b>10.2</b> Parameter Defaults</a></li>
<li class="chapter" data-level="10.3" data-path="Function-Chapter-Details.html"><a href="Function-Chapter-Details.html#ellipses"><i class="fa fa-check"></i><b>10.3</b> Ellipses</a></li>
<li class="chapter" data-level="10.4" data-path="Function-Chapter-Details.html"><a href="Function-Chapter-Details.html#function-overloading"><i class="fa fa-check"></i><b>10.4</b> Function Overloading</a></li>
<li class="chapter" data-level="10.5" data-path="Function-Chapter-Details.html"><a href="Function-Chapter-Details.html#debugging"><i class="fa fa-check"></i><b>10.5</b> Debugging</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="Function-Chapter-Details.html"><a href="Function-Chapter-Details.html#rmarkdown-recommendations"><i class="fa fa-check"></i><b>10.5.1</b> Rmarkdown Recommendations</a></li>
<li class="chapter" data-level="10.5.2" data-path="Function-Chapter-Details.html"><a href="Function-Chapter-Details.html#step-wise-execution"><i class="fa fa-check"></i><b>10.5.2</b> Step-wise Execution</a></li>
<li class="chapter" data-level="10.5.3" data-path="Function-Chapter-Details.html"><a href="Function-Chapter-Details.html#print-statements"><i class="fa fa-check"></i><b>10.5.3</b> Print Statements</a></li>
<li class="chapter" data-level="10.5.4" data-path="Function-Chapter-Details.html"><a href="Function-Chapter-Details.html#browser"><i class="fa fa-check"></i><b>10.5.4</b> <code>browser</code></a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="Function-Chapter-Details.html"><a href="Function-Chapter-Details.html#scope"><i class="fa fa-check"></i><b>10.6</b> Scope</a></li>
<li class="chapter" data-level="10.7" data-path="Function-Chapter-Details.html"><a href="Function-Chapter-Details.html#Exercises_Functions"><i class="fa fa-check"></i><b>10.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="string-manipulation.html"><a href="string-manipulation.html"><i class="fa fa-check"></i><b>11</b> String Manipulation</a>
<ul>
<li class="chapter" data-level="11.1" data-path="string-manipulation.html"><a href="string-manipulation.html#base-function"><i class="fa fa-check"></i><b>11.1</b> Base function</a></li>
<li class="chapter" data-level="11.2" data-path="string-manipulation.html"><a href="string-manipulation.html#stringr-basic-operations"><i class="fa fa-check"></i><b>11.2</b> <code>stringr</code>: Basic operations</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="string-manipulation.html"><a href="string-manipulation.html#concatenating-with-str_c-or-str_join"><i class="fa fa-check"></i><b>11.2.1</b> Concatenating with <code>str_c()</code> or <code>str_join()</code></a></li>
<li class="chapter" data-level="11.2.2" data-path="string-manipulation.html"><a href="string-manipulation.html#calculating-string-length-with-str_length"><i class="fa fa-check"></i><b>11.2.2</b> Calculating string length with <code>str_length()</code></a></li>
<li class="chapter" data-level="11.2.3" data-path="string-manipulation.html"><a href="string-manipulation.html#extracting-substrings-with-str_sub"><i class="fa fa-check"></i><b>11.2.3</b> Extracting substrings with <code>str_sub()</code></a></li>
<li class="chapter" data-level="11.2.4" data-path="string-manipulation.html"><a href="string-manipulation.html#pad-a-string-with-str_pad"><i class="fa fa-check"></i><b>11.2.4</b> Pad a string with <code>str_pad()</code></a></li>
<li class="chapter" data-level="11.2.5" data-path="string-manipulation.html"><a href="string-manipulation.html#trim-a-string-with-str_trim"><i class="fa fa-check"></i><b>11.2.5</b> Trim a string with <code>str_trim()</code></a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="string-manipulation.html"><a href="string-manipulation.html#stringr-pattern-matching-tools"><i class="fa fa-check"></i><b>11.3</b> <code>stringr</code>: Pattern Matching Tools</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="string-manipulation.html"><a href="string-manipulation.html#detecting-a-pattern-using-str_detect"><i class="fa fa-check"></i><b>11.3.1</b> Detecting a pattern using str_detect()</a></li>
<li class="chapter" data-level="11.3.2" data-path="string-manipulation.html"><a href="string-manipulation.html#locating-a-pattern-using-str_locate"><i class="fa fa-check"></i><b>11.3.2</b> Locating a pattern using str_locate()</a></li>
<li class="chapter" data-level="11.3.3" data-path="string-manipulation.html"><a href="string-manipulation.html#replacing-sub-strings-using-str_replace"><i class="fa fa-check"></i><b>11.3.3</b> Replacing sub-strings using <code>str_replace()</code></a></li>
<li class="chapter" data-level="11.3.4" data-path="string-manipulation.html"><a href="string-manipulation.html#splitting-into-sub-strings-using-str_split-and-tidyrseparate"><i class="fa fa-check"></i><b>11.3.4</b> Splitting into sub-strings using <code>str_split()</code> and <code>tidyr::separate()</code></a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="string-manipulation.html"><a href="string-manipulation.html#regular-expressions"><i class="fa fa-check"></i><b>11.4</b> Regular Expressions</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="string-manipulation.html"><a href="string-manipulation.html#regular-expression-ingredients"><i class="fa fa-check"></i><b>11.4.1</b> Regular Expression Ingredients</a></li>
<li class="chapter" data-level="11.4.2" data-path="string-manipulation.html"><a href="string-manipulation.html#matching-a-specific-string"><i class="fa fa-check"></i><b>11.4.2</b> Matching a specific string</a></li>
<li class="chapter" data-level="11.4.3" data-path="string-manipulation.html"><a href="string-manipulation.html#matching-arbitrary-numbers"><i class="fa fa-check"></i><b>11.4.3</b> Matching arbitrary numbers</a></li>
<li class="chapter" data-level="11.4.4" data-path="string-manipulation.html"><a href="string-manipulation.html#greedy-matching"><i class="fa fa-check"></i><b>11.4.4</b> Greedy matching</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="string-manipulation.html"><a href="string-manipulation.html#fuzzy-pattern-matching"><i class="fa fa-check"></i><b>11.5</b> Fuzzy Pattern Matching</a>
<ul>
<li class="chapter" data-level="11.5.1" data-path="string-manipulation.html"><a href="string-manipulation.html#key-collision-merge"><i class="fa fa-check"></i><b>11.5.1</b> Key Collision Merge</a></li>
<li class="chapter" data-level="11.5.2" data-path="string-manipulation.html"><a href="string-manipulation.html#string-distances"><i class="fa fa-check"></i><b>11.5.2</b> String Distances</a></li>
<li class="chapter" data-level="11.5.3" data-path="string-manipulation.html"><a href="string-manipulation.html#n-gram-merge"><i class="fa fa-check"></i><b>11.5.3</b> N-gram Merge</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="string-manipulation.html"><a href="string-manipulation.html#Exercises_Strings"><i class="fa fa-check"></i><b>11.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="dates-and-times.html"><a href="dates-and-times.html"><i class="fa fa-check"></i><b>12</b> Dates and Times</a>
<ul>
<li class="chapter" data-level="12.1" data-path="dates-and-times.html"><a href="dates-and-times.html#creating-date-and-time-objects"><i class="fa fa-check"></i><b>12.1</b> Creating Date and Time objects</a></li>
<li class="chapter" data-level="12.2" data-path="dates-and-times.html"><a href="dates-and-times.html#extracting-information"><i class="fa fa-check"></i><b>12.2</b> Extracting information</a></li>
<li class="chapter" data-level="12.3" data-path="dates-and-times.html"><a href="dates-and-times.html#arithmetic-on-dates"><i class="fa fa-check"></i><b>12.3</b> Arithmetic on Dates</a></li>
<li class="chapter" data-level="12.4" data-path="dates-and-times.html"><a href="dates-and-times.html#Exercises_Dates"><i class="fa fa-check"></i><b>12.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="data-reshaping.html"><a href="data-reshaping.html"><i class="fa fa-check"></i><b>13</b> Data Reshaping</a>
<ul>
<li class="chapter" data-level="13.1" data-path="data-reshaping.html"><a href="data-reshaping.html#cbind-rbind"><i class="fa fa-check"></i><b>13.1</b> <code>cbind</code> &amp; <code>rbind</code></a></li>
<li class="chapter" data-level="13.2" data-path="data-reshaping.html"><a href="data-reshaping.html#table-pivots"><i class="fa fa-check"></i><b>13.2</b> Table Pivots</a></li>
<li class="chapter" data-level="13.3" data-path="data-reshaping.html"><a href="data-reshaping.html#spreading-a-single-column-with-separate"><i class="fa fa-check"></i><b>13.3</b> Spreading a Single Column with <code>separate</code></a></li>
<li class="chapter" data-level="13.4" data-path="data-reshaping.html"><a href="data-reshaping.html#storing-data-in-multiple-tables"><i class="fa fa-check"></i><b>13.4</b> Storing Data in Multiple Tables</a></li>
<li class="chapter" data-level="13.5" data-path="data-reshaping.html"><a href="data-reshaping.html#table-joins"><i class="fa fa-check"></i><b>13.5</b> Table Joins</a></li>
<li class="chapter" data-level="13.6" data-path="data-reshaping.html"><a href="data-reshaping.html#row-summations"><i class="fa fa-check"></i><b>13.6</b> Row summations</a></li>
<li class="chapter" data-level="13.7" data-path="data-reshaping.html"><a href="data-reshaping.html#Exercises_DataReshaping"><i class="fa fa-check"></i><b>13.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i>Maps</a>
<ul>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#introduction-1"><i class="fa fa-check"></i>Introduction</a>
<ul>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#coordinate-reference-systems-crs"><i class="fa fa-check"></i>Coordinate Reference Systems (CRS)</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#spatial-objects"><i class="fa fa-check"></i>Spatial Objects</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#tiles"><i class="fa fa-check"></i>Tiles</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#obtaining-spatial-data"><i class="fa fa-check"></i>Obtaining Spatial Data</a>
<ul>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#natural-earth-database"><i class="fa fa-check"></i>Natural Earth Database</a></li>
<li class="chapter" data-level="13.7.1" data-path="maps.html"><a href="maps.html#package-maps"><i class="fa fa-check"></i><b>13.7.1</b> Package <code class="unnumbered">maps</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#example"><i class="fa fa-check"></i>Example</a>
<ul>
<li class="chapter" data-level="13.7.2" data-path="maps.html"><a href="maps.html#package-leaflet"><i class="fa fa-check"></i><b>13.7.2</b> Package <code class="unnumbered">leaflet</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="graphing-part-ii.html"><a href="graphing-part-ii.html"><i class="fa fa-check"></i><b>14</b> Graphing Part II</a>
<ul>
<li class="chapter" data-level="14.1" data-path="graphing-part-ii.html"><a href="graphing-part-ii.html#multi-plots"><i class="fa fa-check"></i><b>14.1</b> Multi-plots</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="graphing-part-ii.html"><a href="graphing-part-ii.html#cowplot-package"><i class="fa fa-check"></i><b>14.1.1</b> <code>cowplot</code> package</a></li>
<li class="chapter" data-level="14.1.2" data-path="graphing-part-ii.html"><a href="graphing-part-ii.html#multiplot-in-rmisc"><i class="fa fa-check"></i><b>14.1.2</b> <code>multiplot</code> in <code>Rmisc</code></a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="graphing-part-ii.html"><a href="graphing-part-ii.html#customized-scales"><i class="fa fa-check"></i><b>14.2</b> Customized Scales</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="graphing-part-ii.html"><a href="graphing-part-ii.html#color-scales"><i class="fa fa-check"></i><b>14.2.1</b> Color Scales</a></li>
<li class="chapter" data-level="14.2.2" data-path="graphing-part-ii.html"><a href="graphing-part-ii.html#setting-major-minor-ticks"><i class="fa fa-check"></i><b>14.2.2</b> Setting major &amp; minor ticks</a></li>
<li class="chapter" data-level="14.2.3" data-path="graphing-part-ii.html"><a href="graphing-part-ii.html#log-scales"><i class="fa fa-check"></i><b>14.2.3</b> Log Scales</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="graphing-part-ii.html"><a href="graphing-part-ii.html#themes"><i class="fa fa-check"></i><b>14.3</b> Themes</a></li>
<li class="chapter" data-level="14.4" data-path="graphing-part-ii.html"><a href="graphing-part-ii.html#mathematical-notation"><i class="fa fa-check"></i><b>14.4</b> Mathematical Notation</a></li>
<li class="chapter" data-level="14.5" data-path="graphing-part-ii.html"><a href="graphing-part-ii.html#interactive-plots-with-plotly"><i class="fa fa-check"></i><b>14.5</b> Interactive plots with <code>plotly</code></a></li>
<li class="chapter" data-level="14.6" data-path="graphing-part-ii.html"><a href="graphing-part-ii.html#geographic-maps"><i class="fa fa-check"></i><b>14.6</b> Geographic Maps</a>
<ul>
<li class="chapter" data-level="14.6.1" data-path="graphing-part-ii.html"><a href="graphing-part-ii.html#package-maps-1"><i class="fa fa-check"></i><b>14.6.1</b> Package <code>maps</code></a></li>
<li class="chapter" data-level="14.6.2" data-path="graphing-part-ii.html"><a href="graphing-part-ii.html#packages-sf-and-rnaturalearth"><i class="fa fa-check"></i><b>14.6.2</b> Packages <code>sf</code> and <code>rnaturalearth</code></a></li>
<li class="chapter" data-level="14.6.3" data-path="graphing-part-ii.html"><a href="graphing-part-ii.html#package-leaflet-1"><i class="fa fa-check"></i><b>14.6.3</b> Package <code>leaflet</code></a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="graphing-part-ii.html"><a href="graphing-part-ii.html#Exercises_Advanced_Graphing"><i class="fa fa-check"></i><b>14.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="r-packages.html"><a href="r-packages.html"><i class="fa fa-check"></i><b>15</b> R Packages</a>
<ul>
<li class="chapter" data-level="15.1" data-path="r-packages.html"><a href="r-packages.html#introduction-2"><i class="fa fa-check"></i><b>15.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="r-packages.html"><a href="r-packages.html#useful-packages-and-books"><i class="fa fa-check"></i><b>15.1.1</b> Useful packages and books</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="r-packages.html"><a href="r-packages.html#package-structure"><i class="fa fa-check"></i><b>15.2</b> Package Structure</a>
<ul>
<li class="chapter" data-level="15.2.1" data-path="r-packages.html"><a href="r-packages.html#minimal-files-and-directories"><i class="fa fa-check"></i><b>15.2.1</b> Minimal files and directories</a></li>
<li class="chapter" data-level="15.2.2" data-path="r-packages.html"><a href="r-packages.html#optional-files-and-directories"><i class="fa fa-check"></i><b>15.2.2</b> Optional Files and Directories</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="r-packages.html"><a href="r-packages.html#documenting"><i class="fa fa-check"></i><b>15.3</b> Documenting</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="r-packages.html"><a href="r-packages.html#data-documentation"><i class="fa fa-check"></i><b>15.3.1</b> Data Documentation</a></li>
<li class="chapter" data-level="15.3.2" data-path="r-packages.html"><a href="r-packages.html#documenting-functions"><i class="fa fa-check"></i><b>15.3.2</b> Documenting Functions</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="r-packages.html"><a href="r-packages.html#testing"><i class="fa fa-check"></i><b>15.4</b> Testing</a></li>
<li class="chapter" data-level="15.5" data-path="r-packages.html"><a href="r-packages.html#the-description-file"><i class="fa fa-check"></i><b>15.5</b> The DESCRIPTION file</a></li>
<li class="chapter" data-level="15.6" data-path="r-packages.html"><a href="r-packages.html#sharing-your-package"><i class="fa fa-check"></i><b>15.6</b> Sharing your Package</a></li>
<li class="chapter" data-level="15.7" data-path="r-packages.html"><a href="r-packages.html#an-example-package"><i class="fa fa-check"></i><b>15.7</b> An Example Package</a></li>
<li class="chapter" data-level="15.8" data-path="r-packages.html"><a href="r-packages.html#Exercises_Packages"><i class="fa fa-check"></i><b>15.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="data-scraping.html"><a href="data-scraping.html"><i class="fa fa-check"></i><b>16</b> Data Scraping</a>
<ul>
<li class="chapter" data-level="16.1" data-path="data-scraping.html"><a href="data-scraping.html#web-pages"><i class="fa fa-check"></i><b>16.1</b> Web Pages</a>
<ul>
<li class="chapter" data-level="16.1.1" data-path="data-scraping.html"><a href="data-scraping.html#example-wikipedia-table"><i class="fa fa-check"></i><b>16.1.1</b> Example Wikipedia Table</a></li>
<li class="chapter" data-level="16.1.2" data-path="data-scraping.html"><a href="data-scraping.html#lists"><i class="fa fa-check"></i><b>16.1.2</b> Lists</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="data-scraping.html"><a href="data-scraping.html#scraping-.pdf-files"><i class="fa fa-check"></i><b>16.2</b> Scraping .pdf files</a></li>
<li class="chapter" data-level="16.3" data-path="data-scraping.html"><a href="data-scraping.html#Exercises_WebScraping"><i class="fa fa-check"></i><b>16.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="api-data-queries.html"><a href="api-data-queries.html"><i class="fa fa-check"></i><b>17</b> API Data Queries</a>
<ul>
<li class="chapter" data-level="17.1" data-path="api-data-queries.html"><a href="api-data-queries.html#introduction-3"><i class="fa fa-check"></i><b>17.1</b> Introduction</a></li>
<li class="chapter" data-level="17.2" data-path="api-data-queries.html"><a href="api-data-queries.html#census-bureau-api"><i class="fa fa-check"></i><b>17.2</b> Census Bureau API</a></li>
<li class="chapter" data-level="17.3" data-path="api-data-queries.html"><a href="api-data-queries.html#package-censusapi"><i class="fa fa-check"></i><b>17.3</b> Package <code>censusapi</code></a>
<ul>
<li class="chapter" data-level="17.3.1" data-path="api-data-queries.html"><a href="api-data-queries.html#population-estimates"><i class="fa fa-check"></i><b>17.3.1</b> Population Estimates</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="api-data-queries.html"><a href="api-data-queries.html#package-tidycensus"><i class="fa fa-check"></i><b>17.4</b> Package <code>tidycensus</code></a></li>
<li class="chapter" data-level="17.5" data-path="api-data-queries.html"><a href="api-data-queries.html#Exercises_APIs"><i class="fa fa-check"></i><b>17.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="databases.html"><a href="databases.html"><i class="fa fa-check"></i><b>18</b> Databases</a>
<ul>
<li class="chapter" data-level="18.1" data-path="databases.html"><a href="databases.html#tutorial-set-up"><i class="fa fa-check"></i><b>18.1</b> Tutorial Set-Up</a></li>
<li class="chapter" data-level="18.2" data-path="databases.html"><a href="databases.html#sql"><i class="fa fa-check"></i><b>18.2</b> SQL</a></li>
<li class="chapter" data-level="18.3" data-path="databases.html"><a href="databases.html#dbplyr"><i class="fa fa-check"></i><b>18.3</b> <code>dbplyr</code></a></li>
<li class="chapter" data-level="18.4" data-path="databases.html"><a href="databases.html#Exercises_DataBases"><i class="fa fa-check"></i><b>18.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="speeding-up-r.html"><a href="speeding-up-r.html"><i class="fa fa-check"></i><b>19</b> Speeding up R</a>
<ul>
<li class="chapter" data-level="19.1" data-path="speeding-up-r.html"><a href="speeding-up-r.html#faster-for-loops"><i class="fa fa-check"></i><b>19.1</b> Faster for loops?</a></li>
<li class="chapter" data-level="19.2" data-path="speeding-up-r.html"><a href="speeding-up-r.html#vectorizing-loops"><i class="fa fa-check"></i><b>19.2</b> Vectorizing loops</a></li>
<li class="chapter" data-level="19.3" data-path="speeding-up-r.html"><a href="speeding-up-r.html#parallel-processing"><i class="fa fa-check"></i><b>19.3</b> Parallel Processing</a></li>
<li class="chapter" data-level="19.4" data-path="speeding-up-r.html"><a href="speeding-up-r.html#parallel-aware-functions"><i class="fa fa-check"></i><b>19.4</b> Parallel Aware Functions</a>
<ul>
<li class="chapter" data-level="19.4.1" data-path="speeding-up-r.html"><a href="speeding-up-r.html#bootboot"><i class="fa fa-check"></i><b>19.4.1</b> <code>boot::boot</code></a></li>
<li class="chapter" data-level="19.4.2" data-path="speeding-up-r.html"><a href="speeding-up-r.html#carettrain"><i class="fa fa-check"></i><b>19.4.2</b> <code>caret::train</code></a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="speeding-up-r.html"><a href="speeding-up-r.html#parallelizing-for-loops"><i class="fa fa-check"></i><b>19.5</b> Parallelizing <code>for</code> loops</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="cheatsheet.html"><a href="cheatsheet.html"><i class="fa fa-check"></i>CheatSheet</a>
<ul>
<li class="chapter" data-level="" data-path="cheatsheet.html"><a href="cheatsheet.html#importing-data-and-loading-packages"><i class="fa fa-check"></i>Importing Data and Loading Packages</a></li>
<li class="chapter" data-level="" data-path="cheatsheet.html"><a href="cheatsheet.html#useful-vectorized-functions"><i class="fa fa-check"></i>Useful vectorized functions</a></li>
<li class="chapter" data-level="" data-path="cheatsheet.html"><a href="cheatsheet.html#data-frame-tibble-manipulation"><i class="fa fa-check"></i>Data frame (tibble) manipulation</a></li>
<li class="chapter" data-level="" data-path="cheatsheet.html"><a href="cheatsheet.html#data-frame-tibble-reshaping"><i class="fa fa-check"></i>Data frame (tibble) reshaping</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">STA 444/5 - Introductory Data Science using R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-wrangling" class="section level1" number="4">
<h1><span class="header-section-number">Chapter 4</span> Data Wrangling</h1>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="data-wrangling.html#cb102-1" aria-hidden="true"></a><span class="kw">library</span>(tidyverse, <span class="dt">quietly =</span> <span class="ot">TRUE</span>)    <span class="co"># loading ggplot2 and dplyr</span></span>
<span id="cb102-2"><a href="data-wrangling.html#cb102-2" aria-hidden="true"></a><span class="kw">options</span>(<span class="dt">dplyr.summarise.inform=</span><span class="ot">FALSE</span>) <span class="co"># Don&#39;t annoy me with summaris messages</span></span></code></pre></div>
<p>As always, there is a <a href="https://youtu.be/99Q7AunWuk0">Video Lecture</a> that accompanies this chapter.</p>
<p>Many of the tools to manipulate data frames in R were written without a consistent syntax and are difficult use together. To remedy this, Hadley Wickham (the writer of <code>ggplot2</code>) introduced a package called plyr which was quite useful. As with many projects, his first version was good but not great and he introduced an improved version that works exclusively with data.frames called <code>dplyr</code> which we will investigate. The package <code>dplyr</code> strives to provide a convenient and consistent set of functions to handle the most common data frame manipulations and a mechanism for chaining these operations together to perform complex tasks.</p>
<p>The Dr Wickham has put together a very nice introduction to the package that explains in more detail how the various pieces work and I encourage you to read it at some point. [<a href="http://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html" class="uri">http://cran.rstudio.com/web/packages/dplyr/vignettes/introduction.html</a>].</p>
<p>One of the aspects about the <code>data.frame</code> object is that R does some simplification for you, but it does not do it in a consistent manner. Somewhat obnoxiously character strings are always converted to factors and subsetting might return a <code>data.frame</code> or a <code>vector</code> or a <code>scalar</code>. This is fine at the command line, but can be problematic when programming. Furthermore, many operations are pretty slow using <code>data.frame</code>. To get around this, Dr Wickham introduced a modified version of the <code>data.frame</code> called a <code>tibble</code>. A <code>tibble</code> is a <code>data.frame</code> but with a few extra bits. For now we can ignore the differences.</p>
<p>The pipe command <code>%&gt;%</code> allows for very readable code. The idea is that the <code>%&gt;%</code> operator works by translating the command <code>a %&gt;% f(b)</code> to the expression <code>f(a,b)</code>. This operator works on any function and was introduced in the <code>magrittr</code> package. The beauty of this comes when you have a suite of functions that takes input arguments of the same type as their output.</p>
<p>For example, if we wanted to start with <code>x</code>, and first apply function <code>f()</code>, then <code>g()</code>, and then <code>h()</code>, the usual R command would be <code>h(g(f(x)))</code> which is hard to read because you have to start reading at the <em>innermost</em> set of parentheses. Using the pipe command <code>%&gt;%</code>, this sequence of operations becomes <code>x %&gt;% f() %&gt;% g() %&gt;% h()</code>.</p>
<table>
<thead>
<tr class="header">
<th align="center">Written</th>
<th align="center">Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>a %&gt;% f(b)</code></td>
<td align="center"><code>f(a,b)</code></td>
</tr>
<tr class="even">
<td align="center"><code>b %&gt;% f(a, .)</code></td>
<td align="center"><code>f(a, b)</code></td>
</tr>
<tr class="odd">
<td align="center"><code>x %&gt;% f() %&gt;% g()</code></td>
<td align="center"><code>g( f(x) )</code></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="data-wrangling.html#cb103-1" aria-hidden="true"></a><span class="co"># This code is not particularly readable because</span></span>
<span id="cb103-2"><a href="data-wrangling.html#cb103-2" aria-hidden="true"></a><span class="co"># the order of summing vs taking absolute value isn&#39;t </span></span>
<span id="cb103-3"><a href="data-wrangling.html#cb103-3" aria-hidden="true"></a><span class="co"># completely obvious. </span></span>
<span id="cb103-4"><a href="data-wrangling.html#cb103-4" aria-hidden="true"></a><span class="kw">sum</span>(<span class="kw">abs</span>(<span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>)))</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="data-wrangling.html#cb105-1" aria-hidden="true"></a><span class="co"># But using the pipe function, it is blatantly obvious</span></span>
<span id="cb105-2"><a href="data-wrangling.html#cb105-2" aria-hidden="true"></a><span class="co"># what order the operations are done in. </span></span>
<span id="cb105-3"><a href="data-wrangling.html#cb105-3" aria-hidden="true"></a><span class="kw">c</span>( <span class="dv">-1</span>, <span class="dv">0</span>, <span class="dv">1</span>) <span class="op">%&gt;%</span><span class="st">  </span><span class="co"># take a vector of values</span></span>
<span id="cb105-4"><a href="data-wrangling.html#cb105-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">abs</span>()  <span class="op">%&gt;%</span><span class="st">      </span><span class="co"># take the absolute value of each</span></span>
<span id="cb105-5"><a href="data-wrangling.html#cb105-5" aria-hidden="true"></a><span class="st">  </span><span class="kw">sum</span>()           <span class="co"># add them up.</span></span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>In <code>dplyr</code>, all the functions below take a <em>data set as its first argument</em> and <em>outputs an appropriately modified data set</em>. This will allow me to chain together commands in a readable fashion. The pipe command works with any function, not just the <code>dplyr</code> functions and I often find myself using it all over the place.</p>
<div id="verbs" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Verbs</h2>
<p>The foundational operations to perform on a data set are:</p>
<ul>
<li><p>Adding rows</p>
<ul>
<li><code>add_row</code> - Add an additional single row of data, specified by cell</li>
<li><code>bind_rows</code> - Add additional rows of data, specified by a single data frame.</li>
</ul></li>
<li><p>Subsetting - Returns a data set with particular columns or rows
 <code>select</code> - Selecting a subset of columns by name or column number.
 <code>filter</code> - Selecting a subset of rows from a data frame based on logical expressions.
 <code>slice</code> - Selecting a subset of rows by row number.</p>
<ul>
<li><code>drop_na</code> - Remove rows that contain missing values</li>
</ul></li>
<li><p><code>arrange</code> - Re-ordering the rows of a data frame.</p></li>
<li><p><code>mutate</code> - Add a new column that is some function of other columns.</p></li>
<li><p><code>summarise</code> - calculate some summary statistic of a column of data. This collapses a set of rows into a single row.</p></li>
</ul>
<p>Each of these operations is a function in the package <code>dplyr</code>. These functions all have a similar calling syntax, the first argument is a data set, subsequent arguments describe what to do with the input data frame and you can refer to the columns without using the <code>df$column</code> notation. All of these functions will return a data set.</p>
<p>To demonstrate all of these actions, we will consider a tiny dataset of a gradebook of doctors at a Sacred Heart Hospital.</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="data-wrangling.html#cb107-1" aria-hidden="true"></a><span class="co"># Create a tiny data frame that is easy to see what is happening</span></span>
<span id="cb107-2"><a href="data-wrangling.html#cb107-2" aria-hidden="true"></a>Mentors &lt;-<span class="st"> </span><span class="kw">tribble</span>(</span>
<span id="cb107-3"><a href="data-wrangling.html#cb107-3" aria-hidden="true"></a>  <span class="op">~</span>l.name, <span class="op">~</span>Gender, <span class="op">~</span>Exam1, <span class="op">~</span>Exam2, <span class="op">~</span>Final,</span>
<span id="cb107-4"><a href="data-wrangling.html#cb107-4" aria-hidden="true"></a>  <span class="st">&#39;Cox&#39;</span>,     <span class="st">&#39;M&#39;</span>,     <span class="dv">93</span>,     <span class="dv">98</span>,     <span class="dv">96</span>,</span>
<span id="cb107-5"><a href="data-wrangling.html#cb107-5" aria-hidden="true"></a>  <span class="st">&#39;Kelso&#39;</span>,   <span class="st">&#39;M&#39;</span>,     <span class="dv">80</span>,     <span class="dv">82</span>,     <span class="dv">81</span>)</span>
<span id="cb107-6"><a href="data-wrangling.html#cb107-6" aria-hidden="true"></a>Residents &lt;-<span class="st"> </span><span class="kw">tribble</span>(</span>
<span id="cb107-7"><a href="data-wrangling.html#cb107-7" aria-hidden="true"></a>  <span class="op">~</span>l.name, <span class="op">~</span>Gender, <span class="op">~</span>Exam1, <span class="op">~</span>Exam2, <span class="op">~</span>Final,</span>
<span id="cb107-8"><a href="data-wrangling.html#cb107-8" aria-hidden="true"></a>  <span class="st">&#39;Dorian&#39;</span>,  <span class="st">&#39;M&#39;</span>,     <span class="dv">89</span>,     <span class="dv">70</span>,     <span class="dv">85</span>,</span>
<span id="cb107-9"><a href="data-wrangling.html#cb107-9" aria-hidden="true"></a>  <span class="st">&#39;Turk&#39;</span>,    <span class="st">&#39;M&#39;</span>,     <span class="dv">70</span>,     <span class="dv">85</span>,     <span class="dv">92</span>)</span></code></pre></div>
<div id="add_row" class="section level3" number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> <code>add_row</code></h3>
<p>Suppose that we want to add a row to our dataset. We can give it as much or as little information as we want and any missing information will be denoted as missing using a <code>NA</code> which stands for <em>N</em>ot <em>A</em>vailable.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="data-wrangling.html#cb108-1" aria-hidden="true"></a>Residents  <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb108-2"><a href="data-wrangling.html#cb108-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">add_row</span>( <span class="dt">l.name=</span><span class="st">&#39;Reid&#39;</span>, <span class="dt">Exam1=</span><span class="dv">95</span>, <span class="dt">Exam2=</span><span class="dv">92</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##   l.name Gender Exam1 Exam2 Final
##   &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Dorian M         89    70    85
## 2 Turk   M         70    85    92
## 3 Reid   &lt;NA&gt;      95    92    NA</code></pre>
<p>Because we didnt assign the result of our previous calculation to any object name, R just printed the result. Instead, lets add all of Dr Reids information and save the result by <em>overwritting</em> the <code>grades</code> data.frame with the new version.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="data-wrangling.html#cb110-1" aria-hidden="true"></a>Residents &lt;-<span class="st"> </span>Residents <span class="op">%&gt;%</span></span>
<span id="cb110-2"><a href="data-wrangling.html#cb110-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">add_row</span>( <span class="dt">l.name=</span><span class="st">&#39;Reid&#39;</span>, <span class="dt">Gender=</span><span class="st">&#39;F&#39;</span>, <span class="dt">Exam1=</span><span class="dv">95</span>, <span class="dt">Exam2=</span><span class="dv">92</span>, <span class="dt">Final=</span><span class="dv">100</span>)</span>
<span id="cb110-3"><a href="data-wrangling.html#cb110-3" aria-hidden="true"></a>Residents</span></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##   l.name Gender Exam1 Exam2 Final
##   &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Dorian M         89    70    85
## 2 Turk   M         70    85    92
## 3 Reid   F         95    92   100</code></pre>
</div>
<div id="bind_rows" class="section level3" number="4.1.2">
<h3><span class="header-section-number">4.1.2</span> <code>bind_rows</code></h3>
<p>To combine two data frames together, well bind them together using <code>bind_rows()</code>. We just need to specify the order to stack them.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="data-wrangling.html#cb112-1" aria-hidden="true"></a><span class="co"># now to combine two data frames by stacking Mentors first and then Residents</span></span>
<span id="cb112-2"><a href="data-wrangling.html#cb112-2" aria-hidden="true"></a>grades &lt;-<span class="st"> </span>Mentors <span class="op">%&gt;%</span></span>
<span id="cb112-3"><a href="data-wrangling.html#cb112-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">bind_rows</span>(Residents)</span>
<span id="cb112-4"><a href="data-wrangling.html#cb112-4" aria-hidden="true"></a></span>
<span id="cb112-5"><a href="data-wrangling.html#cb112-5" aria-hidden="true"></a>grades</span></code></pre></div>
<pre><code>## # A tibble: 5 x 5
##   l.name Gender Exam1 Exam2 Final
##   &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Cox    M         93    98    96
## 2 Kelso  M         80    82    81
## 3 Dorian M         89    70    85
## 4 Turk   M         70    85    92
## 5 Reid   F         95    92   100</code></pre>
</div>
<div id="subsetting" class="section level3" number="4.1.3">
<h3><span class="header-section-number">4.1.3</span> Subsetting</h3>
<p>These function allows you select certain columns and rows of a data frame.</p>
<div id="select" class="section level4" number="4.1.3.1">
<h4><span class="header-section-number">4.1.3.1</span> <code>select()</code></h4>
<p>Often you only want to work with a small number of columns of a data frame and want to be able to <em>select</em> a subset of columns or perhaps remove a subset. The function to do that is <code>dplyr::select()</code>.</p>
<p>I could select the columns Exam columns by hand, or by using an extension of the <code>:</code> operator</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="data-wrangling.html#cb114-1" aria-hidden="true"></a><span class="co"># select( grades,  Exam1, Exam2 )   # from `grades`, select columns Exam1, Exam2</span></span>
<span id="cb114-2"><a href="data-wrangling.html#cb114-2" aria-hidden="true"></a>grades <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>( Exam1, Exam2 )   <span class="co"># Exam1 and Exam2</span></span></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   Exam1 Exam2
##   &lt;dbl&gt; &lt;dbl&gt;
## 1    93    98
## 2    80    82
## 3    89    70
## 4    70    85
## 5    95    92</code></pre>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="data-wrangling.html#cb116-1" aria-hidden="true"></a>grades <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>( Exam1<span class="op">:</span>Final )    <span class="co"># Columns Exam1 through Final</span></span></code></pre></div>
<pre><code>## # A tibble: 5 x 3
##   Exam1 Exam2 Final
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1    93    98    96
## 2    80    82    81
## 3    89    70    85
## 4    70    85    92
## 5    95    92   100</code></pre>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="data-wrangling.html#cb118-1" aria-hidden="true"></a>grades <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>( <span class="op">-</span>Exam1 )         <span class="co"># Negative indexing by name drops a column</span></span></code></pre></div>
<pre><code>## # A tibble: 5 x 4
##   l.name Gender Exam2 Final
##   &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;
## 1 Cox    M         98    96
## 2 Kelso  M         82    81
## 3 Dorian M         70    85
## 4 Turk   M         85    92
## 5 Reid   F         92   100</code></pre>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="data-wrangling.html#cb120-1" aria-hidden="true"></a>grades <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>( <span class="dv">1</span><span class="op">:</span><span class="dv">2</span> )            <span class="co"># Can select column by column position</span></span></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   l.name Gender
##   &lt;chr&gt;  &lt;chr&gt; 
## 1 Cox    M     
## 2 Kelso  M     
## 3 Dorian M     
## 4 Turk   M     
## 5 Reid   F</code></pre>
<p>The <code>select()</code> command has a few other tricks. There are functional calls that describe the columns you wish to select that take advantage of pattern matching. I generally can get by with <code>starts_with()</code>, <code>ends_with()</code>, and <code>contains()</code>, but there is a final operator <code>matches()</code> that takes a regular expression.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="data-wrangling.html#cb122-1" aria-hidden="true"></a>grades <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>( <span class="kw">starts_with</span>(<span class="st">&#39;Exam&#39;</span>) )   <span class="co"># Exam1 and Exam2</span></span></code></pre></div>
<pre><code>## # A tibble: 5 x 2
##   Exam1 Exam2
##   &lt;dbl&gt; &lt;dbl&gt;
## 1    93    98
## 2    80    82
## 3    89    70
## 4    70    85
## 5    95    92</code></pre>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="data-wrangling.html#cb124-1" aria-hidden="true"></a>grades <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>( <span class="kw">starts_with</span>(<span class="st">&#39;Exam&#39;</span>), <span class="kw">starts_with</span>(<span class="st">&#39;F&#39;</span>) )</span></code></pre></div>
<pre><code>## # A tibble: 5 x 3
##   Exam1 Exam2 Final
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1    93    98    96
## 2    80    82    81
## 3    89    70    85
## 4    70    85    92
## 5    95    92   100</code></pre>
<p>The <code>dplyr::select</code> function is quite handy, but there are several other packages out there that have a <code>select</code> function and we can get into trouble with loading other packages with the same function names. If I encounter the <code>select</code> function behaving in a weird manner or complaining about an input argument, my first remedy is to be explicit about it is the <code>dplyr::select()</code> function by appending the package name at the start.</p>
</div>
<div id="filter" class="section level4" number="4.1.3.2">
<h4><span class="header-section-number">4.1.3.2</span> <code>filter()</code></h4>
<p>It is common to want to select particular rows where we have some logical expression to pick the rows.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="data-wrangling.html#cb126-1" aria-hidden="true"></a><span class="co"># select students with Final grades greater than 90</span></span>
<span id="cb126-2"><a href="data-wrangling.html#cb126-2" aria-hidden="true"></a>grades <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Final <span class="op">&gt;</span><span class="st"> </span><span class="dv">90</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##   l.name Gender Exam1 Exam2 Final
##   &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Cox    M         93    98    96
## 2 Turk   M         70    85    92
## 3 Reid   F         95    92   100</code></pre>
<p>You can have multiple logical expressions to select rows and they will be logically combined so that only rows that satisfy all of the conditions are selected. The logicals are joined together using <code>&amp;</code> (and) operator or the <code>|</code> (or) operator and you may explicitly use other logicals. For example a factor column type might be used to select rows where type is either one or two via the following: <code>type==1 | type==2</code>.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="data-wrangling.html#cb128-1" aria-hidden="true"></a><span class="co"># select students with Final grades above 90 and</span></span>
<span id="cb128-2"><a href="data-wrangling.html#cb128-2" aria-hidden="true"></a><span class="co"># average score also above 90</span></span>
<span id="cb128-3"><a href="data-wrangling.html#cb128-3" aria-hidden="true"></a>grades <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Exam2 <span class="op">&gt;</span><span class="st"> </span><span class="dv">90</span>, Final <span class="op">&gt;</span><span class="st"> </span><span class="dv">90</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 5
##   l.name Gender Exam1 Exam2 Final
##   &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Cox    M         93    98    96
## 2 Reid   F         95    92   100</code></pre>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="data-wrangling.html#cb130-1" aria-hidden="true"></a><span class="co"># we could also use an &quot;and&quot; condition</span></span>
<span id="cb130-2"><a href="data-wrangling.html#cb130-2" aria-hidden="true"></a>grades <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">filter</span>(Exam2 <span class="op">&gt;</span><span class="st"> </span><span class="dv">90</span> <span class="op">&amp;</span><span class="st"> </span>Final <span class="op">&gt;</span><span class="st"> </span><span class="dv">90</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 5
##   l.name Gender Exam1 Exam2 Final
##   &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Cox    M         93    98    96
## 2 Reid   F         95    92   100</code></pre>
</div>
<div id="slice" class="section level4" number="4.1.3.3">
<h4><span class="header-section-number">4.1.3.3</span> <code>slice()</code></h4>
<p>When you want to filter rows based on row number, this is called slicing.</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="data-wrangling.html#cb132-1" aria-hidden="true"></a><span class="co"># grab the first 2 rows</span></span>
<span id="cb132-2"><a href="data-wrangling.html#cb132-2" aria-hidden="true"></a>grades <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">slice</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 5
##   l.name Gender Exam1 Exam2 Final
##   &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Cox    M         93    98    96
## 2 Kelso  M         80    82    81</code></pre>
</div>
</div>
<div id="arrange" class="section level3" number="4.1.4">
<h3><span class="header-section-number">4.1.4</span> <code>arrange()</code></h3>
<p>We often need to re-order the rows of a data frame. For example, we might wish to take our grade book and sort the rows by the average score, or perhaps alphabetically. The <code>arrange()</code> function does exactly that. The first argument is the data frame to re-order, and the subsequent arguments are the columns to sort on. The order of the sorting column determines the precedent the first sorting column is first used and the second sorting column is only used to break ties.</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="data-wrangling.html#cb134-1" aria-hidden="true"></a>grades <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(l.name)</span></code></pre></div>
<pre><code>## # A tibble: 5 x 5
##   l.name Gender Exam1 Exam2 Final
##   &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Cox    M         93    98    96
## 2 Dorian M         89    70    85
## 3 Kelso  M         80    82    81
## 4 Reid   F         95    92   100
## 5 Turk   M         70    85    92</code></pre>
<p>The default sorting is in ascending order, so to sort the grades with the highest scoring person in the first row, we must tell arrange to do it in descending order using <code>desc(column.name)</code>.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="data-wrangling.html#cb136-1" aria-hidden="true"></a>grades <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(<span class="kw">desc</span>(Final))</span></code></pre></div>
<pre><code>## # A tibble: 5 x 5
##   l.name Gender Exam1 Exam2 Final
##   &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Reid   F         95    92   100
## 2 Cox    M         93    98    96
## 3 Turk   M         70    85    92
## 4 Dorian M         89    70    85
## 5 Kelso  M         80    82    81</code></pre>
<p>We can also order a data frame by multiple columns.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="data-wrangling.html#cb138-1" aria-hidden="true"></a><span class="co"># Arrange by Gender first, then within each gender, order by Exam2</span></span>
<span id="cb138-2"><a href="data-wrangling.html#cb138-2" aria-hidden="true"></a>grades <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">arrange</span>(Gender, <span class="kw">desc</span>(Exam2))  </span></code></pre></div>
<pre><code>## # A tibble: 5 x 5
##   l.name Gender Exam1 Exam2 Final
##   &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Reid   F         95    92   100
## 2 Cox    M         93    98    96
## 3 Turk   M         70    85    92
## 4 Kelso  M         80    82    81
## 5 Dorian M         89    70    85</code></pre>
</div>
<div id="mutate" class="section level3" number="4.1.5">
<h3><span class="header-section-number">4.1.5</span> mutate()</h3>
<p>The mutate command either creates a <em>new</em> column in the data frame or <em>updates</em> an already existing column.</p>
<p>I often need to create a new column that is some function of the old columns. In the <code>dplyr</code> package, this is a <code>mutate</code> command. To do ths, we give a <code>mutate( NewColumn = Function of Old Columns )</code> command. You can do multiple calculations within the same <code>mutate()</code> command, and you can even refer to columns that were created in the same <code>mutate()</code> command.</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="data-wrangling.html#cb140-1" aria-hidden="true"></a>grades &lt;-<span class="st"> </span>grades <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>( </span>
<span id="cb140-2"><a href="data-wrangling.html#cb140-2" aria-hidden="true"></a>  <span class="dt">average =</span> (Exam1 <span class="op">+</span><span class="st"> </span>Exam2 <span class="op">+</span><span class="st"> </span>Final)<span class="op">/</span><span class="dv">3</span>,</span>
<span id="cb140-3"><a href="data-wrangling.html#cb140-3" aria-hidden="true"></a>  <span class="dt">grade =</span> <span class="kw">cut</span>(average, <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">60</span>, <span class="dv">70</span>, <span class="dv">80</span>, <span class="dv">90</span>, <span class="dv">100</span>),  <span class="co"># cut takes numeric variable</span></span>
<span id="cb140-4"><a href="data-wrangling.html#cb140-4" aria-hidden="true"></a>                       <span class="kw">c</span>( <span class="st">&#39;F&#39;</span>,<span class="st">&#39;D&#39;</span>,<span class="st">&#39;C&#39;</span>,<span class="st">&#39;B&#39;</span>,<span class="st">&#39;A&#39;</span>)) )  <span class="co"># and makes a factor</span></span>
<span id="cb140-5"><a href="data-wrangling.html#cb140-5" aria-hidden="true"></a>grades</span></code></pre></div>
<pre><code>## # A tibble: 5 x 7
##   l.name Gender Exam1 Exam2 Final average grade
##   &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;fct&gt;
## 1 Cox    M         93    98    96    95.7 A    
## 2 Kelso  M         80    82    81    81   B    
## 3 Dorian M         89    70    85    81.3 B    
## 4 Turk   M         70    85    92    82.3 B    
## 5 Reid   F         95    92   100    95.7 A</code></pre>
<p>If we want to update some column information we will also use the <code>mutate</code> command, but we need some mechanism to select the rows to change, while keeping all the other row values the same. The functions <code>if_else()</code> and <code>case_when()</code> are ideal for this task.</p>
<p>The <code>if_else</code> syntax is <code>if_else( logical.expression, TrueValue, FalseValue )</code>. We can use this to update a score in our gradebook.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="data-wrangling.html#cb142-1" aria-hidden="true"></a><span class="co"># Update Doctor Reids Final Exam score to be a 98, leave everybody else&#39;s the same.</span></span>
<span id="cb142-2"><a href="data-wrangling.html#cb142-2" aria-hidden="true"></a>grades &lt;-<span class="st"> </span>grades <span class="op">%&gt;%</span></span>
<span id="cb142-3"><a href="data-wrangling.html#cb142-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>( <span class="dt">Final =</span> <span class="kw">if_else</span>(l.name <span class="op">==</span><span class="st"> &#39;Reid&#39;</span>, <span class="dv">98</span>, Final ) )</span>
<span id="cb142-4"><a href="data-wrangling.html#cb142-4" aria-hidden="true"></a>grades</span></code></pre></div>
<pre><code>## # A tibble: 5 x 7
##   l.name Gender Exam1 Exam2 Final average grade
##   &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;fct&gt;
## 1 Cox    M         93    98    96    95.7 A    
## 2 Kelso  M         80    82    81    81   B    
## 3 Dorian M         89    70    85    81.3 B    
## 4 Turk   M         70    85    92    82.3 B    
## 5 Reid   F         95    92    98    95.7 A</code></pre>
<p>We could also use this to modify all the rows. For example, perhaps we want to change the <code>gender</code> column information to have levels <code>Male</code> and <code>Female</code>.</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="data-wrangling.html#cb144-1" aria-hidden="true"></a><span class="co"># Update the Gender column labels</span></span>
<span id="cb144-2"><a href="data-wrangling.html#cb144-2" aria-hidden="true"></a>grades &lt;-<span class="st"> </span>grades <span class="op">%&gt;%</span></span>
<span id="cb144-3"><a href="data-wrangling.html#cb144-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>( <span class="dt">Gender =</span> <span class="kw">if_else</span>(Gender <span class="op">==</span><span class="st"> &#39;M&#39;</span>, <span class="st">&#39;Male&#39;</span>, <span class="st">&#39;Female&#39;</span> ) )</span>
<span id="cb144-4"><a href="data-wrangling.html#cb144-4" aria-hidden="true"></a>grades</span></code></pre></div>
<pre><code>## # A tibble: 5 x 7
##   l.name Gender Exam1 Exam2 Final average grade
##   &lt;chr&gt;  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;fct&gt;
## 1 Cox    Male      93    98    96    95.7 A    
## 2 Kelso  Male      80    82    81    81   B    
## 3 Dorian Male      89    70    85    81.3 B    
## 4 Turk   Male      70    85    92    82.3 B    
## 5 Reid   Female    95    92    98    95.7 A</code></pre>
<p>To do something similar for the case where we have 3 or more categories, we could use the <code>ifelse()</code> command repeatedly to address each category level separately. However because the <code>ifelse</code> command is limited to just two cases, it would be nice if there was a generalization to multiple categories. The <code>dplyr::case_when</code> function is that generalization. The syntax is <code>case_when( logicalExpression1~Value1, logicalExpression2~Value2, ... )</code>. We can have as many <code>LogicalExpression ~ Value</code> pairs as we want.</p>
<p>Consider the following data frame that has name, gender, and political party affiliation of six individuals. In this example, weve coded male/female as 1/0 and political party as 1,2,3 for democratic, republican, and independent.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="data-wrangling.html#cb146-1" aria-hidden="true"></a>people &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb146-2"><a href="data-wrangling.html#cb146-2" aria-hidden="true"></a>  <span class="dt">name =</span> <span class="kw">c</span>(<span class="st">&#39;Barack&#39;</span>,<span class="st">&#39;Michelle&#39;</span>, <span class="st">&#39;George&#39;</span>, <span class="st">&#39;Laura&#39;</span>, <span class="st">&#39;Bernie&#39;</span>, <span class="st">&#39;Deborah&#39;</span>),</span>
<span id="cb146-3"><a href="data-wrangling.html#cb146-3" aria-hidden="true"></a>  <span class="dt">gender =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>),</span>
<span id="cb146-4"><a href="data-wrangling.html#cb146-4" aria-hidden="true"></a>  <span class="dt">party =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">3</span>)</span>
<span id="cb146-5"><a href="data-wrangling.html#cb146-5" aria-hidden="true"></a>)</span>
<span id="cb146-6"><a href="data-wrangling.html#cb146-6" aria-hidden="true"></a>people</span></code></pre></div>
<pre><code>##       name gender party
## 1   Barack      1     1
## 2 Michelle      0     1
## 3   George      1     2
## 4    Laura      0     2
## 5   Bernie      1     3
## 6  Deborah      0     3</code></pre>
<p>Now well update the gender and party columns to code these columns in a readable fashion.</p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="data-wrangling.html#cb148-1" aria-hidden="true"></a>people &lt;-<span class="st"> </span>people <span class="op">%&gt;%</span></span>
<span id="cb148-2"><a href="data-wrangling.html#cb148-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>( <span class="dt">gender =</span> <span class="kw">if_else</span>( gender <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="st">&#39;Female&#39;</span>, <span class="st">&#39;Male&#39;</span>) ) <span class="op">%&gt;%</span></span>
<span id="cb148-3"><a href="data-wrangling.html#cb148-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>( <span class="dt">party =</span> <span class="kw">case_when</span>( party <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">~</span><span class="st"> &#39;Democratic&#39;</span>, </span>
<span id="cb148-4"><a href="data-wrangling.html#cb148-4" aria-hidden="true"></a>                             party <span class="op">==</span><span class="st"> </span><span class="dv">2</span> <span class="op">~</span><span class="st"> &#39;Republican&#39;</span>, </span>
<span id="cb148-5"><a href="data-wrangling.html#cb148-5" aria-hidden="true"></a>                             party <span class="op">==</span><span class="st"> </span><span class="dv">3</span> <span class="op">~</span><span class="st"> &#39;Independent&#39;</span>,</span>
<span id="cb148-6"><a href="data-wrangling.html#cb148-6" aria-hidden="true"></a>                             <span class="ot">TRUE</span>       <span class="op">~</span><span class="st"> &#39;None Stated&#39;</span> ) )</span>
<span id="cb148-7"><a href="data-wrangling.html#cb148-7" aria-hidden="true"></a>people</span></code></pre></div>
<pre><code>##       name gender       party
## 1   Barack   Male  Democratic
## 2 Michelle Female  Democratic
## 3   George   Male  Republican
## 4    Laura Female  Republican
## 5   Bernie   Male Independent
## 6  Deborah Female Independent</code></pre>
<p>Often the last case is a catch all case where the logical expression will ALWAYS evaluate to TRUE and this is the value for all other input.</p>
<p>As another alternative to the problem of recoding factor levels, we could use the command <code>forcats::fct_recode()</code> function. See the Factors chapter in this book for more information about factors.</p>
</div>
<div id="summarise" class="section level3" number="4.1.6">
<h3><span class="header-section-number">4.1.6</span> summarise()</h3>
<p>By itself, this function is quite boring, but will become useful later on. Its purpose is to calculate summary statistics using any or all of the data columns. Notice that we get to chose the name of the new column. The way to think about this is that we are collapsing information stored in multiple rows into a single row of values.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="data-wrangling.html#cb150-1" aria-hidden="true"></a><span class="co"># calculate the mean of exam 1</span></span>
<span id="cb150-2"><a href="data-wrangling.html#cb150-2" aria-hidden="true"></a>grades <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>( <span class="dt">mean.E1=</span><span class="kw">mean</span>(Exam1) )</span></code></pre></div>
<pre><code>## # A tibble: 1 x 1
##   mean.E1
##     &lt;dbl&gt;
## 1    85.4</code></pre>
<p>We could calculate multiple summary statistics if we like.</p>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="data-wrangling.html#cb152-1" aria-hidden="true"></a><span class="co"># calculate the mean and standard deviation </span></span>
<span id="cb152-2"><a href="data-wrangling.html#cb152-2" aria-hidden="true"></a>grades <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">summarise</span>( <span class="dt">mean.E1=</span><span class="kw">mean</span>(Exam1), <span class="dt">stddev.E1=</span><span class="kw">sd</span>(Exam1) )</span></code></pre></div>
<pre><code>## # A tibble: 1 x 2
##   mean.E1 stddev.E1
##     &lt;dbl&gt;     &lt;dbl&gt;
## 1    85.4      10.4</code></pre>
</div>
</div>
<div id="split-apply-combine" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Split, apply, combine</h2>
<p>Aside from unifying the syntax behind the common operations, the major strength of the <code>dplyr</code> package is the ability to split a data frame into a bunch of sub-data frames, apply a sequence of one or more of the operations we just described, and then combine results back together. Well consider data from an experiment from spinning wool into yarn. This experiment considered two different types of wool (A or B) and three different levels of tension on the thread. The response variable is the number of breaks in the resulting yarn. For each of the 6 <code>wool:tension</code> combinations, there are 9 replicated observations per <code>wool:tension</code> level.</p>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="data-wrangling.html#cb154-1" aria-hidden="true"></a><span class="kw">data</span>(warpbreaks)</span>
<span id="cb154-2"><a href="data-wrangling.html#cb154-2" aria-hidden="true"></a><span class="kw">str</span>(warpbreaks)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    54 obs. of  3 variables:
##  $ breaks : num  26 30 54 25 70 52 51 26 67 18 ...
##  $ wool   : Factor w/ 2 levels &quot;A&quot;,&quot;B&quot;: 1 1 1 1 1 1 1 1 1 1 ...
##  $ tension: Factor w/ 3 levels &quot;L&quot;,&quot;M&quot;,&quot;H&quot;: 1 1 1 1 1 1 1 1 1 2 ...</code></pre>
<p><img src="04_Intro_to_Data_Wrangling_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>The first we must do is to create a data frame with additional information about how to break the data into sub-data frames. In this case, I want to break the data up into the 6 wool-by-tension combinations. Initially we will just figure out how many rows are in each wool-by-tension combination.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="data-wrangling.html#cb156-1" aria-hidden="true"></a><span class="co"># group_by:  what variable(s) shall we group on.</span></span>
<span id="cb156-2"><a href="data-wrangling.html#cb156-2" aria-hidden="true"></a><span class="co"># n() is a function that returns how many rows are in the </span></span>
<span id="cb156-3"><a href="data-wrangling.html#cb156-3" aria-hidden="true"></a><span class="co">#   currently selected sub-dataframe</span></span>
<span id="cb156-4"><a href="data-wrangling.html#cb156-4" aria-hidden="true"></a>warpbreaks <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb156-5"><a href="data-wrangling.html#cb156-5" aria-hidden="true"></a><span class="st">  </span><span class="kw">group_by</span>( wool, tension) <span class="op">%&gt;%</span><span class="st">    </span><span class="co"># grouping</span></span>
<span id="cb156-6"><a href="data-wrangling.html#cb156-6" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">n =</span> <span class="kw">n</span>() )             <span class="co"># how many in each group</span></span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
## # Groups:   wool [2]
##   wool  tension     n
##   &lt;fct&gt; &lt;fct&gt;   &lt;int&gt;
## 1 A     L           9
## 2 A     M           9
## 3 A     H           9
## 4 B     L           9
## 5 B     M           9
## 6 B     H           9</code></pre>
<p>The <code>group_by</code> function takes a data.frame and returns the same data.frame, but with some extra information so that any subsequent function acts on each unique combination defined in the <code>group_by</code>. If you wish to remove this behavior, use <code>group_by()</code> to reset the grouping to have no grouping variable.</p>
<p>Using the same <code>summarise</code> function, we could calculate the group mean and standard deviation for each wool-by-tension group.</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="data-wrangling.html#cb158-1" aria-hidden="true"></a>summary_table &lt;-<span class="st"> </span></span>
<span id="cb158-2"><a href="data-wrangling.html#cb158-2" aria-hidden="true"></a><span class="st">  </span>warpbreaks <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb158-3"><a href="data-wrangling.html#cb158-3" aria-hidden="true"></a><span class="st">  </span><span class="kw">group_by</span>(wool, tension) <span class="op">%&gt;%</span></span>
<span id="cb158-4"><a href="data-wrangling.html#cb158-4" aria-hidden="true"></a><span class="st">  </span><span class="kw">summarise</span>( <span class="dt">n           =</span> <span class="kw">n</span>() ,             <span class="co"># I added some formatting to show the</span></span>
<span id="cb158-5"><a href="data-wrangling.html#cb158-5" aria-hidden="true"></a>             <span class="dt">mean.breaks =</span> <span class="kw">mean</span>(breaks),     <span class="co"># reader I am calculating several</span></span>
<span id="cb158-6"><a href="data-wrangling.html#cb158-6" aria-hidden="true"></a>             <span class="dt">sd.breaks   =</span> <span class="kw">sd</span>(breaks) )      <span class="co"># statistics.</span></span></code></pre></div>
<p>If instead of summarizing each split, we might want to just do some calculation and the output should have the same number of rows as the input data frame. In this case Ill tell <code>dplyr</code> that we are mutating the data frame instead of summarizing it. For example, suppose that I want to calculate the residual value <span class="math display">\[e_{ijk}=y_{ijk}-\bar{y}_{ij\cdot}\]</span> where <span class="math inline">\(\bar{y}_{ij\cdot}\)</span> is the mean of each <code>wool:tension</code> combination.</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="data-wrangling.html#cb159-1" aria-hidden="true"></a>warpbreaks <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb159-2"><a href="data-wrangling.html#cb159-2" aria-hidden="true"></a><span class="st">   </span><span class="kw">group_by</span>(wool, tension) <span class="op">%&gt;%</span><span class="st">                 </span><span class="co"># group by wool:tension</span></span>
<span id="cb159-3"><a href="data-wrangling.html#cb159-3" aria-hidden="true"></a><span class="st">   </span><span class="kw">mutate</span>(<span class="dt">resid =</span> breaks <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(breaks)) <span class="op">%&gt;%</span><span class="st">   </span><span class="co"># mean(breaks) of the group!</span></span>
<span id="cb159-4"><a href="data-wrangling.html#cb159-4" aria-hidden="true"></a><span class="st">   </span><span class="kw">head</span>(  )                                    <span class="co"># show the first couple of rows</span></span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
## # Groups:   wool, tension [1]
##   breaks wool  tension  resid
##    &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;    &lt;dbl&gt;
## 1     26 A     L       -18.6 
## 2     30 A     L       -14.6 
## 3     54 A     L         9.44
## 4     25 A     L       -19.6 
## 5     70 A     L        25.4 
## 6     52 A     L         7.44</code></pre>
</div>
<div id="Exercises_IntroDataWrangling" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li>The dataset <code>ChickWeight</code> tracks the weights of 48 baby chickens (chicks) feed four different diets. <em>Feel free to complete all parts of the exercise in a single R pipeline at the end of the problem.</em>
<ol style="list-style-type: lower-alpha">
<li><p>Load the dataset using</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="data-wrangling.html#cb161-1" aria-hidden="true"></a><span class="kw">data</span>(ChickWeight)</span></code></pre></div></li>
<li><p>Look at the help files for the description of the columns.</p></li>
</ol>
<ol start="3" style="list-style-type: lower-alpha">
<li>Remove all the observations except for observations from day 10 or day 20. The tough part in this instruction is distinguishing between and and or. Obviously there are no observations that occur from both day 10 AND day 20. Google R logical operators to get an introduction to those.</li>
<li>Calculate the mean and standard deviation of the chick weights for each diet group on days 10 and 20.</li>
</ol></li>
<li>The OpenIntro textbook on statistics includes a data set on body dimensions. Instead of creating an R chunk for each step of this problem, create a single R pipeline that performs each of the following tasks. Y
<ol style="list-style-type: lower-alpha">
<li><p>Load the file using</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="data-wrangling.html#cb162-1" aria-hidden="true"></a>Body &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;http://www.openintro.org/stat/data/bdims.csv&#39;</span>)</span></code></pre></div></li>
<li><p>The column sex is coded as a 1 if the individual is male and 0 if female. This is a non-intuitive labeling system. Create a new column <code>sex.MF</code> that uses labels Male and Female. _Hint: the ifelse() command will be very convenient here. The ifelse() command in R functions similarly to the same command in Excel. Feel free to complete all parts of the exercise in a single R pipeline at the end of the problem.*_</p></li>
<li><p>The columns <code>wgt</code> and <code>hgt</code> measure weight and height in kilograms and centimeters (respectively). Use these to calculate the Body Mass Index (BMI) for each individual where
<span class="math display">\[BMI=\frac{Weight\,(kg)}{\left[Height\,(m)\right]^{2}}\]</span></p></li>
<li><p>Double check that your calculated BMI column is correct by examining the summary statistics of the column (e.g.<code>summary(Body)</code>). BMI values should be between 18 to 40 or so. Did you make an error in your calculation?<br />
</p></li>
<li><p>The function <code>cut</code> takes a vector of continuous numerical data and creates a factor based on your give cut-points.</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="data-wrangling.html#cb163-1" aria-hidden="true"></a><span class="co"># Define a continuous vector to convert to a factor</span></span>
<span id="cb163-2"><a href="data-wrangling.html#cb163-2" aria-hidden="true"></a>x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></span>
<span id="cb163-3"><a href="data-wrangling.html#cb163-3" aria-hidden="true"></a></span>
<span id="cb163-4"><a href="data-wrangling.html#cb163-4" aria-hidden="true"></a><span class="co"># divide range of x into three groups of equal length</span></span>
<span id="cb163-5"><a href="data-wrangling.html#cb163-5" aria-hidden="true"></a><span class="kw">cut</span>(x, <span class="dt">breaks=</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>##  [1] (0.991,4] (0.991,4] (0.991,4] (0.991,4] (4,7]     (4,7]     (4,7]    
##  [8] (7,10]    (7,10]    (7,10]   
## Levels: (0.991,4] (4,7] (7,10]</code></pre>
<div class="sourceCode" id="cb165"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="data-wrangling.html#cb165-1" aria-hidden="true"></a><span class="co"># divide x into four groups, where I specify all 5 break points </span></span>
<span id="cb165-2"><a href="data-wrangling.html#cb165-2" aria-hidden="true"></a><span class="kw">cut</span>(x, <span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="fl">2.5</span>, <span class="fl">5.0</span>, <span class="fl">7.5</span>, <span class="dv">10</span>))</span></code></pre></div>
<pre><code>##  [1] (0,2.5]  (0,2.5]  (2.5,5]  (2.5,5]  (2.5,5]  (5,7.5]  (5,7.5]  (7.5,10]
##  [9] (7.5,10] (7.5,10]
## Levels: (0,2.5] (2.5,5] (5,7.5] (7.5,10]</code></pre>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="data-wrangling.html#cb167-1" aria-hidden="true"></a><span class="co"># (0,2.5] (2.5,5] means 2.5 is included in first group</span></span>
<span id="cb167-2"><a href="data-wrangling.html#cb167-2" aria-hidden="true"></a><span class="co"># right=FALSE changes this to make 2.5 included in the second  </span></span>
<span id="cb167-3"><a href="data-wrangling.html#cb167-3" aria-hidden="true"></a></span>
<span id="cb167-4"><a href="data-wrangling.html#cb167-4" aria-hidden="true"></a><span class="co"># divide x into 3 groups, but give them a nicer</span></span>
<span id="cb167-5"><a href="data-wrangling.html#cb167-5" aria-hidden="true"></a><span class="co"># set of group names</span></span>
<span id="cb167-6"><a href="data-wrangling.html#cb167-6" aria-hidden="true"></a><span class="kw">cut</span>(x, <span class="dt">breaks=</span><span class="dv">3</span>, <span class="dt">labels=</span><span class="kw">c</span>(<span class="st">&#39;Low&#39;</span>,<span class="st">&#39;Medium&#39;</span>,<span class="st">&#39;High&#39;</span>))</span></code></pre></div>
<pre><code>##  [1] Low    Low    Low    Low    Medium Medium Medium High   High   High  
## Levels: Low Medium High</code></pre>
<p>Create a new column of in the data frame that divides the age into decades (10-19, 20-29, 30-39, etc). Notice the oldest person in the study is 67.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="data-wrangling.html#cb169-1" aria-hidden="true"></a>Body &lt;-<span class="st"> </span>Body <span class="op">%&gt;%</span></span>
<span id="cb169-2"><a href="data-wrangling.html#cb169-2" aria-hidden="true"></a><span class="st">  </span><span class="kw">mutate</span>( <span class="dt">Age.Grp =</span> <span class="kw">cut</span>(age,</span>
<span id="cb169-3"><a href="data-wrangling.html#cb169-3" aria-hidden="true"></a>                        <span class="dt">breaks=</span><span class="kw">c</span>(<span class="dv">10</span>,<span class="dv">20</span>,<span class="dv">30</span>,<span class="dv">40</span>,<span class="dv">50</span>,<span class="dv">60</span>,<span class="dv">70</span>),</span>
<span id="cb169-4"><a href="data-wrangling.html#cb169-4" aria-hidden="true"></a>                        <span class="dt">right=</span><span class="ot">FALSE</span>))</span></code></pre></div></li>
<li><p>Find the average BMI for each <code>Sex</code> by <code>Age.Grp</code> combination.</p></li>
</ol></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="graphing.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="statistical-models.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"],
"google": false,
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/dereksonderegger/444/blob/master/04_Intro_to_Data_Wrangling.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/dereksonderegger/444/raw/master/04_Intro_to_Data_Wrangling.Rmd",
"text": null
},
"download": [["Introduction_to_DataScience_with_R.pdf", "PDF"]],
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
