<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 15 R Packages | STA 444/5 - Introductory Data Science using R</title>
  <meta name="description" content="Chapter 15 R Packages | STA 444/5 - Introductory Data Science using R" />
  <meta name="generator" content="bookdown 0.18 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 15 R Packages | STA 444/5 - Introductory Data Science using R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/Cover1.png" />
  
  <meta name="github-repo" content="dereksonderegger/444" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 15 R Packages | STA 444/5 - Introductory Data Science using R" />
  
  
  <meta name="twitter:image" content="images/Cover1.png" />

<meta name="author" content="Derek L. Sonderegger" />


<meta name="date" content="2020-04-21" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="14-graphing-part-ii.html"/>
<link rel="next" href="16-data-scraping.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other Resources</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="part"><span><b>Introduction</b></span></li>
<li class="chapter" data-level="1" data-path="1-familiarization.html"><a href="1-familiarization.html"><i class="fa fa-check"></i><b>1</b> Familiarization</a><ul>
<li class="chapter" data-level="1.1" data-path="1-familiarization.html"><a href="1-familiarization.html#working-within-an-rmarkdown-file"><i class="fa fa-check"></i><b>1.1</b> Working within an Rmarkdown File</a></li>
<li class="chapter" data-level="1.2" data-path="1-familiarization.html"><a href="1-familiarization.html#r-file-types"><i class="fa fa-check"></i><b>1.2</b> R file Types</a><ul>
<li class="chapter" data-level="1.2.1" data-path="1-familiarization.html"><a href="1-familiarization.html#r-scripts-.r-files"><i class="fa fa-check"></i><b>1.2.1</b> R Scripts (.R files)</a></li>
<li class="chapter" data-level="1.2.2" data-path="1-familiarization.html"><a href="1-familiarization.html#r-markdown-.rmd-files"><i class="fa fa-check"></i><b>1.2.2</b> R Markdown (.Rmd files)</a></li>
<li class="chapter" data-level="1.2.3" data-path="1-familiarization.html"><a href="1-familiarization.html#r-notebooks-.rmd-files"><i class="fa fa-check"></i><b>1.2.3</b> R Notebooks (.Rmd files)</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="1-familiarization.html"><a href="1-familiarization.html#r-as-a-simple-calculator"><i class="fa fa-check"></i><b>1.3</b> R as a simple calculator</a></li>
<li class="chapter" data-level="1.4" data-path="1-familiarization.html"><a href="1-familiarization.html#assignment"><i class="fa fa-check"></i><b>1.4</b> Assignment</a></li>
<li class="chapter" data-level="1.5" data-path="1-familiarization.html"><a href="1-familiarization.html#vectors"><i class="fa fa-check"></i><b>1.5</b> Vectors</a></li>
<li class="chapter" data-level="1.6" data-path="1-familiarization.html"><a href="1-familiarization.html#packages"><i class="fa fa-check"></i><b>1.6</b> Packages</a></li>
<li class="chapter" data-level="1.7" data-path="1-familiarization.html"><a href="1-familiarization.html#finding-help"><i class="fa fa-check"></i><b>1.7</b> Finding Help</a><ul>
<li class="chapter" data-level="1.7.1" data-path="1-familiarization.html"><a href="1-familiarization.html#how-does-this-function-work"><i class="fa fa-check"></i><b>1.7.1</b> How does this function work?</a></li>
<li class="chapter" data-level="1.7.2" data-path="1-familiarization.html"><a href="1-familiarization.html#how-does-this-package-work"><i class="fa fa-check"></i><b>1.7.2</b> How does this package work?</a></li>
<li class="chapter" data-level="1.7.3" data-path="1-familiarization.html"><a href="1-familiarization.html#how-do-i-do-xxx"><i class="fa fa-check"></i><b>1.7.3</b> How do I do XXX?</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="1-familiarization.html"><a href="1-familiarization.html#exercises"><i class="fa fa-check"></i><b>1.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-data-frames.html"><a href="2-data-frames.html"><i class="fa fa-check"></i><b>2</b> Data Frames</a><ul>
<li class="chapter" data-level="2.1" data-path="2-data-frames.html"><a href="2-data-frames.html#introduction-to-importing-data"><i class="fa fa-check"></i><b>2.1</b> Introduction to Importing Data</a><ul>
<li class="chapter" data-level="2.1.1" data-path="2-data-frames.html"><a href="2-data-frames.html#from-a-package"><i class="fa fa-check"></i><b>2.1.1</b> From a Package</a></li>
<li class="chapter" data-level="2.1.2" data-path="2-data-frames.html"><a href="2-data-frames.html#import-from-.csv-or-.xls-files"><i class="fa fa-check"></i><b>2.1.2</b> Import from <code>.csv</code> or <code>.xls</code> files</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="2-data-frames.html"><a href="2-data-frames.html#data-types"><i class="fa fa-check"></i><b>2.2</b> Data Types</a></li>
<li class="chapter" data-level="2.3" data-path="2-data-frames.html"><a href="2-data-frames.html#basic-manipulation"><i class="fa fa-check"></i><b>2.3</b> Basic Manipulation</a></li>
<li class="chapter" data-level="2.4" data-path="2-data-frames.html"><a href="2-data-frames.html#exercises-1"><i class="fa fa-check"></i><b>2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-graphing.html"><a href="3-graphing.html"><i class="fa fa-check"></i><b>3</b> Graphing</a><ul>
<li class="chapter" data-level="3.1" data-path="3-graphing.html"><a href="3-graphing.html#basic-graphs"><i class="fa fa-check"></i><b>3.1</b> Basic Graphs</a><ul>
<li class="chapter" data-level="3.1.1" data-path="3-graphing.html"><a href="3-graphing.html#scatterplots"><i class="fa fa-check"></i><b>3.1.1</b> Scatterplots</a></li>
<li class="chapter" data-level="3.1.2" data-path="3-graphing.html"><a href="3-graphing.html#box-plots"><i class="fa fa-check"></i><b>3.1.2</b> Box Plots</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="3-graphing.html"><a href="3-graphing.html#faceting"><i class="fa fa-check"></i><b>3.2</b> Faceting</a></li>
<li class="chapter" data-level="3.3" data-path="3-graphing.html"><a href="3-graphing.html#annotation"><i class="fa fa-check"></i><b>3.3</b> Annotation</a><ul>
<li class="chapter" data-level="3.3.1" data-path="3-graphing.html"><a href="3-graphing.html#axis-labels-and-titles"><i class="fa fa-check"></i><b>3.3.1</b> Axis Labels and Titles</a></li>
<li class="chapter" data-level="3.3.2" data-path="3-graphing.html"><a href="3-graphing.html#text-labels"><i class="fa fa-check"></i><b>3.3.2</b> Text Labels</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="3-graphing.html"><a href="3-graphing.html#exercises-2"><i class="fa fa-check"></i><b>3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-data-wrangling.html"><a href="4-data-wrangling.html"><i class="fa fa-check"></i><b>4</b> Data Wrangling</a><ul>
<li class="chapter" data-level="4.1" data-path="4-data-wrangling.html"><a href="4-data-wrangling.html#verbs"><i class="fa fa-check"></i><b>4.1</b> Verbs</a><ul>
<li class="chapter" data-level="4.1.1" data-path="4-data-wrangling.html"><a href="4-data-wrangling.html#add_row"><i class="fa fa-check"></i><b>4.1.1</b> <code>add_row</code></a></li>
<li class="chapter" data-level="4.1.2" data-path="4-data-wrangling.html"><a href="4-data-wrangling.html#subsetting"><i class="fa fa-check"></i><b>4.1.2</b> Subsetting</a></li>
<li class="chapter" data-level="4.1.3" data-path="4-data-wrangling.html"><a href="4-data-wrangling.html#arrange"><i class="fa fa-check"></i><b>4.1.3</b> <code>arrange()</code></a></li>
<li class="chapter" data-level="4.1.4" data-path="4-data-wrangling.html"><a href="4-data-wrangling.html#mutate"><i class="fa fa-check"></i><b>4.1.4</b> mutate()</a></li>
<li class="chapter" data-level="4.1.5" data-path="4-data-wrangling.html"><a href="4-data-wrangling.html#summarise"><i class="fa fa-check"></i><b>4.1.5</b> summarise()</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="4-data-wrangling.html"><a href="4-data-wrangling.html#split-apply-combine"><i class="fa fa-check"></i><b>4.2</b> Split, apply, combine</a></li>
<li class="chapter" data-level="4.3" data-path="4-data-wrangling.html"><a href="4-data-wrangling.html#exercises-3"><i class="fa fa-check"></i><b>4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-statistical-models.html"><a href="5-statistical-models.html"><i class="fa fa-check"></i><b>5</b> Statistical Models</a><ul>
<li class="chapter" data-level="5.1" data-path="5-statistical-models.html"><a href="5-statistical-models.html#formula-notation"><i class="fa fa-check"></i><b>5.1</b> Formula Notation</a></li>
<li class="chapter" data-level="5.2" data-path="5-statistical-models.html"><a href="5-statistical-models.html#basic-models"><i class="fa fa-check"></i><b>5.2</b> Basic Models</a><ul>
<li class="chapter" data-level="5.2.1" data-path="5-statistical-models.html"><a href="5-statistical-models.html#t-tests"><i class="fa fa-check"></i><b>5.2.1</b> t-tests</a></li>
<li class="chapter" data-level="5.2.2" data-path="5-statistical-models.html"><a href="5-statistical-models.html#lm-objects"><i class="fa fa-check"></i><b>5.2.2</b> lm objects</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="5-statistical-models.html"><a href="5-statistical-models.html#accessor-function"><i class="fa fa-check"></i><b>5.3</b> Accessor function</a></li>
<li class="chapter" data-level="5.4" data-path="5-statistical-models.html"><a href="5-statistical-models.html#exercises-4"><i class="fa fa-check"></i><b>5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-flow-control.html"><a href="6-flow-control.html"><i class="fa fa-check"></i><b>6</b> Flow Control</a><ul>
<li class="chapter" data-level="6.1" data-path="6-flow-control.html"><a href="6-flow-control.html#logical-expressions"><i class="fa fa-check"></i><b>6.1</b> Logical Expressions</a></li>
<li class="chapter" data-level="6.2" data-path="6-flow-control.html"><a href="6-flow-control.html#decision-statements"><i class="fa fa-check"></i><b>6.2</b> Decision statements</a><ul>
<li class="chapter" data-level="6.2.1" data-path="6-flow-control.html"><a href="6-flow-control.html#in-dplyr-wrangling"><i class="fa fa-check"></i><b>6.2.1</b> In <code>dplyr</code> wrangling</a></li>
<li class="chapter" data-level="6.2.2" data-path="6-flow-control.html"><a href="6-flow-control.html#general-if-else"><i class="fa fa-check"></i><b>6.2.2</b> General <code>if else</code></a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="6-flow-control.html"><a href="6-flow-control.html#loops"><i class="fa fa-check"></i><b>6.3</b> Loops</a><ul>
<li class="chapter" data-level="6.3.1" data-path="6-flow-control.html"><a href="6-flow-control.html#while-loops"><i class="fa fa-check"></i><b>6.3.1</b> <code>while</code> Loops</a></li>
<li class="chapter" data-level="6.3.2" data-path="6-flow-control.html"><a href="6-flow-control.html#for-loops"><i class="fa fa-check"></i><b>6.3.2</b> <code>for</code> Loops</a></li>
<li class="chapter" data-level="6.3.3" data-path="6-flow-control.html"><a href="6-flow-control.html#mosaicdo-loops"><i class="fa fa-check"></i><b>6.3.3</b> <code>mosaic::do()</code> loops</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="6-flow-control.html"><a href="6-flow-control.html#functions"><i class="fa fa-check"></i><b>6.4</b> Functions</a></li>
<li class="chapter" data-level="6.5" data-path="6-flow-control.html"><a href="6-flow-control.html#exercises-5"><i class="fa fa-check"></i><b>6.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-factors.html"><a href="7-factors.html"><i class="fa fa-check"></i><b>7</b> Factors</a><ul>
<li class="chapter" data-level="7.1" data-path="7-factors.html"><a href="7-factors.html#creation-and-structure"><i class="fa fa-check"></i><b>7.1</b> Creation and Structure</a></li>
<li class="chapter" data-level="7.2" data-path="7-factors.html"><a href="7-factors.html#change-labels"><i class="fa fa-check"></i><b>7.2</b> Change Labels</a></li>
<li class="chapter" data-level="7.3" data-path="7-factors.html"><a href="7-factors.html#reorder-levels-1"><i class="fa fa-check"></i><b>7.3</b> Reorder Levels</a></li>
<li class="chapter" data-level="7.4" data-path="7-factors.html"><a href="7-factors.html#add-or-substract-levels"><i class="fa fa-check"></i><b>7.4</b> Add or substract Levels</a></li>
<li class="chapter" data-level="7.5" data-path="7-factors.html"><a href="7-factors.html#exercises-6"><i class="fa fa-check"></i><b>7.5</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>Miscellaneous</b></span></li>
<li class="chapter" data-level="" data-path="statistical-tables.html"><a href="statistical-tables.html"><i class="fa fa-check"></i>Statistical Tables</a><ul>
<li class="chapter" data-level="" data-path="statistical-tables.html"><a href="statistical-tables.html#example-distributions"><i class="fa fa-check"></i>Example Distributions</a></li>
<li><a href="statistical-tables.html#mosaicplotdist-function"><code>mosaic::plotDist()</code> function</a></li>
<li class="chapter" data-level="" data-path="statistical-tables.html"><a href="statistical-tables.html#base-r-functions"><i class="fa fa-check"></i>Base R functions</a><ul>
<li class="chapter" data-level="" data-path="statistical-tables.html"><a href="statistical-tables.html#d-function"><i class="fa fa-check"></i>d-function</a></li>
<li class="chapter" data-level="" data-path="statistical-tables.html"><a href="statistical-tables.html#p-function"><i class="fa fa-check"></i>p-function</a></li>
<li><a href="statistical-tables.html#q-function"><code>q</code>-function</a></li>
<li class="chapter" data-level="" data-path="statistical-tables.html"><a href="statistical-tables.html#r-function"><i class="fa fa-check"></i>r-function</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="statistical-tables.html"><a href="statistical-tables.html#exercises-7"><i class="fa fa-check"></i>Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html"><i class="fa fa-check"></i>Rmarkdown Tricks</a><ul>
<li class="chapter" data-level="" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#chunk-options"><i class="fa fa-check"></i>Chunk Options</a></li>
<li class="chapter" data-level="" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#verbatim-list-environments"><i class="fa fa-check"></i>Verbatim &amp; List Environments</a></li>
<li class="chapter" data-level="" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#mathematical-expressions"><i class="fa fa-check"></i>Mathematical expressions</a></li>
<li class="chapter" data-level="" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#tables"><i class="fa fa-check"></i>Tables</a><ul>
<li class="chapter" data-level="7.5.1" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#simple-tables"><i class="fa fa-check"></i><b>7.5.1</b> Simple Tables</a></li>
<li class="chapter" data-level="7.5.2" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#grid-tables"><i class="fa fa-check"></i><b>7.5.2</b> Grid Tables</a></li>
<li class="chapter" data-level="7.5.3" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#pipe-tables"><i class="fa fa-check"></i><b>7.5.3</b> Pipe Tables</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#r-functions-to-produce-table-code."><i class="fa fa-check"></i>R functions to produce table code.</a><ul>
<li class="chapter" data-level="7.5.4" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#knitrkable"><i class="fa fa-check"></i><b>7.5.4</b> <code class="unnumbered">knitr::kable</code></a></li>
<li class="chapter" data-level="7.5.5" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#package-pander"><i class="fa fa-check"></i><b>7.5.5</b> Package <code class="unnumbered">pander</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="rmarkdown-tricks.html"><a href="rmarkdown-tricks.html#code-appendix"><i class="fa fa-check"></i>Code Appendix</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="data-wrangling-process.html"><a href="data-wrangling-process.html"><i class="fa fa-check"></i>Data Wrangling Process</a><ul>
<li class="chapter" data-level="7.6" data-path="data-wrangling-process.html"><a href="data-wrangling-process.html#introduction"><i class="fa fa-check"></i><b>7.6</b> Introduction</a></li>
<li class="chapter" data-level="7.7" data-path="data-wrangling-process.html"><a href="data-wrangling-process.html#tidying"><i class="fa fa-check"></i><b>7.7</b> Tidying</a></li>
<li class="chapter" data-level="7.8" data-path="data-wrangling-process.html"><a href="data-wrangling-process.html#cleaning"><i class="fa fa-check"></i><b>7.8</b> Cleaning</a></li>
</ul></li>
<li class="part"><span><b>Deeper Details</b></span></li>
<li class="chapter" data-level="8" data-path="8-data-structures.html"><a href="8-data-structures.html"><i class="fa fa-check"></i><b>8</b> Data Structures</a><ul>
<li class="chapter" data-level="8.1" data-path="8-data-structures.html"><a href="8-data-structures.html#vectors-1"><i class="fa fa-check"></i><b>8.1</b> Vectors</a><ul>
<li class="chapter" data-level="8.1.1" data-path="8-data-structures.html"><a href="8-data-structures.html#accessing-vector-elements"><i class="fa fa-check"></i><b>8.1.1</b> Accessing Vector Elements</a></li>
<li class="chapter" data-level="8.1.2" data-path="8-data-structures.html"><a href="8-data-structures.html#scalar-functions-applied-to-vectors"><i class="fa fa-check"></i><b>8.1.2</b> Scalar Functions Applied to Vectors</a></li>
<li class="chapter" data-level="8.1.3" data-path="8-data-structures.html"><a href="8-data-structures.html#vector-algebra"><i class="fa fa-check"></i><b>8.1.3</b> Vector Algebra</a></li>
<li class="chapter" data-level="8.1.4" data-path="8-data-structures.html"><a href="8-data-structures.html#commonly-used-vector-functions"><i class="fa fa-check"></i><b>8.1.4</b> Commonly Used Vector Functions</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="8-data-structures.html"><a href="8-data-structures.html#matrices"><i class="fa fa-check"></i><b>8.2</b> Matrices</a></li>
<li class="chapter" data-level="8.3" data-path="8-data-structures.html"><a href="8-data-structures.html#data-frames-1"><i class="fa fa-check"></i><b>8.3</b> Data Frames</a><ul>
<li class="chapter" data-level="8.3.1" data-path="8-data-structures.html"><a href="8-data-structures.html#data.frames-vs-tibbles"><i class="fa fa-check"></i><b>8.3.1</b> <code>data.frames</code> vs <code>tibbles</code></a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="8-data-structures.html"><a href="8-data-structures.html#lists"><i class="fa fa-check"></i><b>8.4</b> Lists</a></li>
<li class="chapter" data-level="8.5" data-path="8-data-structures.html"><a href="8-data-structures.html#exercises-8"><i class="fa fa-check"></i><b>8.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="9-importing-data.html"><a href="9-importing-data.html"><i class="fa fa-check"></i><b>9</b> Importing Data</a><ul>
<li class="chapter" data-level="9.1" data-path="9-importing-data.html"><a href="9-importing-data.html#working-directory"><i class="fa fa-check"></i><b>9.1</b> Working directory</a></li>
<li class="chapter" data-level="9.2" data-path="9-importing-data.html"><a href="9-importing-data.html#comma-separated-data"><i class="fa fa-check"></i><b>9.2</b> Comma Separated Data</a></li>
<li class="chapter" data-level="9.3" data-path="9-importing-data.html"><a href="9-importing-data.html#ms-excel"><i class="fa fa-check"></i><b>9.3</b> MS Excel</a></li>
<li class="chapter" data-level="9.4" data-path="9-importing-data.html"><a href="9-importing-data.html#multiple-files"><i class="fa fa-check"></i><b>9.4</b> Multiple files</a></li>
<li class="chapter" data-level="9.5" data-path="9-importing-data.html"><a href="9-importing-data.html#exercises-9"><i class="fa fa-check"></i><b>9.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-functions-1.html"><a href="10-functions-1.html"><i class="fa fa-check"></i><b>10</b> Functions</a><ul>
<li class="chapter" data-level="10.1" data-path="10-functions-1.html"><a href="10-functions-1.html#basic-function-definition"><i class="fa fa-check"></i><b>10.1</b> Basic function definition</a></li>
<li class="chapter" data-level="10.2" data-path="10-functions-1.html"><a href="10-functions-1.html#parameter-defaults"><i class="fa fa-check"></i><b>10.2</b> Parameter Defaults</a></li>
<li class="chapter" data-level="10.3" data-path="10-functions-1.html"><a href="10-functions-1.html#ellipses"><i class="fa fa-check"></i><b>10.3</b> Ellipses</a></li>
<li class="chapter" data-level="10.4" data-path="10-functions-1.html"><a href="10-functions-1.html#function-overloading"><i class="fa fa-check"></i><b>10.4</b> Function Overloading</a></li>
<li class="chapter" data-level="10.5" data-path="10-functions-1.html"><a href="10-functions-1.html#debugging"><i class="fa fa-check"></i><b>10.5</b> Debugging</a><ul>
<li class="chapter" data-level="10.5.1" data-path="10-functions-1.html"><a href="10-functions-1.html#rmarkdown-recommendations"><i class="fa fa-check"></i><b>10.5.1</b> Rmarkdown Recommendations</a></li>
<li class="chapter" data-level="10.5.2" data-path="10-functions-1.html"><a href="10-functions-1.html#step-wise-execution"><i class="fa fa-check"></i><b>10.5.2</b> Step-wise Execution</a></li>
<li class="chapter" data-level="10.5.3" data-path="10-functions-1.html"><a href="10-functions-1.html#print-statements"><i class="fa fa-check"></i><b>10.5.3</b> Print Statements</a></li>
<li class="chapter" data-level="10.5.4" data-path="10-functions-1.html"><a href="10-functions-1.html#browser"><i class="fa fa-check"></i><b>10.5.4</b> <code>browser</code></a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="10-functions-1.html"><a href="10-functions-1.html#scope"><i class="fa fa-check"></i><b>10.6</b> Scope</a></li>
<li class="chapter" data-level="10.7" data-path="10-functions-1.html"><a href="10-functions-1.html#exercises-10"><i class="fa fa-check"></i><b>10.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html"><i class="fa fa-check"></i><b>11</b> String Manipulation</a><ul>
<li class="chapter" data-level="11.1" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#base-function"><i class="fa fa-check"></i><b>11.1</b> Base function</a></li>
<li class="chapter" data-level="11.2" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#stringr-basic-operations"><i class="fa fa-check"></i><b>11.2</b> <code>stringr</code>: Basic operations</a><ul>
<li class="chapter" data-level="11.2.1" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#concatenating-with-str_c-or-str_join"><i class="fa fa-check"></i><b>11.2.1</b> Concatenating with <code>str_c()</code> or <code>str_join()</code></a></li>
<li class="chapter" data-level="11.2.2" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#calculating-string-length-with-str_length"><i class="fa fa-check"></i><b>11.2.2</b> Calculating string length with <code>str_length()</code></a></li>
<li class="chapter" data-level="11.2.3" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#extracting-substrings-with-str_sub"><i class="fa fa-check"></i><b>11.2.3</b> Extracting substrings with <code>str_sub()</code></a></li>
<li class="chapter" data-level="11.2.4" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#pad-a-string-with-str_pad"><i class="fa fa-check"></i><b>11.2.4</b> Pad a string with <code>str_pad()</code></a></li>
<li class="chapter" data-level="11.2.5" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#trim-a-string-with-str_trim"><i class="fa fa-check"></i><b>11.2.5</b> Trim a string with <code>str_trim()</code></a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#stringr-pattern-matching-tools"><i class="fa fa-check"></i><b>11.3</b> <code>stringr</code>: Pattern Matching Tools</a><ul>
<li class="chapter" data-level="11.3.1" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#detecting-a-pattern-using-str_detect"><i class="fa fa-check"></i><b>11.3.1</b> Detecting a pattern using str_detect()</a></li>
<li class="chapter" data-level="11.3.2" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#locating-a-pattern-using-str_locate"><i class="fa fa-check"></i><b>11.3.2</b> Locating a pattern using str_locate()</a></li>
<li class="chapter" data-level="11.3.3" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#replacing-sub-strings-using-str_replace"><i class="fa fa-check"></i><b>11.3.3</b> Replacing sub-strings using <code>str_replace()</code></a></li>
<li class="chapter" data-level="11.3.4" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#splitting-into-sub-strings-using-str_split"><i class="fa fa-check"></i><b>11.3.4</b> Splitting into sub-strings using <code>str_split()</code></a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#regular-expressions"><i class="fa fa-check"></i><b>11.4</b> Regular Expressions</a><ul>
<li class="chapter" data-level="11.4.1" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#regular-expression-ingredients"><i class="fa fa-check"></i><b>11.4.1</b> Regular Expression Ingredients</a></li>
<li class="chapter" data-level="11.4.2" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#matching-a-specific-string"><i class="fa fa-check"></i><b>11.4.2</b> Matching a specific string</a></li>
<li class="chapter" data-level="11.4.3" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#matching-arbitrary-numbers"><i class="fa fa-check"></i><b>11.4.3</b> Matching arbitrary numbers</a></li>
<li class="chapter" data-level="11.4.4" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#greedy-matching"><i class="fa fa-check"></i><b>11.4.4</b> Greedy matching</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#fuzzy-pattern-matching"><i class="fa fa-check"></i><b>11.5</b> Fuzzy Pattern Matching</a><ul>
<li class="chapter" data-level="11.5.1" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#key-collision-merge"><i class="fa fa-check"></i><b>11.5.1</b> Key Collision Merge</a></li>
<li class="chapter" data-level="11.5.2" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#string-distances"><i class="fa fa-check"></i><b>11.5.2</b> String Distances</a></li>
<li class="chapter" data-level="11.5.3" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#n-gram-merge"><i class="fa fa-check"></i><b>11.5.3</b> N-gram Merge</a></li>
</ul></li>
<li class="chapter" data-level="11.6" data-path="11-string-manipulation.html"><a href="11-string-manipulation.html#exercises-11"><i class="fa fa-check"></i><b>11.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-dates-and-times.html"><a href="12-dates-and-times.html"><i class="fa fa-check"></i><b>12</b> Dates and Times</a><ul>
<li class="chapter" data-level="12.1" data-path="12-dates-and-times.html"><a href="12-dates-and-times.html#creating-date-and-time-objects"><i class="fa fa-check"></i><b>12.1</b> Creating Date and Time objects</a></li>
<li class="chapter" data-level="12.2" data-path="12-dates-and-times.html"><a href="12-dates-and-times.html#extracting-information"><i class="fa fa-check"></i><b>12.2</b> Extracting information</a></li>
<li class="chapter" data-level="12.3" data-path="12-dates-and-times.html"><a href="12-dates-and-times.html#arithmetic-on-dates"><i class="fa fa-check"></i><b>12.3</b> Arithmetic on Dates</a></li>
<li class="chapter" data-level="12.4" data-path="12-dates-and-times.html"><a href="12-dates-and-times.html#exercises-12"><i class="fa fa-check"></i><b>12.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="13-data-reshaping.html"><a href="13-data-reshaping.html"><i class="fa fa-check"></i><b>13</b> Data Reshaping</a><ul>
<li class="chapter" data-level="13.1" data-path="13-data-reshaping.html"><a href="13-data-reshaping.html#data.frames-vs-tibbles-1"><i class="fa fa-check"></i><b>13.1</b> <code>data.frames</code> vs <code>tibbles</code></a></li>
<li class="chapter" data-level="13.2" data-path="13-data-reshaping.html"><a href="13-data-reshaping.html#cbind-rbind"><i class="fa fa-check"></i><b>13.2</b> <code>cbind</code> &amp; <code>rbind</code></a></li>
<li class="chapter" data-level="13.3" data-path="13-data-reshaping.html"><a href="13-data-reshaping.html#tidyr"><i class="fa fa-check"></i><b>13.3</b> <code>tidyr</code></a><ul>
<li class="chapter" data-level="13.3.1" data-path="13-data-reshaping.html"><a href="13-data-reshaping.html#verbs-1"><i class="fa fa-check"></i><b>13.3.1</b> Verbs</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="13-data-reshaping.html"><a href="13-data-reshaping.html#storing-data-in-multiple-tables"><i class="fa fa-check"></i><b>13.4</b> Storing Data in Multiple Tables</a></li>
<li class="chapter" data-level="13.5" data-path="13-data-reshaping.html"><a href="13-data-reshaping.html#table-joins"><i class="fa fa-check"></i><b>13.5</b> Table Joins</a></li>
<li class="chapter" data-level="13.6" data-path="13-data-reshaping.html"><a href="13-data-reshaping.html#row-summations"><i class="fa fa-check"></i><b>13.6</b> Row summations</a></li>
<li class="chapter" data-level="13.7" data-path="13-data-reshaping.html"><a href="13-data-reshaping.html#exercises-13"><i class="fa fa-check"></i><b>13.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i>Maps</a><ul>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#introduction-1"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#coordinate-reference-systems-crs"><i class="fa fa-check"></i>Coordinate Reference Systems (CRS)</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#spatial-objects"><i class="fa fa-check"></i>Spatial Objects</a></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#tiles"><i class="fa fa-check"></i>Tiles</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#obtaining-spatial-data"><i class="fa fa-check"></i>Obtaining Spatial Data</a><ul>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#natural-earth-database"><i class="fa fa-check"></i>Natural Earth Database</a></li>
<li class="chapter" data-level="13.7.1" data-path="maps.html"><a href="maps.html#package-maps"><i class="fa fa-check"></i><b>13.7.1</b> Package <code class="unnumbered">maps</code></a></li>
</ul></li>
<li class="chapter" data-level="" data-path="maps.html"><a href="maps.html#example"><i class="fa fa-check"></i>Example</a><ul>
<li class="chapter" data-level="13.7.2" data-path="maps.html"><a href="maps.html#package-leaflet"><i class="fa fa-check"></i><b>13.7.2</b> Package <code class="unnumbered">leaflet</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="14-graphing-part-ii.html"><a href="14-graphing-part-ii.html"><i class="fa fa-check"></i><b>14</b> Graphing Part II</a><ul>
<li class="chapter" data-level="14.1" data-path="14-graphing-part-ii.html"><a href="14-graphing-part-ii.html#multi-plots"><i class="fa fa-check"></i><b>14.1</b> Multi-plots</a><ul>
<li class="chapter" data-level="14.1.1" data-path="14-graphing-part-ii.html"><a href="14-graphing-part-ii.html#cowplot-package"><i class="fa fa-check"></i><b>14.1.1</b> <code>cowplot</code> package</a></li>
<li class="chapter" data-level="14.1.2" data-path="14-graphing-part-ii.html"><a href="14-graphing-part-ii.html#multiplot-in-rmisc"><i class="fa fa-check"></i><b>14.1.2</b> <code>multiplot</code> in <code>Rmisc</code></a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="14-graphing-part-ii.html"><a href="14-graphing-part-ii.html#customized-scales"><i class="fa fa-check"></i><b>14.2</b> Customized Scales</a><ul>
<li class="chapter" data-level="14.2.1" data-path="14-graphing-part-ii.html"><a href="14-graphing-part-ii.html#color-scales"><i class="fa fa-check"></i><b>14.2.1</b> Color Scales</a></li>
<li class="chapter" data-level="14.2.2" data-path="14-graphing-part-ii.html"><a href="14-graphing-part-ii.html#setting-major-minor-ticks"><i class="fa fa-check"></i><b>14.2.2</b> Setting major &amp; minor ticks</a></li>
<li class="chapter" data-level="14.2.3" data-path="14-graphing-part-ii.html"><a href="14-graphing-part-ii.html#log-scales"><i class="fa fa-check"></i><b>14.2.3</b> Log Scales</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="14-graphing-part-ii.html"><a href="14-graphing-part-ii.html#themes"><i class="fa fa-check"></i><b>14.3</b> Themes</a></li>
<li class="chapter" data-level="14.4" data-path="14-graphing-part-ii.html"><a href="14-graphing-part-ii.html#mathematical-notation"><i class="fa fa-check"></i><b>14.4</b> Mathematical Notation</a></li>
<li class="chapter" data-level="14.5" data-path="14-graphing-part-ii.html"><a href="14-graphing-part-ii.html#interactive-plots-with-plotly"><i class="fa fa-check"></i><b>14.5</b> Interactive plots with <code>plotly</code></a></li>
<li class="chapter" data-level="14.6" data-path="14-graphing-part-ii.html"><a href="14-graphing-part-ii.html#geographic-maps"><i class="fa fa-check"></i><b>14.6</b> Geographic Maps</a><ul>
<li class="chapter" data-level="14.6.1" data-path="14-graphing-part-ii.html"><a href="14-graphing-part-ii.html#package-maps-1"><i class="fa fa-check"></i><b>14.6.1</b> Package <code>maps</code></a></li>
<li class="chapter" data-level="14.6.2" data-path="14-graphing-part-ii.html"><a href="14-graphing-part-ii.html#packages-sf-and-rnaturalearth"><i class="fa fa-check"></i><b>14.6.2</b> Packages <code>sf</code> and <code>rnaturalearth</code></a></li>
<li class="chapter" data-level="14.6.3" data-path="14-graphing-part-ii.html"><a href="14-graphing-part-ii.html#package-leaflet-1"><i class="fa fa-check"></i><b>14.6.3</b> Package <code>leaflet</code></a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="14-graphing-part-ii.html"><a href="14-graphing-part-ii.html#exercises-14"><i class="fa fa-check"></i><b>14.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="15-r-packages.html"><a href="15-r-packages.html"><i class="fa fa-check"></i><b>15</b> R Packages</a><ul>
<li class="chapter" data-level="15.1" data-path="15-r-packages.html"><a href="15-r-packages.html#introduction-2"><i class="fa fa-check"></i><b>15.1</b> Introduction</a><ul>
<li class="chapter" data-level="15.1.1" data-path="15-r-packages.html"><a href="15-r-packages.html#useful-packages-and-books"><i class="fa fa-check"></i><b>15.1.1</b> Useful packages and books</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="15-r-packages.html"><a href="15-r-packages.html#package-structure"><i class="fa fa-check"></i><b>15.2</b> Package Structure</a><ul>
<li class="chapter" data-level="15.2.1" data-path="15-r-packages.html"><a href="15-r-packages.html#minimal-files-and-directories"><i class="fa fa-check"></i><b>15.2.1</b> Minimal files and directories</a></li>
<li class="chapter" data-level="15.2.2" data-path="15-r-packages.html"><a href="15-r-packages.html#optional-files-and-directories"><i class="fa fa-check"></i><b>15.2.2</b> Optional Files and Directories</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="15-r-packages.html"><a href="15-r-packages.html#documenting"><i class="fa fa-check"></i><b>15.3</b> Documenting</a><ul>
<li class="chapter" data-level="15.3.1" data-path="15-r-packages.html"><a href="15-r-packages.html#data-documentation"><i class="fa fa-check"></i><b>15.3.1</b> Data Documentation</a></li>
<li class="chapter" data-level="15.3.2" data-path="15-r-packages.html"><a href="15-r-packages.html#documenting-functions"><i class="fa fa-check"></i><b>15.3.2</b> Documenting Functions</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="15-r-packages.html"><a href="15-r-packages.html#testing"><i class="fa fa-check"></i><b>15.4</b> Testing</a></li>
<li class="chapter" data-level="15.5" data-path="15-r-packages.html"><a href="15-r-packages.html#the-description-file"><i class="fa fa-check"></i><b>15.5</b> The DESCRIPTION file</a></li>
<li class="chapter" data-level="15.6" data-path="15-r-packages.html"><a href="15-r-packages.html#sharing-your-package"><i class="fa fa-check"></i><b>15.6</b> Sharing your Package</a></li>
<li class="chapter" data-level="15.7" data-path="15-r-packages.html"><a href="15-r-packages.html#an-example-package"><i class="fa fa-check"></i><b>15.7</b> An Example Package</a></li>
<li class="chapter" data-level="15.8" data-path="15-r-packages.html"><a href="15-r-packages.html#exercises-15"><i class="fa fa-check"></i><b>15.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="16-data-scraping.html"><a href="16-data-scraping.html"><i class="fa fa-check"></i><b>16</b> Data Scraping</a><ul>
<li class="chapter" data-level="16.1" data-path="16-data-scraping.html"><a href="16-data-scraping.html#web-pages"><i class="fa fa-check"></i><b>16.1</b> Web Pages</a><ul>
<li class="chapter" data-level="16.1.1" data-path="16-data-scraping.html"><a href="16-data-scraping.html#example-wikipedia-table"><i class="fa fa-check"></i><b>16.1.1</b> Example Wikipedia Table</a></li>
<li class="chapter" data-level="16.1.2" data-path="16-data-scraping.html"><a href="16-data-scraping.html#lists-1"><i class="fa fa-check"></i><b>16.1.2</b> Lists</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="16-data-scraping.html"><a href="16-data-scraping.html#scraping-.pdf-files"><i class="fa fa-check"></i><b>16.2</b> Scraping .pdf files</a></li>
<li class="chapter" data-level="16.3" data-path="16-data-scraping.html"><a href="16-data-scraping.html#exercises-16"><i class="fa fa-check"></i><b>16.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="17-api-data-queries.html"><a href="17-api-data-queries.html"><i class="fa fa-check"></i><b>17</b> API Data Queries</a><ul>
<li class="chapter" data-level="17.1" data-path="17-api-data-queries.html"><a href="17-api-data-queries.html#introduction-3"><i class="fa fa-check"></i><b>17.1</b> Introduction</a></li>
<li class="chapter" data-level="17.2" data-path="17-api-data-queries.html"><a href="17-api-data-queries.html#census-bureau-api"><i class="fa fa-check"></i><b>17.2</b> Census Bureau API</a></li>
<li class="chapter" data-level="17.3" data-path="17-api-data-queries.html"><a href="17-api-data-queries.html#package-censusapi"><i class="fa fa-check"></i><b>17.3</b> Package <code>censusapi</code></a><ul>
<li class="chapter" data-level="17.3.1" data-path="17-api-data-queries.html"><a href="17-api-data-queries.html#population-estimates"><i class="fa fa-check"></i><b>17.3.1</b> Population Estimates</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="17-api-data-queries.html"><a href="17-api-data-queries.html#package-tidycensus"><i class="fa fa-check"></i><b>17.4</b> Package <code>tidycensus</code></a></li>
<li class="chapter" data-level="17.5" data-path="17-api-data-queries.html"><a href="17-api-data-queries.html#exercises-17"><i class="fa fa-check"></i><b>17.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="18-databases.html"><a href="18-databases.html"><i class="fa fa-check"></i><b>18</b> Databases</a><ul>
<li class="chapter" data-level="18.1" data-path="18-databases.html"><a href="18-databases.html#tutorial-set-up"><i class="fa fa-check"></i><b>18.1</b> Tutorial Set-Up</a></li>
<li class="chapter" data-level="18.2" data-path="18-databases.html"><a href="18-databases.html#sql"><i class="fa fa-check"></i><b>18.2</b> SQL</a></li>
<li class="chapter" data-level="18.3" data-path="18-databases.html"><a href="18-databases.html#dbplyr"><i class="fa fa-check"></i><b>18.3</b> <code>dbplyr</code></a></li>
<li class="chapter" data-level="18.4" data-path="18-databases.html"><a href="18-databases.html#exercises-18"><i class="fa fa-check"></i><b>18.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="19-speeding-up-r.html"><a href="19-speeding-up-r.html"><i class="fa fa-check"></i><b>19</b> Speeding up R</a><ul>
<li class="chapter" data-level="19.1" data-path="19-speeding-up-r.html"><a href="19-speeding-up-r.html#faster-for-loops"><i class="fa fa-check"></i><b>19.1</b> Faster for loops?</a></li>
<li class="chapter" data-level="19.2" data-path="19-speeding-up-r.html"><a href="19-speeding-up-r.html#vectorizing-loops"><i class="fa fa-check"></i><b>19.2</b> Vectorizing loops</a></li>
<li class="chapter" data-level="19.3" data-path="19-speeding-up-r.html"><a href="19-speeding-up-r.html#parallel-processing"><i class="fa fa-check"></i><b>19.3</b> Parallel Processing</a></li>
<li class="chapter" data-level="19.4" data-path="19-speeding-up-r.html"><a href="19-speeding-up-r.html#parallelizing-for-loops"><i class="fa fa-check"></i><b>19.4</b> Parallelizing for loops</a></li>
<li class="chapter" data-level="19.5" data-path="19-speeding-up-r.html"><a href="19-speeding-up-r.html#parallel-aware-functions"><i class="fa fa-check"></i><b>19.5</b> Parallel Aware Functions</a><ul>
<li class="chapter" data-level="19.5.1" data-path="19-speeding-up-r.html"><a href="19-speeding-up-r.html#bootboot"><i class="fa fa-check"></i><b>19.5.1</b> <code>boot::boot</code></a></li>
<li class="chapter" data-level="19.5.2" data-path="19-speeding-up-r.html"><a href="19-speeding-up-r.html#carettrain"><i class="fa fa-check"></i><b>19.5.2</b> <code>caret::train</code></a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">STA 444/5 - Introductory Data Science using R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="r-packages" class="section level1">
<h1><span class="header-section-number">Chapter 15</span> R Packages</h1>
<div id="introduction-2" class="section level2">
<h2><span class="header-section-number">15.1</span> Introduction</h2>
<p>R packages are documented and consistent format for storing data, functions, documentation, and analysis. We use a consistent format so that other researchers (or ourselves in six months) know exactly where the raw data should be, where to find any functions that are written, and document the data cleaning process.</p>
<p>In principle, all of these steps could be accomplished by a single data file and a single analysis Rmarkdown file. However as projects get larger in scope, the number of data files, the complexity of data cleaning, and the number of people working with the data will grow. With more complexity, the need to impose order on it becomes critical.</p>
<p>Even if the project is small, organizing my work into a package structure provides a benefit. First, it forces me to keep my data wrangling code organized and encourages documenting any functions I create. Second, by separating the data wrangling step code from the analysis, I think more deeply about verification and initial exploration to understand how best to store the data. Finally, because all my subsequent analysis will depend on the same tidy dataset, I make few mistakes where I cleaned the data correctly in one analysis, but forgot a step in another analysis.</p>
<p>I recommend using an R package for any analysis more complicated than a homework assignment because the start-up is relatively simple and if the project grows, you’ll appreciate that you started it in an organized fashion.</p>
<div id="useful-packages-and-books" class="section level3">
<h3><span class="header-section-number">15.1.1</span> Useful packages and books</h3>
<p>There are several packages that make life easier.</p>
<table>
<colgroup>
<col width="26%" />
<col width="73%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Package</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>devtools</code></td>
<td align="left">Tools by Hadley, for Hadley (and the rest of us).</td>
</tr>
<tr class="even">
<td align="center"><code>roxygen2</code></td>
<td align="left">A coherent documentation syntax</td>
</tr>
<tr class="odd">
<td align="center"><code>testthat</code></td>
<td align="left">Quality Assurance tools</td>
</tr>
<tr class="even">
<td align="center"><code>usethis</code></td>
<td align="left">Automates repetitive tasks that arise during project setup and development, both for R packages and non-package projects.</td>
</tr>
</tbody>
</table>
<p>Hadley Wickham has written a book on R packages that gives a lot more information than I’m giving here. The book is available <a href="http://r-pkgs.had.co.nz">online</a>.</p>
</div>
</div>
<div id="package-structure" class="section level2">
<h2><span class="header-section-number">15.2</span> Package Structure</h2>
<div id="minimal-files-and-directories" class="section level3">
<h3><span class="header-section-number">15.2.1</span> Minimal files and directories</h3>
<table>
<colgroup>
<col width="26%" />
<col width="73%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">File/Directory</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>DESCRIPTION</code></td>
<td align="left">A file describing your package. You <strong>should</strong> edit this at some point.</td>
</tr>
<tr class="even">
<td align="center"><code>NAMESPACE</code></td>
<td align="left">A file that lists all the functions and datasets available to users after loading the package. You <strong>should not</strong> edit this by hand.</td>
</tr>
<tr class="odd">
<td align="center"><code>.Rbuildignore</code></td>
<td align="left">A list of files that shouldn’t be included when the package is built.</td>
</tr>
<tr class="even">
<td align="center"><code>R/</code></td>
<td align="left">This directory contains documentation files for datasets. It also contains the R code and documentation for functions you create. I generally recommend one documentation file for each dataset, and one file for each function, although if you have several related functions, you might keep them in the same file. This directory can be empty, but it does have to exist.</td>
</tr>
<tr class="odd">
<td align="center"><code>man/</code></td>
<td align="left">This contains the documentation (manual) files generated by <code>roxygen2</code>. You <strong>should not</strong> edit these as they will be rebuilt from the source R code in the <code>R/</code> directory.</td>
</tr>
</tbody>
</table>
</div>
<div id="optional-files-and-directories" class="section level3">
<h3><span class="header-section-number">15.2.2</span> Optional Files and Directories</h3>
<table>
<colgroup>
<col width="26%" />
<col width="73%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">File/Directory</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>data-raw/</code></td>
<td align="left">A directory where we store data files that are not <code>.RData</code> format. Usually these are <code>.csv</code> or <code>.xls</code> files that have not been processed. Typically I’ll have R scripts in this directory that read in raw data, do whatever data wrangling and cleaning that needs to be done, and saves the result in the <code>data/</code> directory. Obnoxiously the documentation for the dataset does not live in this directory, but rather in the <code>R/</code> directory.</td>
</tr>
<tr class="even">
<td align="center"><code>data/</code></td>
<td align="left">A directory of datasets that are saved in R’s efficient <code>.RData</code> format. Each file should be an <code>.RData</code> or <code>.Rda</code> file created by the <code>save()</code> containing a single object (with the same names as the file). Anything in this directory will be loaded and accessible to the user when the package is loaded. While it isn’t necessary for this directory to exist, it often does.</td>
</tr>
<tr class="odd">
<td align="center"><code>docs/</code></td>
<td align="left">A directory where any Rmarkdown analysis files that are especially time consuming and should not be executed each time the package is built. When I build a package for a data-analysis project, the reports I create go into this directory.</td>
</tr>
<tr class="even">
<td align="center"><code>vignettes/</code></td>
<td align="left">A directory where Rmarkdown files should go that introduce how to use the package. When a package is built, then Rmarkdown files in this directory will also be rebuilt. I generally don’t make a vi</td>
</tr>
<tr class="odd">
<td align="center"><code>tests/</code></td>
<td align="left">A directory for code used for package testing functions you’ve written.</td>
</tr>
<tr class="even">
<td align="center"><code>inst/</code></td>
<td align="left">Miscellaneous stuff. In particular <code>inst/extdata/</code> is where you might put data that is not in <code>.RData</code> format (Excel files and such) but you want it available to the users. Anything in the <code>inst/extdata</code> will be available to to user via <code>system.file('file.xls',package='MyAwesomePackage')</code></td>
</tr>
<tr class="odd">
<td align="center"><code>src/</code></td>
<td align="left">A directory where C/C++, Fortran, Python, etc source code is stored.</td>
</tr>
<tr class="even">
<td align="center"><code>exec/</code></td>
<td align="left">A directory where executables you might have created from the source code should go.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="documenting" class="section level2">
<h2><span class="header-section-number">15.3</span> Documenting</h2>
<p>The <code>man/</code> directory is where the final documentation exists, but the format that was initially established is quite unwieldy. To address this, the <code>roxygen2</code> package uses a more robust and modern syntax and keeps the function documentation with the actual code in the <code>R\</code> directory. The results in a process where we write the documentation in files in the <code>R/</code> directory and then run a <code>roxygen2</code> command to build the actual documentation files in the <code>man/</code> directory. To run this, use the <code>Build</code> tab and then <code>More -&gt; Document</code>.</p>
<p>Hadley Wickham has a more complete discussion of package documentation in a
<a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/rd.html">vignette</a>
for <code>roxygen2</code>. If/when the information in this chapter seems insufficient, that should be your next resource.</p>
<p>The documentation information is built in comments and so documentation lines always start with a <code>#'</code>. For both data sets and functions, the first couple of lines give the short title and description.</p>
<div class="sourceCode" id="cb792"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb792-1"><a href="15-r-packages.html#cb792-1"></a><span class="co">#&#39; A short title</span></span>
<span id="cb792-2"><a href="15-r-packages.html#cb792-2"></a><span class="co">#&#39; </span></span>
<span id="cb792-3"><a href="15-r-packages.html#cb792-3"></a><span class="co">#&#39; A longer paragraph that describes the context of the dataset/function and </span></span>
<span id="cb792-4"><a href="15-r-packages.html#cb792-4"></a><span class="co">#&#39; discusses important aspects that will be necessary for somebody first seeing </span></span>
<span id="cb792-5"><a href="15-r-packages.html#cb792-5"></a><span class="co">#&#39; the data/function to know about. Any text in these initial paragraphs will be </span></span>
<span id="cb792-6"><a href="15-r-packages.html#cb792-6"></a><span class="co">#&#39; in the description section of the documentation file.</span></span>
<span id="cb792-7"><a href="15-r-packages.html#cb792-7"></a><span class="co">#&#39; </span></span></code></pre></div>
<div id="data-documentation" class="section level3">
<h3><span class="header-section-number">15.3.1</span> Data Documentation</h3>
<p>Data set documentation should contain both general information about the context of the data as well as detailed information about the data columns. Finally the documentation should also include information about where the data came from, if it is available. The title and description are given in the first paragraphs of the description, but the format and source need some indication starting the sections.</p>
<div class="sourceCode" id="cb793"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb793-1"><a href="15-r-packages.html#cb793-1"></a><span class="co">#&#39; A short title</span></span>
<span id="cb793-2"><a href="15-r-packages.html#cb793-2"></a><span class="co">#&#39; </span></span>
<span id="cb793-3"><a href="15-r-packages.html#cb793-3"></a><span class="co">#&#39; A longer paragraph that describes the context of the dataset and </span></span>
<span id="cb793-4"><a href="15-r-packages.html#cb793-4"></a><span class="co">#&#39; discusses important aspects that will be necessary for somebody first seeing </span></span>
<span id="cb793-5"><a href="15-r-packages.html#cb793-5"></a><span class="co">#&#39; the data to know about. Any text in these initial paragraphs will be </span></span>
<span id="cb793-6"><a href="15-r-packages.html#cb793-6"></a><span class="co">#&#39; in the description section of the documentation file.</span></span>
<span id="cb793-7"><a href="15-r-packages.html#cb793-7"></a><span class="co">#&#39; </span></span>
<span id="cb793-8"><a href="15-r-packages.html#cb793-8"></a><span class="co">#&#39; @format A data frame with XXX observations with ZZ columns.</span></span>
<span id="cb793-9"><a href="15-r-packages.html#cb793-9"></a><span class="co">#&#39; \describe{</span></span>
<span id="cb793-10"><a href="15-r-packages.html#cb793-10"></a><span class="co">#&#39;    \item{Column1}{Description of column 1, including units if appropriate}</span></span>
<span id="cb793-11"><a href="15-r-packages.html#cb793-11"></a><span class="co">#&#39;    \item{Column2}{Description of column 2, including units if appropriate}</span></span>
<span id="cb793-12"><a href="15-r-packages.html#cb793-12"></a><span class="co">#&#39; }</span></span>
<span id="cb793-13"><a href="15-r-packages.html#cb793-13"></a><span class="st">&quot;DataSetName&quot;</span></span></code></pre></div>
<p>There are a few other documentation sections that can be filled in. They will all be introduced using <code>@Section</code> notation.</p>
<div class="sourceCode" id="cb794"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb794-1"><a href="15-r-packages.html#cb794-1"></a><span class="co">#&#39; @source This describes where the data came from</span></span>
<span id="cb794-2"><a href="15-r-packages.html#cb794-2"></a><span class="co">#&#39; @references If we need to cite some book or journal article.</span></span></code></pre></div>
</div>
<div id="documenting-functions" class="section level3">
<h3><span class="header-section-number">15.3.2</span> Documenting Functions</h3>
<p>Functions that you want other people to use need to be documentated. In particular, we need a general description of what the function does, a list of all function arguments and what they do, and what type of object the function returns. Finally, it is nice to have some examples that demonstrate how the function can be used.</p>
<div class="sourceCode" id="cb795"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb795-1"><a href="15-r-packages.html#cb795-1"></a><span class="co">#&#39; Sum two numeric objects.</span></span>
<span id="cb795-2"><a href="15-r-packages.html#cb795-2"></a><span class="co">#&#39;</span></span>
<span id="cb795-3"><a href="15-r-packages.html#cb795-3"></a><span class="co">#&#39; Because this is a very simple function, my explanation is short. These</span></span>
<span id="cb795-4"><a href="15-r-packages.html#cb795-4"></a><span class="co">#&#39; paragraphs should explain everything you need to know.</span></span>
<span id="cb795-5"><a href="15-r-packages.html#cb795-5"></a><span class="co">#&#39; </span></span>
<span id="cb795-6"><a href="15-r-packages.html#cb795-6"></a><span class="co">#&#39; This is still in the description part of the documentation and and it </span></span>
<span id="cb795-7"><a href="15-r-packages.html#cb795-7"></a><span class="co">#&#39; will be until we see something that indicates a new section.</span></span>
<span id="cb795-8"><a href="15-r-packages.html#cb795-8"></a><span class="co">#&#39;</span></span>
<span id="cb795-9"><a href="15-r-packages.html#cb795-9"></a><span class="co">#&#39; @param a A real number</span></span>
<span id="cb795-10"><a href="15-r-packages.html#cb795-10"></a><span class="co">#&#39; @param b A real number</span></span>
<span id="cb795-11"><a href="15-r-packages.html#cb795-11"></a><span class="co">#&#39; @return The sum of \code{a} and \code{b}</span></span>
<span id="cb795-12"><a href="15-r-packages.html#cb795-12"></a><span class="co">#&#39; @examples</span></span>
<span id="cb795-13"><a href="15-r-packages.html#cb795-13"></a><span class="co">#&#39; sum(12,5)</span></span>
<span id="cb795-14"><a href="15-r-packages.html#cb795-14"></a><span class="co">#&#39; sum(4,-2)</span></span>
<span id="cb795-15"><a href="15-r-packages.html#cb795-15"></a><span class="co">#&#39; @export</span></span>
<span id="cb795-16"><a href="15-r-packages.html#cb795-16"></a>my.sum &lt;-<span class="st"> </span><span class="cf">function</span>( a, b ){</span>
<span id="cb795-17"><a href="15-r-packages.html#cb795-17"></a>  <span class="kw">return</span>( a <span class="op">+</span><span class="st"> </span>b )</span>
<span id="cb795-18"><a href="15-r-packages.html#cb795-18"></a>}</span></code></pre></div>
<p>Each of the sections is self explanatory except for the <code>@export</code>. The purpose of this is to indicate that this function should be available to any user of the package. If a function is not exported, then it is available only to functions <em>within</em> the package. This can be convenient if there are multiple functions that help with the analysis but you don’t want the user to see them because it is too much work to explain that they shouldn’t be used.</p>
<p>Other regions that you might use:</p>
<ul>
<li><code>@seealso</code> allows you to point to other resources
<ul>
<li>on the web <code>\url{http://www.r-project.org}</code></li>
<li>in your package <code>\code{\link{hello}}</code></li>
<li>in another package <code>\code{\link[package]{function}}</code></li>
</ul></li>
<li><code>@aliases alias_1 alias_2 ...</code> Other topics that when searched for will point to this documentation</li>
<li><code>@author</code> This isn’t necessary if the author is the same as the package author.</li>
<li><code>@references</code> This is a text area to point to journal articles or other literature sources.</li>
</ul>
</div>
</div>
<div id="testing" class="section level2">
<h2><span class="header-section-number">15.4</span> Testing</h2>
<p>In any package that contains R-functions, we need to make sure those functions work correctly. In particular, as I am writing the function, I am building test cases that verify that my function does exactly what I claim it does. In particular, I want to save all of those simple test cases that I’ve thought about and automatically run them each time I re-build the package.</p>
<p>Moving from <em>ad-hoc</em> testing into a formalized <em>unit testing</em> results substantial improvements in your package and your code for a variety of reasons:</p>
<ol style="list-style-type: decimal">
<li><p>Cleaner functionality. Because unit testing requires you to think about how your code should respond in different instances, you think more clearly about what the appropriate inputs and outputs should be and as a result, you are less likely to have functions that do <em>WAY</em> too much and are difficult to test. Separate smaller functions are easier to write, easier to test, and ultimately more reliable.</p></li>
<li><p>Robust code. With unit testing, it is easier to make changes and feel confident that you haven’t broken previously working code. In particular, it allows us to capture weird edge cases and make sure they are always tested for.</p></li>
</ol>
<div class="sourceCode" id="cb796"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb796-1"><a href="15-r-packages.html#cb796-1"></a><span class="co"># To set up your package to use the testthat package run:</span></span>
<span id="cb796-2"><a href="15-r-packages.html#cb796-2"></a>usethis<span class="op">::</span><span class="kw">use_testthat</span>()</span></code></pre></div>
<p>What this command does is:</p>
<ol style="list-style-type: decimal">
<li>Creates a tests/testthat directory in the package.</li>
<li>Adds <code>testthat</code> to the <code>Suggests</code> field in the DESCRIPTION.</li>
<li>Creates a file <code>tests/testthat.R</code> that runs all your tests when R CMD check runs.</li>
</ol>
<p>Next you create .R files in the <code>tests/testthat/</code> directory named <code>test_XXX.r</code>. In those files, you’ll input your test code.</p>
<p>Recently, I had to utilize a truncated distribution and the <code>trunc</code> package didn’t work for the distribution I needed, so I had to create my own version of the <code>trunc</code> package. So I made my own <a href="https://github.com/dereksonderegger/truncdist2">trunc2</a>
package. However, I wanted to be absolutely certain that I was getting the correct answers, so I made some unit tests.</p>
<div class="sourceCode" id="cb797"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb797-1"><a href="15-r-packages.html#cb797-1"></a><span class="co"># Check to see if I get the same values in Poisson distribution</span></span>
<span id="cb797-2"><a href="15-r-packages.html#cb797-2"></a><span class="kw">test_that</span>(<span class="st">&#39;Unrestricted Poisson values correct&#39;</span>, {</span>
<span id="cb797-3"><a href="15-r-packages.html#cb797-3"></a>  <span class="kw">expect_equal</span>(<span class="kw">dpois</span>( <span class="dv">2</span>, <span class="dt">lambda=</span><span class="dv">3</span> ),  <span class="kw">dtrunc</span>(<span class="dv">2</span>, <span class="st">&#39;pois&#39;</span>, <span class="dt">lambda=</span><span class="dv">3</span>) )</span>
<span id="cb797-4"><a href="15-r-packages.html#cb797-4"></a>  <span class="kw">expect_equal</span>(<span class="kw">ppois</span>( <span class="dv">2</span>, <span class="dt">lambda=</span><span class="dv">3</span> ),  <span class="kw">ptrunc</span>(<span class="dv">2</span>, <span class="st">&#39;pois&#39;</span>, <span class="dt">lambda=</span><span class="dv">3</span>) )</span>
<span id="cb797-5"><a href="15-r-packages.html#cb797-5"></a>  <span class="kw">expect_equal</span>(<span class="kw">qpois</span>( <span class="fl">.8</span>, <span class="dt">lambda=</span><span class="dv">3</span> ), <span class="kw">qtrunc</span>(.<span class="dv">8</span>, <span class="st">&#39;pois&#39;</span>, <span class="dt">lambda=</span><span class="dv">3</span>) )</span>
<span id="cb797-6"><a href="15-r-packages.html#cb797-6"></a>})</span>
<span id="cb797-7"><a href="15-r-packages.html#cb797-7"></a></span>
<span id="cb797-8"><a href="15-r-packages.html#cb797-8"></a><span class="co"># Check to see if I get the same values in Exponential distribution</span></span>
<span id="cb797-9"><a href="15-r-packages.html#cb797-9"></a><span class="kw">test_that</span>(<span class="st">&#39;Unrestricted Exponential values correct&#39;</span>, {</span>
<span id="cb797-10"><a href="15-r-packages.html#cb797-10"></a>  <span class="kw">expect_equal</span>(<span class="kw">dexp</span>( <span class="dv">2</span>, <span class="dt">rate=</span><span class="dv">3</span> ),  <span class="kw">dtrunc</span>(<span class="dv">2</span>, <span class="st">&#39;exp&#39;</span>, <span class="dt">rate=</span><span class="dv">3</span>) )</span>
<span id="cb797-11"><a href="15-r-packages.html#cb797-11"></a>  <span class="kw">expect_equal</span>(<span class="kw">pexp</span>( <span class="dv">2</span>, <span class="dt">rate=</span><span class="dv">3</span> ),  <span class="kw">ptrunc</span>(<span class="dv">2</span>, <span class="st">&#39;exp&#39;</span>, <span class="dt">rate=</span><span class="dv">3</span>) )</span>
<span id="cb797-12"><a href="15-r-packages.html#cb797-12"></a>  <span class="kw">expect_equal</span>(<span class="kw">qexp</span>( <span class="fl">.8</span>, <span class="dt">rate=</span><span class="dv">3</span> ), <span class="kw">qtrunc</span>(.<span class="dv">8</span>, <span class="st">&#39;exp&#39;</span>, <span class="dt">rate=</span><span class="dv">3</span>) )</span>
<span id="cb797-13"><a href="15-r-packages.html#cb797-13"></a>})</span></code></pre></div>
<p>The idea is that each <code>test_that()</code> command tests some functionality and each <code>expect_XXX()</code> tests some atomic unit of computing. I would then have multiple files, where each file is named <code>test_XXX</code> and has some organizational rational.</p>
<p>The expectation functions give you a way to have your function calculate something and compare it to what you think should be the output. These functions start with <code>expect_</code> and throw an error if the expectation is not met. In the table below, the <code>a</code> and <code>b</code> represent expressions to be evaluated.</p>
<table>
<colgroup>
<col width="29%" />
<col width="70%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Function</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>expect_equal(a,b)</code></td>
<td align="left">Are the two inputs equal (up to numerical tolerances).</td>
</tr>
<tr class="even">
<td align="center"><code>expect_match(a,b)</code></td>
<td align="left">Does the character string <code>a</code> match the regular expression <code>b</code></td>
</tr>
<tr class="odd">
<td align="center"><code>expect_error(a)</code></td>
<td align="left">Does expression <code>a</code> cause an error?</td>
</tr>
<tr class="even">
<td align="center"><code>expect_is(a,b)</code></td>
<td align="left">Does the object <code>a</code> have the class listed in character string <code>b</code></td>
</tr>
<tr class="odd">
<td align="center"><code>expect_true(a)</code></td>
<td align="left">Does <code>a</code> evaluate to TRUE?</td>
</tr>
<tr class="even">
<td align="center"><code>expect_false(a)</code></td>
<td align="left">Does <code>a</code> evaluate to FALSE?</td>
</tr>
</tbody>
</table>
<p>The <code>expect_true</code> and <code>expect_false</code> functions are intended as a catch-all for cases that couldn’t be captured using one of the other expect functions.</p>
<p>There are a few more <code>expect_XXX</code> functions and you can see more detail in Hadley’s chapter on <a href="http://r-pkgs.had.co.nz/tests.html">testing</a> in his R-packages book.</p>
<p>Each test should cover a single unit of functionality and if the test fails, you should easily know the underlying cause and know where/how to find/fix the issue. Each test name should complete the sentence “Test that …” so that when we run the unit testing and something fails, we know exactly which test failed and what the underlying problem is.</p>
<p>Now that we have the testing setup built, the work flow is simple:</p>
<ol style="list-style-type: decimal">
<li>Edit/modify your code or test definitions.</li>
<li>Test your package with <code>Ctrl/Cmd + Shift + T</code> or <code>devtools::test()</code>. This causes all of your functions to be re-created (thus capturing any new changes to the functions) and then runs the testing commands.</li>
<li>Repeat until all tests pass and there are no new test cases to implement.</li>
</ol>
</div>
<div id="the-description-file" class="section level2">
<h2><span class="header-section-number">15.5</span> The DESCRIPTION file</h2>
<p>I never write the DESCRIPTION file from scratch, but rather it is generated it from a template when the package structure is initially created. It is useful to go into this file and edit it.</p>
<div class="sourceCode" id="cb798"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb798-1"><a href="15-r-packages.html#cb798-1"></a>Package<span class="op">:</span><span class="st"> </span>MyAwesomePackage</span>
<span id="cb798-2"><a href="15-r-packages.html#cb798-2"></a>Title<span class="op">:</span><span class="st"> </span>What the Package <span class="kw">Does</span> (One Line, Title Case)</span>
<span id="cb798-3"><a href="15-r-packages.html#cb798-3"></a>Version<span class="op">:</span><span class="st"> </span><span class="dv">0</span>.<span class="dv">0</span>.<span class="fl">0.9000</span></span>
<span id="cb798-4"><a href="15-r-packages.html#cb798-4"></a>Authors<span class="op">@</span>R<span class="op">:</span><span class="st"> </span></span>
<span id="cb798-5"><a href="15-r-packages.html#cb798-5"></a><span class="st">    </span><span class="kw">person</span>(<span class="dt">given =</span> <span class="st">&quot;First&quot;</span>,</span>
<span id="cb798-6"><a href="15-r-packages.html#cb798-6"></a>           <span class="dt">family =</span> <span class="st">&quot;Last&quot;</span>,</span>
<span id="cb798-7"><a href="15-r-packages.html#cb798-7"></a>           <span class="dt">role =</span> <span class="kw">c</span>(<span class="st">&quot;aut&quot;</span>, <span class="st">&quot;cre&quot;</span>),</span>
<span id="cb798-8"><a href="15-r-packages.html#cb798-8"></a>           <span class="dt">email =</span> <span class="st">&quot;first.last@example.com&quot;</span>,</span>
<span id="cb798-9"><a href="15-r-packages.html#cb798-9"></a>           <span class="dt">comment =</span> <span class="kw">c</span>(<span class="dt">ORCID =</span> <span class="st">&quot;YOUR-ORCID-ID&quot;</span>))</span>
<span id="cb798-10"><a href="15-r-packages.html#cb798-10"></a>Description<span class="op">:</span><span class="st"> </span>What the package <span class="kw">does</span> (one paragraph).</span>
<span id="cb798-11"><a href="15-r-packages.html#cb798-11"></a>License<span class="op">:</span><span class="st"> </span>What license it uses</span>
<span id="cb798-12"><a href="15-r-packages.html#cb798-12"></a>Encoding<span class="op">:</span><span class="st"> </span>UTF<span class="dv">-8</span></span>
<span id="cb798-13"><a href="15-r-packages.html#cb798-13"></a>LazyData<span class="op">:</span><span class="st"> </span>true  </span></code></pre></div>
<p>Often you want to have your package include other libraries so that the packages are available to be used in any functions you use. To do this, you’ll add lines to the description file.</p>
<div class="sourceCode" id="cb799"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb799-1"><a href="15-r-packages.html#cb799-1"></a>Depends<span class="op">:</span><span class="st"> </span>magrittr     </span>
<span id="cb799-2"><a href="15-r-packages.html#cb799-2"></a>Imports<span class="op">:</span><span class="st"> </span>dplyr, ggplot2, tidyr</span>
<span id="cb799-3"><a href="15-r-packages.html#cb799-3"></a>Suggests<span class="op">:</span><span class="st"> </span>lme4</span></code></pre></div>
<p>In this example, I’ve included a dependency on the <code>magrittr</code> package, which defines the <code>%&gt;%</code> operator, while <code>dplyr</code>, <code>ggplot2</code>, <code>tidyr</code>, and <code>lme4</code> packages are included in a slightly different manner.</p>
<table>
<colgroup>
<col width="28%" />
<col width="71%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Package Dependency Type</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center"><code>Depends</code></td>
<td align="left">These packages are required to have been downloaded from CRAN and will be attached to the namespace when your package is loaded. If your package is going to be widely used, you want to keep this list as short as possible to avoid function name clashes.</td>
</tr>
<tr class="even">
<td align="center"><code>Imports</code></td>
<td align="left">These packages are required be present on the computer, but will <strong>not</strong> be attached to the namespace. Whenever you want to use them you must use then in one of your functions, you’ll need to use <code>PackageName::FunctionName</code> syntax.</td>
</tr>
<tr class="odd">
<td align="center"><code>Suggests</code></td>
<td align="left">These packages are not required. Often these are packages of data that are only used in the examples, the unit tests, or in a vignette. These are not loaded/attached by default.</td>
</tr>
</tbody>
</table>
<p>For widely distributed packages, using <code>Imports</code> is the preferred way to utilize other packages in your code to avoid namespace problems. For example, because packages <code>MASS</code> and <code>dplyr</code> both have a <code>select()</code> function, it is advisable to avoid depending on <code>dplyr</code> just in case the user also has loaded the <code>MASS</code> package. However, this choice is annoying because I then have to use <code>PackageName::FunctionName()</code> syntax within all of the functions within your package.</p>
<p>For a data analysis package, I usually leave the Depends/Imports/Suggests blank and just load whatever analysis packages I need in the RMarkdown files that live in the <code>docs/</code> directory.</p>
</div>
<div id="sharing-your-package" class="section level2">
<h2><span class="header-section-number">15.6</span> Sharing your Package</h2>
<p>The last step to a package is being able to share it with other people. We could either wrap up the package into a <code>.tar.gz</code> file or we could save the package to some version control platform like <code>GitHub</code>. For packages that are in a stable form and need to be available via <code>CRAN</code> or Bioconductor, then building a <code>.tar.gz</code> file is important. However when a package is just meant for yourself and your collaborators, I prefer to save the package to <code>GitHub</code>.</p>
<p>I have several packages available on my <code>GitHub</code> account. I have a repository
<a href="https://github.com/dereksonderegger/TestPackage">https://github.com/dereksonderegger/TestPackage</a> that demonstrates a very simple package. To install this package, we can install it directly using the following:</p>
<div class="sourceCode" id="cb800"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb800-1"><a href="15-r-packages.html#cb800-1"></a>devtools<span class="op">::</span><span class="kw">install_github</span>(<span class="st">&#39;dereksonderegger/TestPackage&#39;</span>)</span></code></pre></div>
<p>If you chose to share your package with others by sharing a <code>.tar.gz</code> file, then create the file using the <code>Build</code> tab and <code>More -&gt; Build Source Package</code>. Then to install the package, the user will run the R command</p>
<div class="sourceCode" id="cb801"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb801-1"><a href="15-r-packages.html#cb801-1"></a><span class="kw">install.packages</span>(<span class="st">&#39;TestPackage_0.0.0.1.tar.gz&#39;</span>, <span class="dt">repos=</span><span class="ot">NULL</span>, <span class="dt">type=</span><span class="st">&#39;source&#39;</span>)</span></code></pre></div>
</div>
<div id="an-example-package" class="section level2">
<h2><span class="header-section-number">15.7</span> An Example Package</h2>
<p>I find it is easiest to use RStudio to start a new package via <code>File -&gt; New Project ...</code> and then start a project in a <code>new directory</code> and finally select that we want a new <code>R package</code>.</p>
<p>Alternatively we could use the <code>usethis::create_package()</code> function to build the minimal package.</p>
<div class="sourceCode" id="cb802"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb802-1"><a href="15-r-packages.html#cb802-1"></a>usethis<span class="op">::</span><span class="kw">create_package</span>(<span class="st">&#39;~/GitHub/TestPackage&#39;</span>)  <span class="co"># replace the path to where you want it...</span></span></code></pre></div>
<p>Once the package is created:</p>
<ol style="list-style-type: decimal">
<li><p>Put any <code>.csv</code> or <code>.xls</code> data files you have in <code>data-raw/</code> sub-directory. For this example, save the file <a href="FlagMaxTemp.csv">https://raw.githubusercontent.com/dereksonderegger/444/master/data-raw/FlagMaxTemp.csv</a> from the STA 444/5 Github page. In the same <code>data-raw</code> directory, create a R script or Rmarkdown file that reads the data in, cleans it up by renaming columns, or whatever. An example R script might look something like this:</p>
<pre class="text"><code>library(tidyverse)

# Read in the data.  Do some cleaning/verification
MaxTemp &lt;- read.csv(&#39;data-raw/FlagMaxTemp.csv&#39;) %&gt;%
  gather(&#39;DOM&#39;, &#39;MaxTemp&#39;, X1:X31) %&gt;%            
  drop_na() %&gt;%
  mutate(DOM  = str_remove(DOM, fixed(&#39;X&#39;)) ) %&gt;%  
  mutate(Date = lubridate::ymd( paste( Year, Month, DOM )) ) %&gt;%
  select(Date, MaxTemp)

# Save the data frame to the data/ directory as MaxTemp.rda
usethis::use_data(MaxTemp)</code></pre></li>
<li><p>In the <code>R/</code> directory, create file <code>MaxTemp.R</code> and when the package is built, this will document the dataset.</p>
<pre class="text"><code>#&#39; A time series of daily maximum temperatures in Flagstaff, AZ. 
#&#39; 
#&#39; @format a data frame with 10882 observations 
#&#39; \describe{
#&#39;   \item{Date}{The date of observation as a POSIX date format.}
#&#39;   \item{MaxTemp}{Daily maximum temperature in degrees Farhenheit.}
#&#39; }
#&#39; @source \url{www.ncdc.noaa.gov}
&quot;MaxTemp&quot;</code></pre></li>
<li><p>Build the package by going to <code>Build</code> tab.</p>
<ol style="list-style-type: lower-alpha">
<li>Create the Documentation.
<ol style="list-style-type: lower-roman">
<li>The first time, you’ll need to enable <code>Oxygen</code> style documentation. Do this by clicking <code>Build</code> tab, then click <code>More</code> -&gt; <code>Configure Build Tools</code>. Finally select the tick-box to build documentation using <code>ROxygen</code>.</li>
<li>Click the <code>More</code> and select <code>Document</code> to create the data frame documentation. The shortcut is <code>Ctrl/Cmd Shift D</code>.</li>
</ol></li>
<li>Install the package.
<ol style="list-style-type: lower-roman">
<li>Click the <code>Install and Restart</code> to build the package. The shortcut is <code>Ctrl/Cmd Shift B</code>.</li>
</ol></li>
</ol></li>
<li><p>Create the <code>docs/</code> directory and then create a RMarkdown file that does some analysis.</p>
<pre class="text"><code>---
title: &quot;My Awesome Analysis&quot;
author: &quot;Derek Sonderegger&quot;
date: &quot;9/18/2019&quot;
output: html_document
---

This Rmarkdown file will do the analysis.

```{r, eval=FALSE}
library(TestPackage)   # load TestPackage, which includes MaxTemp data frame.
library(ggplot2)

ggplot(MaxTemp, aex(x=Date, y=MaxTemp)) +
  geom_line()
```

We see that the daily max temperature in Flagstaff varies quite a lot.</code></pre></li>
</ol>
</div>
<div id="exercises-15" class="section level2">
<h2><span class="header-section-number">15.8</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li>Build a package that contains a dataset that gives weather information at Flagstaff’s Pulliam Airport from 1950 to 2019. I have the data and metadata on my <a href="https://github.com/dereksonderegger/444">GitHub</a> site and I downloaded the data on 9-19-19 from <a href="https://www.ncdc.noaa.gov/cdo-web/search" class="uri">https://www.ncdc.noaa.gov/cdo-web/search</a>. In the <code>data-raw</code> directory, there are files <code>Pulliam_Airport_Weather_Station.csv</code> and its associated metadata <code>Pulliam_Airport_Weather_Station_Metadata.csv</code>. In the data, there are a bunch of columns that contain attribute information about the preceding column, I don’t think those are helpful, or at least the metadata didn’t explain how to interpret them. So remove those. Many of the later columns have values that are exclusively ones or zeros. I believe those indicate if the weather phenomena was present that day. Presumably a <code>1</code> is a yes, but I don’t know that. When I downloaded the data, I asked for “standard” units, so precipitation and snow amounts should be in inches, and temperature should be in Fahrenheit. For this package, we only care about a couple of variables, <code>DATE</code>, <code>PRCP</code>, <code>SNOW</code>, <code>TMAX</code>, and <code>TMIN</code>.
<ol style="list-style-type: lower-alpha">
<li>Create a new package named <code>YourNameFlagWeather</code>. In the package, use <code>usethis::use_data_raw()</code> function to create the <code>data-raw/</code> directory. Place the data and metadata there.</li>
<li>Also in the <code>data-raw</code> directory, create an R-script that reads in the data and does any necessary cleaning. Call your resulting data frame <code>Flagstaff_Weather</code> and save a <code>.rda</code> file to the <code>data/</code> directory using the command <code>usethis::use_data(Flagstaff_Weather)</code>. For this package, we only care about a couple of variables, <code>DATE</code>, <code>PRCP</code>, <code>SNOW</code>, <code>TMAX</code>, and <code>TMIN</code>. Keep and document only these variables.</li>
<li>In the <code>R/</code> directory, create a file <code>Flagstaff_Weather.R</code> that documents where the data came from and what each of the columns mean.</li>
<li>Set RStudio to build documentation using Roxygen by clicking the <code>Build</code> tab, then <code>More -&gt; Configure Build Tools</code> and click the box for generating documentation with Roxygen. Select <code>OK</code> and then build the appropriate documentation file by clicking the <code>Build</code> tab, then <code>More -&gt; Document</code>.</li>
<li>Load your package and restart your session of R, again using the <code>Build tab</code>.</li>
<li>Create a new directory in your package called <code>docs/</code>. In that directory create a RMarkdown file that loads your package and uses the weather data to make a few graphs of weather phenomena over time.</li>
<li>Suppose that we decided to change something in the data and we need to rebuild the package.
<ol style="list-style-type: lower-roman">
<li>Changing the name of one of the columns in your cleaning script.<br />
</li>
<li>Re-run the cleaning script and the <code>usethis::use_data</code> command.</li>
<li>Re-install the package using the <code>Build</code> tab and <code>Install and Restart</code>.</li>
<li>Verify that the <code>Flagstaff_Weather</code> object has changed.</li>
<li>Verify that the documentation hasn’t changed yet.</li>
<li>Update the documentation file for the dataset and re-run the documentation routine.</li>
<li>Re-install the package and check that the documentation is now correct.</li>
</ol></li>
</ol></li>
<li>Recall writing the function <code>FizzBuzz</code> in the chapter on functions. We will add this function to our package and include both documentation and unit tests.
<ol style="list-style-type: lower-alpha">
<li>Copy your previously submitted <code>FizzBuzz</code> function into an R file in <code>R/FizzBuzz.R</code>.</li>
<li>Document what the function does, what its arguments are, and what its result should be.</li>
<li>Force your package to use unit testing by running the <code>usethis::use_testthat()</code>.</li>
<li>Add unit tests for testing that the length of the output is the same as the input <code>n</code>.</li>
<li>Add unit tests that address what should happen if the user inputs a negative, zero, or infinite value for <code>n</code>.</li>
<li>Modify your function so that if the user inputs a negative, zero, or infinite value for <code>n</code>, that the function throws and error using the command <code>stop('Error Message')</code>. Modify the error message appropriately for the input <code>n</code>. <em>Hint: there is a family of functions <code>is.XXX()</code> which test a variety of conditions. In particular there is a <code>is.infinite()</code> function.</em></li>
<li>Update your unit tests and make sure that the unit tests all pass.</li>
</ol></li>
<li>Now save the package as one file by building a source package using the <code>Build</code> tab, <code>More -&gt; Build Source Package</code>. This will create a <code>.tar.gz</code> file that you can easily upload to Bblearn.</li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="14-graphing-part-ii.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="16-data-scraping.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"],
"google": false,
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/dereksonderegger/444/raw/master/31_RPackages.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
