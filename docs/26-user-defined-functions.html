<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 26 User Defined Functions | STA 444/5 - Introductory Data Science using R</title>
  <meta name="description" content="Chapter 26 User Defined Functions | STA 444/5 - Introductory Data Science using R" />
  <meta name="generator" content="bookdown 0.12 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 26 User Defined Functions | STA 444/5 - Introductory Data Science using R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/Cover1.png" />
  
  <meta name="github-repo" content="dereksonderegger/444" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 26 User Defined Functions | STA 444/5 - Introductory Data Science using R" />
  
  
  <meta name="twitter:image" content="images/Cover1.png" />

<meta name="author" content="Derek L. Sonderegger" />


<meta name="date" content="2019-09-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="25-performance-issues-1.html">
<link rel="next" href="27-string-manipulation.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-resources"><i class="fa fa-check"></i>Other Resources</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgements"><i class="fa fa-check"></i>Acknowledgements</a></li>
</ul></li>
<li class="part"><span><b>Introduction</b></span></li>
<li class="chapter" data-level="1" data-path="1-familiarization.html"><a href="1-familiarization.html"><i class="fa fa-check"></i><b>1</b> Familiarization</a><ul>
<li class="chapter" data-level="1.1" data-path="1-familiarization.html"><a href="1-familiarization.html#r-file-types"><i class="fa fa-check"></i><b>1.1</b> R file Types</a><ul>
<li class="chapter" data-level="1.1.1" data-path="1-familiarization.html"><a href="1-familiarization.html#r-scripts-.r-files"><i class="fa fa-check"></i><b>1.1.1</b> R Scripts (.R files)</a></li>
<li class="chapter" data-level="1.1.2" data-path="1-familiarization.html"><a href="1-familiarization.html#r-markdown-.rmd-files"><i class="fa fa-check"></i><b>1.1.2</b> R Markdown (.Rmd files)</a></li>
<li class="chapter" data-level="1.1.3" data-path="1-familiarization.html"><a href="1-familiarization.html#r-notebooks-.rmd-files"><i class="fa fa-check"></i><b>1.1.3</b> R Notebooks (.Rmd files)</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="1-familiarization.html"><a href="1-familiarization.html#r-as-a-simple-calculator"><i class="fa fa-check"></i><b>1.2</b> R as a simple calculator</a></li>
<li class="chapter" data-level="1.3" data-path="1-familiarization.html"><a href="1-familiarization.html#assignment"><i class="fa fa-check"></i><b>1.3</b> Assignment</a></li>
<li class="chapter" data-level="1.4" data-path="1-familiarization.html"><a href="1-familiarization.html#vectors"><i class="fa fa-check"></i><b>1.4</b> Vectors</a></li>
<li class="chapter" data-level="1.5" data-path="1-familiarization.html"><a href="1-familiarization.html#packages"><i class="fa fa-check"></i><b>1.5</b> Packages</a></li>
<li class="chapter" data-level="1.6" data-path="1-familiarization.html"><a href="1-familiarization.html#finding-help"><i class="fa fa-check"></i><b>1.6</b> Finding Help</a><ul>
<li class="chapter" data-level="1.6.1" data-path="1-familiarization.html"><a href="1-familiarization.html#how-does-this-function-work"><i class="fa fa-check"></i><b>1.6.1</b> How does this function work?</a></li>
<li class="chapter" data-level="1.6.2" data-path="1-familiarization.html"><a href="1-familiarization.html#how-does-this-package-work"><i class="fa fa-check"></i><b>1.6.2</b> How does this package work?</a></li>
<li class="chapter" data-level="1.6.3" data-path="1-familiarization.html"><a href="1-familiarization.html#how-do-i-do-xxx"><i class="fa fa-check"></i><b>1.6.3</b> How do I do XXX?</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="1-familiarization.html"><a href="1-familiarization.html#exercises"><i class="fa fa-check"></i><b>1.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-data-frames.html"><a href="2-data-frames.html"><i class="fa fa-check"></i><b>2</b> Data Frames</a><ul>
<li class="chapter" data-level="2.1" data-path="2-data-frames.html"><a href="2-data-frames.html#introduction-to-importing-data"><i class="fa fa-check"></i><b>2.1</b> Introduction to Importing Data</a><ul>
<li class="chapter" data-level="2.1.1" data-path="2-data-frames.html"><a href="2-data-frames.html#from-a-package"><i class="fa fa-check"></i><b>2.1.1</b> From a Package</a></li>
<li class="chapter" data-level="2.1.2" data-path="2-data-frames.html"><a href="2-data-frames.html#import-from-.csv-or-.xls-files"><i class="fa fa-check"></i><b>2.1.2</b> Import from <code>.csv</code> or <code>.xls</code> files</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="2-data-frames.html"><a href="2-data-frames.html#data-types"><i class="fa fa-check"></i><b>2.2</b> Data Types</a></li>
<li class="chapter" data-level="2.3" data-path="2-data-frames.html"><a href="2-data-frames.html#basic-manipulation"><i class="fa fa-check"></i><b>2.3</b> Basic Manipulation</a></li>
<li class="chapter" data-level="2.4" data-path="2-data-frames.html"><a href="2-data-frames.html#exercises-1"><i class="fa fa-check"></i><b>2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-graphing.html"><a href="3-graphing.html"><i class="fa fa-check"></i><b>3</b> Graphing</a><ul>
<li class="chapter" data-level="3.1" data-path="3-graphing.html"><a href="3-graphing.html#basic-graphs"><i class="fa fa-check"></i><b>3.1</b> Basic Graphs</a><ul>
<li class="chapter" data-level="3.1.1" data-path="3-graphing.html"><a href="3-graphing.html#scatterplots"><i class="fa fa-check"></i><b>3.1.1</b> Scatterplots</a></li>
<li class="chapter" data-level="3.1.2" data-path="3-graphing.html"><a href="3-graphing.html#box-plots"><i class="fa fa-check"></i><b>3.1.2</b> Box Plots</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="3-graphing.html"><a href="3-graphing.html#labels"><i class="fa fa-check"></i><b>3.2</b> Labels</a></li>
<li class="chapter" data-level="3.3" data-path="3-graphing.html"><a href="3-graphing.html#annotation"><i class="fa fa-check"></i><b>3.3</b> Annotation</a></li>
<li class="chapter" data-level="3.4" data-path="3-graphing.html"><a href="3-graphing.html#faceting"><i class="fa fa-check"></i><b>3.4</b> Faceting</a></li>
<li class="chapter" data-level="3.5" data-path="3-graphing.html"><a href="3-graphing.html#exercises-2"><i class="fa fa-check"></i><b>3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-data-wrangling.html"><a href="4-data-wrangling.html"><i class="fa fa-check"></i><b>4</b> Data Wrangling</a><ul>
<li class="chapter" data-level="4.1" data-path="4-data-wrangling.html"><a href="4-data-wrangling.html#verbs"><i class="fa fa-check"></i><b>4.1</b> Verbs</a><ul>
<li class="chapter" data-level="4.1.1" data-path="4-data-wrangling.html"><a href="4-data-wrangling.html#subsetting"><i class="fa fa-check"></i><b>4.1.1</b> Subsetting</a></li>
<li class="chapter" data-level="4.1.2" data-path="4-data-wrangling.html"><a href="4-data-wrangling.html#arrange"><i class="fa fa-check"></i><b>4.1.2</b> <code>arrange()</code></a></li>
<li class="chapter" data-level="4.1.3" data-path="4-data-wrangling.html"><a href="4-data-wrangling.html#mutate"><i class="fa fa-check"></i><b>4.1.3</b> mutate()</a></li>
<li class="chapter" data-level="4.1.4" data-path="4-data-wrangling.html"><a href="4-data-wrangling.html#summarise"><i class="fa fa-check"></i><b>4.1.4</b> summarise()</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="4-data-wrangling.html"><a href="4-data-wrangling.html#split-apply-combine"><i class="fa fa-check"></i><b>4.2</b> Split, apply, combine</a></li>
<li class="chapter" data-level="4.3" data-path="4-data-wrangling.html"><a href="4-data-wrangling.html#exercises-3"><i class="fa fa-check"></i><b>4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-statistical-models.html"><a href="5-statistical-models.html"><i class="fa fa-check"></i><b>5</b> Statistical Models</a><ul>
<li class="chapter" data-level="5.1" data-path="5-statistical-models.html"><a href="5-statistical-models.html#formula-notation"><i class="fa fa-check"></i><b>5.1</b> Formula Notation</a></li>
<li class="chapter" data-level="5.2" data-path="5-statistical-models.html"><a href="5-statistical-models.html#basic-models"><i class="fa fa-check"></i><b>5.2</b> Basic Models</a><ul>
<li class="chapter" data-level="5.2.1" data-path="5-statistical-models.html"><a href="5-statistical-models.html#t-tests"><i class="fa fa-check"></i><b>5.2.1</b> t-tests</a></li>
<li class="chapter" data-level="5.2.2" data-path="5-statistical-models.html"><a href="5-statistical-models.html#lm-objects"><i class="fa fa-check"></i><b>5.2.2</b> lm objects</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="5-statistical-models.html"><a href="5-statistical-models.html#accessor-function"><i class="fa fa-check"></i><b>5.3</b> Accessor function</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-flow-control.html"><a href="6-flow-control.html"><i class="fa fa-check"></i><b>6</b> Flow Control</a><ul>
<li class="chapter" data-level="6.1" data-path="6-flow-control.html"><a href="6-flow-control.html#decision-statements"><i class="fa fa-check"></i><b>6.1</b> Decision statements</a><ul>
<li class="chapter" data-level="6.1.1" data-path="6-flow-control.html"><a href="6-flow-control.html#in-dplyr-wrangling"><i class="fa fa-check"></i><b>6.1.1</b> In dplyr wrangling</a></li>
<li class="chapter" data-level="6.1.2" data-path="6-flow-control.html"><a href="6-flow-control.html#general-if-else"><i class="fa fa-check"></i><b>6.1.2</b> General <code>if else</code></a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="6-flow-control.html"><a href="6-flow-control.html#loops"><i class="fa fa-check"></i><b>6.2</b> Loops</a><ul>
<li class="chapter" data-level="6.2.1" data-path="6-flow-control.html"><a href="6-flow-control.html#while-loops"><i class="fa fa-check"></i><b>6.2.1</b> <code>while</code> Loops</a></li>
<li class="chapter" data-level="6.2.2" data-path="6-flow-control.html"><a href="6-flow-control.html#for-loops"><i class="fa fa-check"></i><b>6.2.2</b> <code>for</code> Loops</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="6-flow-control.html"><a href="6-flow-control.html#exercises-4"><i class="fa fa-check"></i><b>6.3</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>Deeper Details</b></span></li>
<li class="chapter" data-level="7" data-path="7-factors.html"><a href="7-factors.html"><i class="fa fa-check"></i><b>7</b> Factors</a><ul>
<li class="chapter" data-level="7.1" data-path="7-factors.html"><a href="7-factors.html#how-factors-are-stored"><i class="fa fa-check"></i><b>7.1</b> How factors are stored</a></li>
<li class="chapter" data-level="7.2" data-path="7-factors.html"><a href="7-factors.html#using-forcats"><i class="fa fa-check"></i><b>7.2</b> Using <code>forcats</code></a></li>
</ul></li>
<li class="part"><span><b>Deeper Details</b></span></li>
<li class="chapter" data-level="8" data-path="8-factors-1.html"><a href="8-factors-1.html"><i class="fa fa-check"></i><b>8</b> Factors</a><ul>
<li class="chapter" data-level="8.1" data-path="8-factors-1.html"><a href="8-factors-1.html#how-factors-are-stored-1"><i class="fa fa-check"></i><b>8.1</b> How factors are stored</a></li>
<li class="chapter" data-level="8.2" data-path="8-factors-1.html"><a href="8-factors-1.html#using-forcats-1"><i class="fa fa-check"></i><b>8.2</b> Using <code>forcats</code></a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="9-data-import-and-tibbles.html"><a href="9-data-import-and-tibbles.html"><i class="fa fa-check"></i><b>9</b> Data Import and <code>tibbles</code></a><ul>
<li class="chapter" data-level="9.1" data-path="9-data-import-and-tibbles.html"><a href="9-data-import-and-tibbles.html#why-extend-the-data-frame"><i class="fa fa-check"></i><b>9.1</b> Why extend the data frame</a></li>
<li class="chapter" data-level="9.2" data-path="9-data-import-and-tibbles.html"><a href="9-data-import-and-tibbles.html#consistency"><i class="fa fa-check"></i><b>9.2</b> Consistency</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-data-wrangling-with-dplyr.html"><a href="10-data-wrangling-with-dplyr.html"><i class="fa fa-check"></i><b>10</b> Data Wrangling with <code>dplyr</code></a><ul>
<li class="chapter" data-level="10.1" data-path="10-data-wrangling-with-dplyr.html"><a href="10-data-wrangling-with-dplyr.html#conditional-selection-and-mutation"><i class="fa fa-check"></i><b>10.1</b> conditional selection and mutation</a></li>
<li class="chapter" data-level="10.2" data-path="10-data-wrangling-with-dplyr.html"><a href="10-data-wrangling-with-dplyr.html#reshaping"><i class="fa fa-check"></i><b>10.2</b> reshaping</a></li>
<li class="chapter" data-level="10.3" data-path="10-data-wrangling-with-dplyr.html"><a href="10-data-wrangling-with-dplyr.html#merges"><i class="fa fa-check"></i><b>10.3</b> merges</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-functions.html"><a href="11-functions.html"><i class="fa fa-check"></i><b>11</b> Functions</a></li>
<li class="chapter" data-level="12" data-path="12-strings-via-stringr.html"><a href="12-strings-via-stringr.html"><i class="fa fa-check"></i><b>12</b> Strings via <code>stringr</code></a></li>
<li class="chapter" data-level="13" data-path="13-dates-via-lubridate.html"><a href="13-dates-via-lubridate.html"><i class="fa fa-check"></i><b>13</b> Dates via <code>lubridate</code></a></li>
<li class="chapter" data-level="14" data-path="14-more-graphing.html"><a href="14-more-graphing.html"><i class="fa fa-check"></i><b>14</b> More Graphing</a></li>
<li class="chapter" data-level="15" data-path="15-packages-1.html"><a href="15-packages-1.html"><i class="fa fa-check"></i><b>15</b> Packages</a></li>
<li class="chapter" data-level="16" data-path="16-performance-issues.html"><a href="16-performance-issues.html"><i class="fa fa-check"></i><b>16</b> Performance Issues</a></li>
<li class="part"><span><b>Deeper Details</b></span></li>
<li class="chapter" data-level="17" data-path="17-factors-2.html"><a href="17-factors-2.html"><i class="fa fa-check"></i><b>17</b> Factors</a><ul>
<li class="chapter" data-level="17.1" data-path="17-factors-2.html"><a href="17-factors-2.html#how-factors-are-stored-2"><i class="fa fa-check"></i><b>17.1</b> How factors are stored</a></li>
<li class="chapter" data-level="17.2" data-path="17-factors-2.html"><a href="17-factors-2.html#using-forcats-2"><i class="fa fa-check"></i><b>17.2</b> Using <code>forcats</code></a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="18-data-import-and-tibbles-1.html"><a href="18-data-import-and-tibbles-1.html"><i class="fa fa-check"></i><b>18</b> Data Import and <code>tibbles</code></a><ul>
<li class="chapter" data-level="18.1" data-path="18-data-import-and-tibbles-1.html"><a href="18-data-import-and-tibbles-1.html#why-extend-the-data-frame-1"><i class="fa fa-check"></i><b>18.1</b> Why extend the data frame</a></li>
<li class="chapter" data-level="18.2" data-path="18-data-import-and-tibbles-1.html"><a href="18-data-import-and-tibbles-1.html#consistency-1"><i class="fa fa-check"></i><b>18.2</b> Consistency</a></li>
</ul></li>
<li class="chapter" data-level="19" data-path="19-data-wrangling-with-dplyr-1.html"><a href="19-data-wrangling-with-dplyr-1.html"><i class="fa fa-check"></i><b>19</b> Data Wrangling with <code>dplyr</code></a><ul>
<li class="chapter" data-level="19.1" data-path="19-data-wrangling-with-dplyr-1.html"><a href="19-data-wrangling-with-dplyr-1.html#conditional-selection-and-mutation-1"><i class="fa fa-check"></i><b>19.1</b> conditional selection and mutation</a></li>
<li class="chapter" data-level="19.2" data-path="19-data-wrangling-with-dplyr-1.html"><a href="19-data-wrangling-with-dplyr-1.html#reshaping-1"><i class="fa fa-check"></i><b>19.2</b> reshaping</a></li>
<li class="chapter" data-level="19.3" data-path="19-data-wrangling-with-dplyr-1.html"><a href="19-data-wrangling-with-dplyr-1.html#merges-1"><i class="fa fa-check"></i><b>19.3</b> merges</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="20-functions-1.html"><a href="20-functions-1.html"><i class="fa fa-check"></i><b>20</b> Functions</a></li>
<li class="chapter" data-level="21" data-path="21-strings-via-stringr-1.html"><a href="21-strings-via-stringr-1.html"><i class="fa fa-check"></i><b>21</b> Strings via <code>stringr</code></a></li>
<li class="chapter" data-level="22" data-path="22-dates-via-lubridate-1.html"><a href="22-dates-via-lubridate-1.html"><i class="fa fa-check"></i><b>22</b> Dates via <code>lubridate</code></a></li>
<li class="chapter" data-level="23" data-path="23-more-graphing-1.html"><a href="23-more-graphing-1.html"><i class="fa fa-check"></i><b>23</b> More Graphing</a></li>
<li class="chapter" data-level="24" data-path="24-packages-2.html"><a href="24-packages-2.html"><i class="fa fa-check"></i><b>24</b> Packages</a></li>
<li class="chapter" data-level="25" data-path="25-performance-issues-1.html"><a href="25-performance-issues-1.html"><i class="fa fa-check"></i><b>25</b> Performance Issues</a></li>
<li class="chapter" data-level="26" data-path="26-user-defined-functions.html"><a href="26-user-defined-functions.html"><i class="fa fa-check"></i><b>26</b> User Defined Functions</a><ul>
<li class="chapter" data-level="26.1" data-path="26-user-defined-functions.html"><a href="26-user-defined-functions.html#basic-function-definition"><i class="fa fa-check"></i><b>26.1</b> Basic function definition</a></li>
<li class="chapter" data-level="26.2" data-path="26-user-defined-functions.html"><a href="26-user-defined-functions.html#parameter-defaults"><i class="fa fa-check"></i><b>26.2</b> Parameter Defaults</a></li>
<li class="chapter" data-level="26.3" data-path="26-user-defined-functions.html"><a href="26-user-defined-functions.html#ellipses"><i class="fa fa-check"></i><b>26.3</b> Ellipses</a></li>
<li class="chapter" data-level="26.4" data-path="26-user-defined-functions.html"><a href="26-user-defined-functions.html#function-overloading"><i class="fa fa-check"></i><b>26.4</b> Function Overloading</a></li>
<li class="chapter" data-level="26.5" data-path="26-user-defined-functions.html"><a href="26-user-defined-functions.html#scope"><i class="fa fa-check"></i><b>26.5</b> Scope</a></li>
<li class="chapter" data-level="26.6" data-path="26-user-defined-functions.html"><a href="26-user-defined-functions.html#exercises-5"><i class="fa fa-check"></i><b>26.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="27" data-path="27-string-manipulation.html"><a href="27-string-manipulation.html"><i class="fa fa-check"></i><b>27</b> String Manipulation</a><ul>
<li class="chapter" data-level="27.1" data-path="27-string-manipulation.html"><a href="27-string-manipulation.html#base-function"><i class="fa fa-check"></i><b>27.1</b> Base function</a></li>
<li class="chapter" data-level="27.2" data-path="27-string-manipulation.html"><a href="27-string-manipulation.html#package-stringr-basic-operations"><i class="fa fa-check"></i><b>27.2</b> Package <code>stringr</code>: basic operations</a><ul>
<li class="chapter" data-level="27.2.1" data-path="27-string-manipulation.html"><a href="27-string-manipulation.html#concatenating-with-str_c-or-str_join"><i class="fa fa-check"></i><b>27.2.1</b> Concatenating with <code>str_c()</code> or <code>str_join()</code></a></li>
<li class="chapter" data-level="27.2.2" data-path="27-string-manipulation.html"><a href="27-string-manipulation.html#calculating-string-length-with-str_length"><i class="fa fa-check"></i><b>27.2.2</b> Calculating string length with <code>str_length()</code></a></li>
<li class="chapter" data-level="27.2.3" data-path="27-string-manipulation.html"><a href="27-string-manipulation.html#extracting-substrings-with-str_sub"><i class="fa fa-check"></i><b>27.2.3</b> Extracting substrings with <code>str_sub()</code></a></li>
<li class="chapter" data-level="27.2.4" data-path="27-string-manipulation.html"><a href="27-string-manipulation.html#pad-a-string-with-str_pad"><i class="fa fa-check"></i><b>27.2.4</b> Pad a string with <code>str_pad()</code></a></li>
<li class="chapter" data-level="27.2.5" data-path="27-string-manipulation.html"><a href="27-string-manipulation.html#trim-a-string-with-str_trim"><i class="fa fa-check"></i><b>27.2.5</b> Trim a string with <code>str_trim()</code></a></li>
</ul></li>
<li class="chapter" data-level="27.3" data-path="27-string-manipulation.html"><a href="27-string-manipulation.html#package-stringr-pattern-matching"><i class="fa fa-check"></i><b>27.3</b> Package <code>stringr</code>: Pattern Matching</a><ul>
<li class="chapter" data-level="27.3.1" data-path="27-string-manipulation.html"><a href="27-string-manipulation.html#detecting-a-pattern-using-str_detect"><i class="fa fa-check"></i><b>27.3.1</b> Detecting a pattern using str_detect()</a></li>
<li class="chapter" data-level="27.3.2" data-path="27-string-manipulation.html"><a href="27-string-manipulation.html#locating-a-pattern-using-str_locate"><i class="fa fa-check"></i><b>27.3.2</b> Locating a pattern using str_locate()</a></li>
<li class="chapter" data-level="27.3.3" data-path="27-string-manipulation.html"><a href="27-string-manipulation.html#replacing-substrings-using-str_replace"><i class="fa fa-check"></i><b>27.3.3</b> Replacing substrings using <code>str_replace()</code></a></li>
<li class="chapter" data-level="27.3.4" data-path="27-string-manipulation.html"><a href="27-string-manipulation.html#splitting-into-substrings-using-str_split"><i class="fa fa-check"></i><b>27.3.4</b> Splitting into substrings using <code>str_split()</code></a></li>
</ul></li>
<li class="chapter" data-level="27.4" data-path="27-string-manipulation.html"><a href="27-string-manipulation.html#regular-expressions"><i class="fa fa-check"></i><b>27.4</b> Regular Expressions</a></li>
<li class="chapter" data-level="27.5" data-path="27-string-manipulation.html"><a href="27-string-manipulation.html#exercises-6"><i class="fa fa-check"></i><b>27.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="28" data-path="28-dates-and-times.html"><a href="28-dates-and-times.html"><i class="fa fa-check"></i><b>28</b> Dates and Times</a><ul>
<li class="chapter" data-level="28.1" data-path="28-dates-and-times.html"><a href="28-dates-and-times.html#creating-date-and-time-objects"><i class="fa fa-check"></i><b>28.1</b> Creating Date and Time objects</a></li>
<li class="chapter" data-level="28.2" data-path="28-dates-and-times.html"><a href="28-dates-and-times.html#extracting-information"><i class="fa fa-check"></i><b>28.2</b> Extracting information</a></li>
<li class="chapter" data-level="28.3" data-path="28-dates-and-times.html"><a href="28-dates-and-times.html#arithmetic-on-dates"><i class="fa fa-check"></i><b>28.3</b> Arithmetic on Dates</a></li>
<li class="chapter" data-level="28.4" data-path="28-dates-and-times.html"><a href="28-dates-and-times.html#exercises-7"><i class="fa fa-check"></i><b>28.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="29" data-path="29-speeding-up-r.html"><a href="29-speeding-up-r.html"><i class="fa fa-check"></i><b>29</b> Speeding up R</a><ul>
<li class="chapter" data-level="29.1" data-path="29-speeding-up-r.html"><a href="29-speeding-up-r.html#faster-for-loops"><i class="fa fa-check"></i><b>29.1</b> Faster for loops?</a></li>
<li class="chapter" data-level="29.2" data-path="29-speeding-up-r.html"><a href="29-speeding-up-r.html#vectorizing-loops"><i class="fa fa-check"></i><b>29.2</b> Vectorizing loops</a></li>
<li class="chapter" data-level="29.3" data-path="29-speeding-up-r.html"><a href="29-speeding-up-r.html#parallel-processing"><i class="fa fa-check"></i><b>29.3</b> Parallel Processing</a></li>
<li class="chapter" data-level="29.4" data-path="29-speeding-up-r.html"><a href="29-speeding-up-r.html#parallelizing-for-loops"><i class="fa fa-check"></i><b>29.4</b> Parallelizing for loops</a></li>
<li class="chapter" data-level="29.5" data-path="29-speeding-up-r.html"><a href="29-speeding-up-r.html#parallel-aware-functions"><i class="fa fa-check"></i><b>29.5</b> Parallel Aware Functions</a><ul>
<li class="chapter" data-level="29.5.1" data-path="29-speeding-up-r.html"><a href="29-speeding-up-r.html#bootboot"><i class="fa fa-check"></i><b>29.5.1</b> <code>boot::boot</code></a></li>
<li class="chapter" data-level="29.5.2" data-path="29-speeding-up-r.html"><a href="29-speeding-up-r.html#carettrain"><i class="fa fa-check"></i><b>29.5.2</b> <code>caret::train</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="30" data-path="30-rmarkdown-tricks.html"><a href="30-rmarkdown-tricks.html"><i class="fa fa-check"></i><b>30</b> Rmarkdown Tricks</a><ul>
<li class="chapter" data-level="30.1" data-path="30-rmarkdown-tricks.html"><a href="30-rmarkdown-tricks.html#mathematical-expressions"><i class="fa fa-check"></i><b>30.1</b> Mathematical expressions</a></li>
<li class="chapter" data-level="30.2" data-path="30-rmarkdown-tricks.html"><a href="30-rmarkdown-tricks.html#tables"><i class="fa fa-check"></i><b>30.2</b> Tables</a><ul>
<li class="chapter" data-level="30.2.1" data-path="30-rmarkdown-tricks.html"><a href="30-rmarkdown-tricks.html#simple-tables"><i class="fa fa-check"></i><b>30.2.1</b> Simple Tables</a></li>
<li class="chapter" data-level="30.2.2" data-path="30-rmarkdown-tricks.html"><a href="30-rmarkdown-tricks.html#grid-tables"><i class="fa fa-check"></i><b>30.2.2</b> Grid Tables</a></li>
<li class="chapter" data-level="30.2.3" data-path="30-rmarkdown-tricks.html"><a href="30-rmarkdown-tricks.html#pipe-tables"><i class="fa fa-check"></i><b>30.2.3</b> Pipe Tables</a></li>
</ul></li>
<li class="chapter" data-level="30.3" data-path="30-rmarkdown-tricks.html"><a href="30-rmarkdown-tricks.html#r-functions-to-produce-table-code."><i class="fa fa-check"></i><b>30.3</b> R functions to produce table code.</a><ul>
<li class="chapter" data-level="30.3.1" data-path="30-rmarkdown-tricks.html"><a href="30-rmarkdown-tricks.html#knitrkable"><i class="fa fa-check"></i><b>30.3.1</b> <code>knitr::kable</code></a></li>
<li class="chapter" data-level="30.3.2" data-path="30-rmarkdown-tricks.html"><a href="30-rmarkdown-tricks.html#package-pander"><i class="fa fa-check"></i><b>30.3.2</b> Package <code>pander</code></a></li>
</ul></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">STA 444/5 - Introductory Data Science using R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="user-defined-functions" class="section level1">
<h1><span class="header-section-number">Chapter 26</span> User Defined Functions</h1>
<p>It is very important to be able to define a piece of programing logic that is repeated often. For example, I don’t want to have to always program the mathematical code for calculating the sample variance of a vector of data. Instead I just want to call a function that does everything for me and I don’t have to worry about the details.</p>
<p>While hiding the computational details is nice, fundamentally writing functions allows us to think about our problems at a higher layer of abstraction. For example, most scientists just want to run a t-test on their data and get the appropriate p-value out; they want to focus on their problem and not how to calculate what the appropriate degrees of freedom are. Functions let us do that.</p>
<div id="basic-function-definition" class="section level2">
<h2><span class="header-section-number">26.1</span> Basic function definition</h2>
<p>In the course of your analysis, it can be useful to define your own functions. The format for defining your own function is</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb223-1" data-line-number="1">function.name &lt;-<span class="st"> </span><span class="cf">function</span>(arg1, arg2, arg3){</a>
<a class="sourceLine" id="cb223-2" data-line-number="2">  statement1</a>
<a class="sourceLine" id="cb223-3" data-line-number="3">  statement2</a>
<a class="sourceLine" id="cb223-4" data-line-number="4">}</a></code></pre></div>
<p>where <code>arg1</code> is the first argument passed to the function and <code>arg2</code> is the second.</p>
<p>To illustrate how to define your own function, we will define a variance calculating function.</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb224-1" data-line-number="1"><span class="co"># define my function</span></a>
<a class="sourceLine" id="cb224-2" data-line-number="2">my.var &lt;-<span class="st"> </span><span class="cf">function</span>(x){</a>
<a class="sourceLine" id="cb224-3" data-line-number="3">  n &lt;-<span class="st"> </span><span class="kw">length</span>(x)                <span class="co"># calculate sample size</span></a>
<a class="sourceLine" id="cb224-4" data-line-number="4">  xbar &lt;-<span class="st"> </span><span class="kw">mean</span>(x)               <span class="co"># calculate sample mean</span></a>
<a class="sourceLine" id="cb224-5" data-line-number="5">  SSE &lt;-<span class="st"> </span><span class="kw">sum</span>( (x<span class="op">-</span>xbar)<span class="op">^</span><span class="dv">2</span> )      <span class="co"># calculate sum of squared error</span></a>
<a class="sourceLine" id="cb224-6" data-line-number="6">  v &lt;-<span class="st"> </span>SSE <span class="op">/</span><span class="st"> </span>( n <span class="op">-</span><span class="st"> </span><span class="dv">1</span> )          <span class="co"># &quot;average&quot; squared error</span></a>
<a class="sourceLine" id="cb224-7" data-line-number="7">  <span class="kw">return</span>(v)                     <span class="co"># result of function is v</span></a>
<a class="sourceLine" id="cb224-8" data-line-number="8">}</a></code></pre></div>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb225-1" data-line-number="1"><span class="co"># create a vector that I wish to calculate the variance of</span></a>
<a class="sourceLine" id="cb225-2" data-line-number="2">test.vector &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">5</span>)</a>
<a class="sourceLine" id="cb225-3" data-line-number="3"></a>
<a class="sourceLine" id="cb225-4" data-line-number="4"><span class="co"># calculate the variance using my function</span></a>
<a class="sourceLine" id="cb225-5" data-line-number="5">calculated.var &lt;-<span class="st"> </span><span class="kw">my.var</span>( test.vector )</a>
<a class="sourceLine" id="cb225-6" data-line-number="6">calculated.var</a></code></pre></div>
<pre><code>## [1] 2.7</code></pre>
<p>Notice that even though I defined my function using <code>x</code> as my vector of data, and passed my function something named <code>test.vector</code>, R does the appropriate renaming.If my function doesn’t modify its input arguments, then R just passes a pointer to the inputs to avoid copying large amounts of data when you call a function. If your function modifies its input, then R will take the input data, copy it, and then pass that new copy to the function. This means that a function cannot modify its arguments. In Computer Science parlance, R does not allow for procedural side effects. Think of the variable <code>x</code> as a placeholder, with it being replaced by whatever gets passed into the function.</p>
<p>When I call a function, the function might cause something to happen (e.g. draw a plot) or it might do some calculates the result is returned by the function and we might want to save that. Inside a function, if I want the result of some calculation saved, I return the result as the output of the function. The way I specify to do this is via the <code>return</code> statement. (Actually R doesn’t completely require this. But the alternative method is less intuitive and I strongly recommend using the <code>return()</code> statement for readability.)</p>
<p>By writing a function, I can use the same chunk of code repeatedly. This means that I can do all my tedious calculations inside the function and just call the function whenever I want and happily ignore the details. Consider the function <code>t.test()</code> which we have used to do all the calculations in a t-test. We could write a similar function using the following code:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb227-1" data-line-number="1"><span class="co"># define my function</span></a>
<a class="sourceLine" id="cb227-2" data-line-number="2">one.sample.t.test &lt;-<span class="st"> </span><span class="cf">function</span>(input.data, mu0){</a>
<a class="sourceLine" id="cb227-3" data-line-number="3">  n    &lt;-<span class="st"> </span><span class="kw">length</span>(input.data)</a>
<a class="sourceLine" id="cb227-4" data-line-number="4">  xbar &lt;-<span class="st"> </span><span class="kw">mean</span>(input.data)</a>
<a class="sourceLine" id="cb227-5" data-line-number="5">  s    &lt;-<span class="st"> </span><span class="kw">sd</span>(input.data)</a>
<a class="sourceLine" id="cb227-6" data-line-number="6">  t    &lt;-<span class="st"> </span>(xbar <span class="op">-</span><span class="st"> </span>mu0)<span class="op">/</span>(s <span class="op">/</span><span class="st"> </span><span class="kw">sqrt</span>(n))</a>
<a class="sourceLine" id="cb227-7" data-line-number="7">  <span class="cf">if</span>( t <span class="op">&lt;</span><span class="st"> </span><span class="dv">0</span> ){</a>
<a class="sourceLine" id="cb227-8" data-line-number="8">    p.value &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span><span class="kw">pt</span>(t, <span class="dt">df=</span>n<span class="dv">-1</span>)</a>
<a class="sourceLine" id="cb227-9" data-line-number="9">  }<span class="cf">else</span>{</a>
<a class="sourceLine" id="cb227-10" data-line-number="10">    p.value &lt;-<span class="st"> </span><span class="dv">2</span> <span class="op">*</span><span class="st"> </span>(<span class="dv">1</span><span class="op">-</span><span class="kw">pt</span>(t, <span class="dt">df=</span>n<span class="dv">-1</span>))</a>
<a class="sourceLine" id="cb227-11" data-line-number="11">  }</a>
<a class="sourceLine" id="cb227-12" data-line-number="12">  <span class="co"># we haven&#39;t addressed how to print things in a organized </span></a>
<a class="sourceLine" id="cb227-13" data-line-number="13">  <span class="co"># fashion, the following is ugly, but works...</span></a>
<a class="sourceLine" id="cb227-14" data-line-number="14">  <span class="co"># Notice that this function returns a character string</span></a>
<a class="sourceLine" id="cb227-15" data-line-number="15">  <span class="co"># with the necessary information in the string.</span></a>
<a class="sourceLine" id="cb227-16" data-line-number="16">  <span class="kw">return</span>( <span class="kw">paste</span>(<span class="st">&#39;t =&#39;</span>, t, <span class="st">&#39; and p.value =&#39;</span>, p.value) )</a>
<a class="sourceLine" id="cb227-17" data-line-number="17">}</a></code></pre></div>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb228-1" data-line-number="1"><span class="co"># create a vector that I wish apply a one-sample t-test on.</span></a>
<a class="sourceLine" id="cb228-2" data-line-number="2">test.data &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">4</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>)</a>
<a class="sourceLine" id="cb228-3" data-line-number="3"><span class="kw">one.sample.t.test</span>( test.data, <span class="dt">mu0=</span><span class="dv">2</span> )</a></code></pre></div>
<pre><code>## [1] &quot;t = 3.15682074900988  and p.value = 0.00826952416706961&quot;</code></pre>
<p>Nearly every function we use to do data analysis is written in a similar fashion. Somebody decided it would be convenient to have a function that did an ANOVA analysis and they wrote something similar to the above function, but is a bit grander in scope. Even if you don’t end up writing any of your own functions, knowing how to will help you understand why certain functions you use are designed the way they are.</p>
</div>
<div id="parameter-defaults" class="section level2">
<h2><span class="header-section-number">26.2</span> Parameter Defaults</h2>
<p>When I define a function and can let it take as many arguments as I want and I can also give default values to the arguments. For example we can define the normal density function using the following code which gives a default mean of <span class="math inline">\(0\)</span> and default standard deviation of <span class="math inline">\(1\)</span>.</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb230-1" data-line-number="1"><span class="co"># a function that defines the shape of a normal distribution.</span></a>
<a class="sourceLine" id="cb230-2" data-line-number="2"><span class="co"># by including mu=0, we give a default value that the function</span></a>
<a class="sourceLine" id="cb230-3" data-line-number="3"><span class="co"># user can override</span></a>
<a class="sourceLine" id="cb230-4" data-line-number="4">dnorm.alternate &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">mu=</span><span class="dv">0</span>, <span class="dt">sd=</span><span class="dv">1</span>){</a>
<a class="sourceLine" id="cb230-5" data-line-number="5">  out &lt;-<span class="st"> </span><span class="dv">1</span> <span class="op">/</span><span class="st"> </span>(sd <span class="op">*</span><span class="st"> </span><span class="kw">sqrt</span>(<span class="dv">2</span><span class="op">*</span>pi)) <span class="op">*</span><span class="st"> </span><span class="kw">exp</span>( <span class="op">-</span>(x<span class="op">-</span>mu)<span class="op">^</span><span class="dv">2</span> <span class="op">/</span><span class="st"> </span>(<span class="dv">2</span> <span class="op">*</span><span class="st"> </span>sd<span class="op">^</span><span class="dv">2</span>) )</a>
<a class="sourceLine" id="cb230-6" data-line-number="6">  <span class="kw">return</span>(out)</a>
<a class="sourceLine" id="cb230-7" data-line-number="7">}</a></code></pre></div>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb231-1" data-line-number="1"><span class="co"># test the function to see if it works</span></a>
<a class="sourceLine" id="cb231-2" data-line-number="2"><span class="kw">dnorm.alternate</span>(<span class="dv">1</span>)</a></code></pre></div>
<pre><code>## [1] 0.2419707</code></pre>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb233-1" data-line-number="1"><span class="kw">dnorm.alternate</span>(<span class="dv">1</span>, <span class="dt">mu=</span><span class="dv">1</span>)</a></code></pre></div>
<pre><code>## [1] 0.3989423</code></pre>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb235-1" data-line-number="1"><span class="co"># Lets test the function a bit more by drawing the height</span></a>
<a class="sourceLine" id="cb235-2" data-line-number="2"><span class="co"># of the normal distribution a lots of different points</span></a>
<a class="sourceLine" id="cb235-3" data-line-number="3"><span class="co"># ... First the standard normal!</span></a>
<a class="sourceLine" id="cb235-4" data-line-number="4">x &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="op">-</span><span class="dv">3</span>, <span class="dv">3</span>, <span class="dt">length=</span><span class="dv">601</span>)</a>
<a class="sourceLine" id="cb235-5" data-line-number="5"><span class="kw">plot</span>( x, <span class="kw">dnorm.alternate</span>(x) )  <span class="co"># use default mu=0, sd=1</span></a></code></pre></div>
<p><img src="10_Functions_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb236-1" data-line-number="1"><span class="co"># next a normal with mean 1, and standard deviation 1</span></a>
<a class="sourceLine" id="cb236-2" data-line-number="2"><span class="kw">plot</span>( x, <span class="kw">dnorm.alternate</span>(x, <span class="dt">mu=</span><span class="dv">1</span>) ) <span class="co"># override mu, but use sd=1</span></a></code></pre></div>
<p><img src="10_Functions_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>Many functions that we use have defaults that we don’t normally mess with. For example, the function <code>mean()</code> has an option the specifies what it should do if your vector of data has missing data. The common solution is to remove those observations, but we might have wanted to say that the mean is unknown one component of it was unknown.</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb237-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="ot">NA</span>)     <span class="co"># fourth element is missing</span></a>
<a class="sourceLine" id="cb237-2" data-line-number="2"><span class="kw">mean</span>(x)              <span class="co"># default is to return NA if any element is missing</span></a></code></pre></div>
<pre><code>## [1] NA</code></pre>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb239-1" data-line-number="1"><span class="kw">mean</span>(x, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)  <span class="co"># Only average the non-missing data</span></a></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>As you look at the help pages for different functions, you’ll see in the function definitions what the default values are. For example, the function <code>mean</code> has another option, <code>trim</code>, which specifies what percent of the data to trim at the extremes. Because we would expect mean to not do any trimming by default, the authors have appropriately defined the default amount of trimming to be zero via the definition <code>trim=0</code>.</p>
</div>
<div id="ellipses" class="section level2">
<h2><span class="header-section-number">26.3</span> Ellipses</h2>
<p>When writing functions, I occasionally have a situation where I call function <code>a()</code> and function <code>a()</code> needs to call another function, say <code>b()</code>, and I want to pass an unusual parameter to that function. To do this, I’ll use a set of three periods called an <em>ellipses</em>. What these do is represent a set of parameter values that will be passed along to a subsequent function.For example the following code takes the result of a simple linear regression and plots the data and the regression line and confidence region (basically I’m recreating a function that does the same thing as ggplot2’s geom_smooth() layer). I might not want to specify (and give good defaults) to every single graphical parameter that the plot() function supports. Instead I’ll just use the ‘…’ argument and pass any additional parameters to the plot function.</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb241-1" data-line-number="1"><span class="co"># a function that draws the regression line and confidence interval</span></a>
<a class="sourceLine" id="cb241-2" data-line-number="2"><span class="co"># notice it doesn&#39;t return anything... all it does is draw a plot</span></a>
<a class="sourceLine" id="cb241-3" data-line-number="3">show.lm &lt;-<span class="st"> </span><span class="cf">function</span>(m, <span class="dt">interval.type=</span><span class="st">&#39;confidence&#39;</span>, <span class="dt">fill.col=</span><span class="st">&#39;light grey&#39;</span>, ...){</a>
<a class="sourceLine" id="cb241-4" data-line-number="4">  x &lt;-<span class="st"> </span>m<span class="op">$</span>model[,<span class="dv">2</span>]       <span class="co"># extract the predictor variable</span></a>
<a class="sourceLine" id="cb241-5" data-line-number="5">  y &lt;-<span class="st"> </span>m<span class="op">$</span>model[,<span class="dv">1</span>]       <span class="co"># extract the response</span></a>
<a class="sourceLine" id="cb241-6" data-line-number="6">  pred &lt;-<span class="st"> </span><span class="kw">predict</span>(m, <span class="dt">interval=</span>interval.type)</a>
<a class="sourceLine" id="cb241-7" data-line-number="7">  <span class="kw">plot</span>(x, y, ...)</a>
<a class="sourceLine" id="cb241-8" data-line-number="8">  <span class="kw">polygon</span>( <span class="kw">c</span>(x,<span class="kw">rev</span>(x)),                         <span class="co"># draw the ribbon defined</span></a>
<a class="sourceLine" id="cb241-9" data-line-number="9">           <span class="kw">c</span>(pred[,<span class="st">&#39;lwr&#39;</span>], <span class="kw">rev</span>(pred[,<span class="st">&#39;upr&#39;</span>])),  <span class="co"># by lwr and upr - polygon</span></a>
<a class="sourceLine" id="cb241-10" data-line-number="10">           <span class="dt">col=</span><span class="st">&#39;light grey&#39;</span>)                    <span class="co"># fills in the region defined by            </span></a>
<a class="sourceLine" id="cb241-11" data-line-number="11">  <span class="kw">lines</span>(x, pred[, <span class="st">&#39;fit&#39;</span>])                       <span class="co"># a set of vertices, need to reverse            </span></a>
<a class="sourceLine" id="cb241-12" data-line-number="12">  <span class="kw">points</span>(x, y)                                 <span class="co"># the uppers to make a nice figure</span></a>
<a class="sourceLine" id="cb241-13" data-line-number="13">} </a></code></pre></div>
<p>This function looks daunting, but we experiment to see what it does.</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb242-1" data-line-number="1"><span class="co"># first define a simple linear model from our cherry tree data</span></a>
<a class="sourceLine" id="cb242-2" data-line-number="2">m &lt;-<span class="st"> </span><span class="kw">lm</span>( Volume <span class="op">~</span><span class="st"> </span>Girth, <span class="dt">data=</span>trees )</a>
<a class="sourceLine" id="cb242-3" data-line-number="3"></a>
<a class="sourceLine" id="cb242-4" data-line-number="4"><span class="co"># call the function with no extraneous parameters</span></a>
<a class="sourceLine" id="cb242-5" data-line-number="5"><span class="kw">show.lm</span>( m )</a></code></pre></div>
<p><img src="10_Functions_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb243-1" data-line-number="1"><span class="co"># Pass arguments that will just be passed along to the plot function</span></a>
<a class="sourceLine" id="cb243-2" data-line-number="2"><span class="kw">show.lm</span>( m, <span class="dt">xlab=</span><span class="st">&#39;Girth&#39;</span>, <span class="dt">ylab=</span><span class="st">&#39;Volume&#39;</span>, </a>
<a class="sourceLine" id="cb243-3" data-line-number="3">         <span class="dt">main=</span><span class="st">&#39;Relationship between Girth and Volume&#39;</span>)</a></code></pre></div>
<p><img src="10_Functions_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>This type of trick is done commonly. Look at the help files for <code>hist()</code> and <code>qqnorm()</code> and you’ll see the ellipses used to pass graphical parameters along to sub-functions. Functions like <code>lm()</code> use the ellipses to pass arguments to the low level regression fitting functions that do the actual calculations. By only including these parameters via the ellipses, must users won’t be tempted to mess with the parameters, but experts who know the nitty-gritty details can still modify those parameters.</p>
</div>
<div id="function-overloading" class="section level2">
<h2><span class="header-section-number">26.4</span> Function Overloading</h2>
<p>Frequently the user wants to inspect the results of some calculation and display a variable or object to the screen. The <code>print()</code> function does exactly that, but it acts differently for matrices than it does for vectors. It especially acts different for lists that I obtained from a call like <code>lm()</code> or <code>aov()</code>.</p>
<p>The reason that the print function can act differently depending on the object type that I pass it is because the function <code>print()</code> is <em>overloaded</em>. What this means is that there is a <code>print.lm()</code> function that is called whenever I call <code>print(obj)</code> when <code>obj</code> is the output of an <code>lm()</code> command.</p>
<p>Recall that we initially introduced a few different classes of data, Numerical, Factors, and Logicals. It turns out that I can create more types of classes.</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb244-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a>
<a class="sourceLine" id="cb244-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="dv">3</span><span class="op">+</span><span class="dv">2</span><span class="op">*</span>x<span class="op">+</span><span class="kw">rnorm</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb244-3" data-line-number="3"></a>
<a class="sourceLine" id="cb244-4" data-line-number="4">h &lt;-<span class="st"> </span><span class="kw">hist</span>(y)  <span class="co"># h should be of class &quot;Histogram&quot;</span></a></code></pre></div>
<p><img src="10_Functions_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb245-1" data-line-number="1"><span class="kw">class</span>(h)</a></code></pre></div>
<pre><code>## [1] &quot;histogram&quot;</code></pre>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb247-1" data-line-number="1">model &lt;-<span class="st"> </span><span class="kw">lm</span>( y <span class="op">~</span><span class="st"> </span>x ) <span class="co"># model is something of class &quot;lm&quot;</span></a>
<a class="sourceLine" id="cb247-2" data-line-number="2"><span class="kw">class</span>(model)</a></code></pre></div>
<pre><code>## [1] &quot;lm&quot;</code></pre>
<p>Many common functions such as <code>plot()</code> are overloaded so that when I call the plot function with an object, it will in turn call <code>plot.lm()</code> or <code>plot.histogram()</code> as appropriate. When building statistical models I am often interested in different quantities and would like to get those regardless of the model I am using. Below are a list of functions that work whether I fit a model via <code>aov()</code>, <code>lm()</code>, <code>glm()</code>, or <code>gam()</code>.</p>
<table style="width:64%;">
<colgroup>
<col width="31%" />
<col width="31%" />
</colgroup>
<thead>
<tr class="header">
<th>Quantity</th>
<th>Function Name</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Residuals</td>
<td><code>resid( obj )</code></td>
</tr>
<tr class="even">
<td>Model Coefficients</td>
<td><code>coef( obj )</code></td>
</tr>
<tr class="odd">
<td>Summary Table</td>
<td><code>summary( obj )</code></td>
</tr>
<tr class="even">
<td>ANOVA Table</td>
<td><code>anova( obj )</code></td>
</tr>
<tr class="odd">
<td>AIC value</td>
<td><code>AIC( obj )</code></td>
</tr>
</tbody>
</table>
<p>For the residual function, there exists a <code>resid.lm()</code> function, and <code>resid.gam()</code> and it is these functions are called when we run the command <code>resid( obj )</code>.</p>
</div>
<div id="scope" class="section level2">
<h2><span class="header-section-number">26.5</span> Scope</h2>
<p>Consider the case where we make a function that calculates the trimmed mean. A good implementation of the function is given here.</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb249-1" data-line-number="1"><span class="co"># Define a function for the trimmed mean</span></a>
<a class="sourceLine" id="cb249-2" data-line-number="2"><span class="co"># x: vector of values to be averaged</span></a>
<a class="sourceLine" id="cb249-3" data-line-number="3"><span class="co"># k: the number of elements to trim on either side</span></a>
<a class="sourceLine" id="cb249-4" data-line-number="4">trimmed.mean &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">k=</span><span class="dv">0</span>){</a>
<a class="sourceLine" id="cb249-5" data-line-number="5">  x &lt;-<span class="st"> </span><span class="kw">sort</span>(x)      <span class="co"># arrange the input according magnitude</span></a>
<a class="sourceLine" id="cb249-6" data-line-number="6">  n &lt;-<span class="st"> </span><span class="kw">length</span>(x)    <span class="co"># n = how many observations</span></a>
<a class="sourceLine" id="cb249-7" data-line-number="7">  <span class="cf">if</span>( k <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>){</a>
<a class="sourceLine" id="cb249-8" data-line-number="8">    x &lt;-<span class="st"> </span>x[<span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span><span class="op">*</span>(<span class="dv">1</span><span class="op">:</span>k), <span class="dv">-1</span><span class="op">*</span>((n<span class="op">-</span>k<span class="op">+</span><span class="dv">1</span>)<span class="op">:</span>n))]  <span class="co"># remove first k, last k</span></a>
<a class="sourceLine" id="cb249-9" data-line-number="9">  }</a>
<a class="sourceLine" id="cb249-10" data-line-number="10">  tm &lt;-<span class="st"> </span><span class="kw">sum</span>(x) <span class="op">/</span><span class="st"> </span><span class="kw">length</span>(x)  <span class="co"># mean of the remaining observations</span></a>
<a class="sourceLine" id="cb249-11" data-line-number="11">  <span class="kw">return</span>( tm )</a>
<a class="sourceLine" id="cb249-12" data-line-number="12">} </a>
<a class="sourceLine" id="cb249-13" data-line-number="13"></a>
<a class="sourceLine" id="cb249-14" data-line-number="14">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">10</span><span class="op">:</span><span class="dv">1</span>,<span class="dv">50</span>)                        <span class="co"># 10, 9, 8, ..., 1</span></a>
<a class="sourceLine" id="cb249-15" data-line-number="15">output &lt;-<span class="st"> </span><span class="kw">trimmed.mean</span>(x, <span class="dt">k=</span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb249-16" data-line-number="16">output</a></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb251-1" data-line-number="1">x                                <span class="co"># x is unchanged</span></a></code></pre></div>
<pre><code>##  [1] 10  9  8  7  6  5  4  3  2  1 50</code></pre>
<p>Notice that even though I passed <code>x</code> into the function and then sorted it, <code>x</code> remained unsorted outside the function. When I modified <code>x</code>, R made a copy of <code>x</code> and sorted the <em>copy</em> that belonged to the function so that I didn’t modify a variable that was defined outside of the scope of my function. But what if I didn’t bother with passing x and k. If I don’t pass in the values of x and k, then R will try to find them in my current workspace.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb253-1" data-line-number="1"><span class="co"># a horribly defined function that has no parameters</span></a>
<a class="sourceLine" id="cb253-2" data-line-number="2"><span class="co"># but still accesses something called &quot;x&quot;</span></a>
<a class="sourceLine" id="cb253-3" data-line-number="3">trimmed.mean &lt;-<span class="st"> </span><span class="cf">function</span>(){</a>
<a class="sourceLine" id="cb253-4" data-line-number="4">  x &lt;-<span class="st"> </span><span class="kw">sort</span>(x)</a>
<a class="sourceLine" id="cb253-5" data-line-number="5">  n &lt;-<span class="st"> </span><span class="kw">length</span>(x)</a>
<a class="sourceLine" id="cb253-6" data-line-number="6">  <span class="cf">if</span>( k <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span>){</a>
<a class="sourceLine" id="cb253-7" data-line-number="7">    x &lt;-<span class="st"> </span>x[<span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span><span class="op">*</span>(<span class="dv">1</span><span class="op">:</span>k), <span class="dv">-1</span><span class="op">*</span>((n<span class="op">-</span>k<span class="op">+</span><span class="dv">1</span>)<span class="op">:</span>n))]</a>
<a class="sourceLine" id="cb253-8" data-line-number="8">  }</a>
<a class="sourceLine" id="cb253-9" data-line-number="9">  tm &lt;-<span class="st"> </span><span class="kw">sum</span>(x)<span class="op">/</span><span class="kw">length</span>(x)</a>
<a class="sourceLine" id="cb253-10" data-line-number="10">  <span class="kw">return</span>( tm )</a>
<a class="sourceLine" id="cb253-11" data-line-number="11">} </a>
<a class="sourceLine" id="cb253-12" data-line-number="12"></a>
<a class="sourceLine" id="cb253-13" data-line-number="13">x &lt;-<span class="st"> </span><span class="kw">c</span>( <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dv">50</span> )    <span class="co"># data to trim</span></a>
<a class="sourceLine" id="cb253-14" data-line-number="14">k &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb253-15" data-line-number="15"></a>
<a class="sourceLine" id="cb253-16" data-line-number="16"><span class="kw">trimmed.mean</span>()  <span class="co"># amazingly this still works</span></a></code></pre></div>
<pre><code>## [1] 6</code></pre>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb255-1" data-line-number="1"><span class="co"># but what if k wasn&#39;t defined?</span></a>
<a class="sourceLine" id="cb255-2" data-line-number="2"><span class="kw">rm</span>(k)           <span class="co"># remove k </span></a>
<a class="sourceLine" id="cb255-3" data-line-number="3"><span class="kw">trimmed.mean</span>()  <span class="co"># now the function can&#39;t find anything named k and throws and error.</span></a></code></pre></div>
<pre><code>## Error in trimmed.mean(): object &#39;k&#39; not found</code></pre>
<p>So if I forget to pass some variable into a function, but it happens to be defined outside the function, R will find it. It is not good practice to rely on that because how do I take the trimmed mean of a vector named z? Worse yet, what if the variable x changes between runs of your function? What should be consistently giving the same result keeps changing. This is especially insidious when you have defined most of the arguments the function uses, but missed one. Your function happily goes to the next higher scope and sometimes finds it.</p>
<p>When executing a function, R will have access to all the variables defined in the function, all the variables defined in the function that called your function and so on until the base workspace. However, you should never let your function refer to something that is not either created in your function or passed in via a parameter.</p>
</div>
<div id="exercises-5" class="section level2">
<h2><span class="header-section-number">26.6</span> Exercises</h2>
<ol style="list-style-type: decimal">
<li><p>Write a function that calculates the density function of a Uniform continuous variable on the interval <span class="math inline">\(\left(a,b\right)\)</span>. The function is defined as
<span class="math display">\[f\left(x\right)=\begin{cases}
 \frac{1}{b-a} &amp; \;\;\;\textrm{if }a\le x\le b\\
 0 &amp; \;\;\;\textrm{otherwise}
 \end{cases}\]</span>
which looks like this</p>
<p><img src="10_Functions_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>We want to write a function <code>duniform(x, a, b)</code> that takes an arbitrary value of <code>x</code> and parameters a and b and return the appropriate height of the density function. For various values of <code>x</code>, <code>a</code>, and <code>b</code>, demonstrate that your function returns the correct density value. Ideally, your function should be able to take a vector of values for <code>x</code> and return a vector of densities.</p></li>
<li><p>I very often want to provide default values to a parameter that I pass to a function. For example, it is so common for me to use the <code>pnorm()</code> and <code>qnorm()</code> functions on the standard normal, that R will automatically use <code>mean=0</code> and <code>sd=1</code> parameters unless you tell R otherwise. To get that behavior, we just set the default parameter values in the definition. When the function is called, the user specified value is used, but if none is specified, the defaults are used. Look at the help page for the functions <code>dunif()</code>, and notice that there are a number of default parameters. For your <code>duniform()</code> function provide default values of <code>0</code> and <code>1</code> for <code>a</code> and <code>b</code>. Demonstrate that your function is appropriately using the given default values.</p></li>
</ol>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="25-performance-issues-1.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="27-string-manipulation.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"],
"instapper": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/dereksonderegger/444/raw/master/10_Functions.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"search": true
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
